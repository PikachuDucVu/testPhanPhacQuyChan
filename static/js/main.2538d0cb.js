/*! For license information please see main.2538d0cb.js.LICENSE.txt */
!function(){var t={7465:function(t){"use strict";var e,n="object"===typeof Reflect?Reflect:null,r=n&&"function"===typeof n.apply?n.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)};e=n&&"function"===typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var i=Number.isNaN||function(t){return t!==t};function s(){s.init.call(this)}t.exports=s,t.exports.once=function(t,e){return new Promise((function(n,r){function i(n){t.removeListener(e,s),r(n)}function s(){"function"===typeof t.removeListener&&t.removeListener("error",i),n([].slice.call(arguments))}v(t,e,s,{once:!0}),"error"!==e&&function(t,e,n){"function"===typeof t.on&&v(t,"error",e,n)}(t,i,{once:!0})}))},s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var o=10;function a(t){if("function"!==typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function u(t){return void 0===t._maxListeners?s.defaultMaxListeners:t._maxListeners}function h(t,e,n,r){var i,s,o,h;if(a(n),void 0===(s=t._events)?(s=t._events=Object.create(null),t._eventsCount=0):(void 0!==s.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),s=t._events),o=s[e]),void 0===o)o=s[e]=n,++t._eventsCount;else if("function"===typeof o?o=s[e]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),(i=u(t))>0&&o.length>i&&!o.warned){o.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=t,l.type=e,l.count=o.length,h=l,console&&console.warn&&console.warn(h)}return t}function l(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function c(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},i=l.bind(r);return i.listener=n,r.wrapFn=i,i}function f(t,e,n){var r=t._events;if(void 0===r)return[];var i=r[e];return void 0===i?[]:"function"===typeof i?n?[i.listener||i]:[i]:n?function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(i):p(i,i.length)}function d(t){var e=this._events;if(void 0!==e){var n=e[t];if("function"===typeof n)return 1;if(void 0!==n)return n.length}return 0}function p(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function v(t,e,n,r){if("function"===typeof t.on)r.once?t.once(e,n):t.on(e,n);else{if("function"!==typeof t.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,(function i(s){r.once&&t.removeEventListener(e,i),n(s)}))}}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(t){if("number"!==typeof t||t<0||i(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");o=t}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(t){if("number"!==typeof t||t<0||i(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},s.prototype.getMaxListeners=function(){return u(this)},s.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var i="error"===t,s=this._events;if(void 0!==s)i=i&&void 0===s.error;else if(!i)return!1;if(i){var o;if(e.length>0&&(o=e[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var u=s[t];if(void 0===u)return!1;if("function"===typeof u)r(u,this,e);else{var h=u.length,l=p(u,h);for(n=0;n<h;++n)r(l[n],this,e)}return!0},s.prototype.addListener=function(t,e){return h(this,t,e,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(t,e){return h(this,t,e,!0)},s.prototype.once=function(t,e){return a(e),this.on(t,c(this,t,e)),this},s.prototype.prependOnceListener=function(t,e){return a(e),this.prependListener(t,c(this,t,e)),this},s.prototype.removeListener=function(t,e){var n,r,i,s,o;if(a(e),void 0===(r=this._events))return this;if(void 0===(n=r[t]))return this;if(n===e||n.listener===e)0===--this._eventsCount?this._events=Object.create(null):(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!==typeof n){for(i=-1,s=n.length-1;s>=0;s--)if(n[s]===e||n[s].listener===e){o=n[s].listener,i=s;break}if(i<0)return this;0===i?n.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(n,i),1===n.length&&(r[t]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",t,o||e)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(t){var e,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[t]&&(0===--this._eventsCount?this._events=Object.create(null):delete n[t]),this;if(0===arguments.length){var i,s=Object.keys(n);for(r=0;r<s.length;++r)"removeListener"!==(i=s[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"===typeof(e=n[t]))this.removeListener(t,e);else if(void 0!==e)for(r=e.length-1;r>=0;r--)this.removeListener(t,e[r]);return this},s.prototype.listeners=function(t){return f(this,t,!0)},s.prototype.rawListeners=function(t){return f(this,t,!1)},s.listenerCount=function(t,e){return"function"===typeof t.listenerCount?t.listenerCount(e):d.call(t,e)},s.prototype.listenerCount=d,s.prototype.eventNames=function(){return this._eventsCount>0?e(this._events):[]}},3294:function(t,e,n){"use strict";var r=n(4704).default;function i(t){if(this.words=[],null!=(s=t)&&void 0!==s[Symbol.iterator]){var e,n=r(t);try{for(n.s();!(e=n.n()).done;){var i=e.value;this.add(i)}}catch(o){n.e(o)}finally{n.f()}}var s}i.prototype.add=function(t){this.resize(t),this.words[t>>>5]|=1<<t},i.prototype.flip=function(t){this.resize(t),this.words[t>>>5]^=1<<t},i.prototype.clear=function(){this.words=[]},i.prototype.remove=function(t){this.resize(t),this.words[t>>>5]&=~(1<<t)},i.prototype.isEmpty=function(t){for(var e=this.words.length,n=0;n<e;n++)if(0!==this.words[n])return!1;return!0},i.prototype.has=function(t){return 0!==(this.words[t>>>5]&1<<t)},i.prototype.checkedAdd=function(t){this.resize(t);var e=this.words[t>>>5],n=e|1<<t;return this.words[t>>>5]=n,(n^e)>>>t},i.prototype.trim=function(t){for(var e=this.words.length;e>0&&0===this.words[e-1];)e--;this.words=this.words.slice(0,e)},i.prototype.resize=function(t){for(var e=t+32>>>5,n=this.words.length;n<e;n++)this.words[n]=0},i.prototype.hammingWeight=function(t){return 16843009*((t=(858993459&(t-=t>>>1&1431655765))+(t>>>2&858993459))+(t>>>4)&252645135)>>>24},i.prototype.hammingWeight4=function(t,e,n,r){return 16843009*((t=(t=(858993459&(t-=t>>>1&1431655765))+(t>>>2&858993459))+(t>>>4)&252645135)+(e=(e=(858993459&(e-=e>>>1&1431655765))+(e>>>2&858993459))+(e>>>4)&252645135)+(n=(n=(858993459&(n-=n>>>1&1431655765))+(n>>>2&858993459))+(n>>>4)&252645135)+(r=(r=(858993459&(r-=r>>>1&1431655765))+(r>>>2&858993459))+(r>>>4)&252645135))>>>24},i.prototype.size=function(){for(var t=0,e=this.words.length,n=this.words,r=0;r<e;r++)t+=this.hammingWeight(n[r]);return t},i.prototype.array=function(){for(var t=new Array(this.size()),e=0,n=this.words.length,r=0;r<n;++r)for(var i=this.words[r];0!=i;){var s=i&-i;t[e++]=(r<<5)+this.hammingWeight(s-1|0),i^=s}return t},i.prototype.forEach=function(t){for(var e=this.words.length,n=0;n<e;++n)for(var r=this.words[n];0!=r;){var i=r&-r;t((n<<5)+this.hammingWeight(i-1|0)),r^=i}},i.prototype.clone=function(){var t=Object.create(i.prototype);return t.words=this.words.slice(),t},i.prototype.intersects=function(t){for(var e=Math.min(this.words.length,t.words.length),n=0;n<e;++n)if(0!==(this.words[n]&t.words[n]))return!0;return!1},i.prototype.intersection=function(t){for(var e=Math.min(this.words.length,t.words.length),n=0;n+7<e;n+=8)this.words[n]&=t.words[n],this.words[n+1]&=t.words[n+1],this.words[n+2]&=t.words[n+2],this.words[n+3]&=t.words[n+3],this.words[n+4]&=t.words[n+4],this.words[n+5]&=t.words[n+5],this.words[n+6]&=t.words[n+6],this.words[n+7]&=t.words[n+7];for(;n<e;++n)this.words[n]&=t.words[n];var r=this.words.length;for(n=e;n<r;++n)this.words[n]=0;return this},i.prototype.intersection_size=function(t){for(var e=Math.min(this.words.length,t.words.length),n=0,r=0;r<e;++r)n+=this.hammingWeight(this.words[r]&t.words[r]);return n},i.prototype.new_intersection=function(t){var e=Object.create(i.prototype),n=Math.min(this.words.length,t.words.length);e.words=new Array(n);for(var r=n,s=0;s+7<r;s+=8)e.words[s]=this.words[s]&t.words[s],e.words[s+1]=this.words[s+1]&t.words[s+1],e.words[s+2]=this.words[s+2]&t.words[s+2],e.words[s+3]=this.words[s+3]&t.words[s+3],e.words[s+4]=this.words[s+4]&t.words[s+4],e.words[s+5]=this.words[s+5]&t.words[s+5],e.words[s+6]=this.words[s+6]&t.words[s+6],e.words[s+7]=this.words[s+7]&t.words[s+7];for(;s<r;++s)e.words[s]=this.words[s]&t.words[s];return e},i.prototype.equals=function(t){for(var e=Math.min(this.words.length,t.words.length),n=0;n<e;++n)if(this.words[n]!=t.words[n])return!1;if(this.words.length<t.words.length){var r=t.words.length;for(n=this.words.length;n<r;++n)if(0!=t.words[n])return!1}else if(t.words.length<this.words.length)for(r=this.words.length,n=t.words.length;n<r;++n)if(0!=this.words[n])return!1;return!0},i.prototype.difference=function(t){for(var e=Math.min(this.words.length,t.words.length),n=0;n+7<e;n+=8)this.words[n]&=~t.words[n],this.words[n+1]&=~t.words[n+1],this.words[n+2]&=~t.words[n+2],this.words[n+3]&=~t.words[n+3],this.words[n+4]&=~t.words[n+4],this.words[n+5]&=~t.words[n+5],this.words[n+6]&=~t.words[n+6],this.words[n+7]&=~t.words[n+7];for(;n<e;++n)this.words[n]&=~t.words[n];return this},i.prototype.difference_size=function(t){for(var e=Math.min(this.words.length,t.words.length),n=0,r=0;r<e;++r)n+=this.hammingWeight(this.words[r]&~t.words[r]);for(var i=this.words.length;r<i;++r)n+=this.hammingWeight(this.words[r]);return n},i.prototype.toString=function(){return"{"+this.array().join(",")+"}"},i.prototype.union=function(t){for(var e=Math.min(this.words.length,t.words.length),n=0;n+7<e;n+=8)this.words[n]|=t.words[n],this.words[n+1]|=t.words[n+1],this.words[n+2]|=t.words[n+2],this.words[n+3]|=t.words[n+3],this.words[n+4]|=t.words[n+4],this.words[n+5]|=t.words[n+5],this.words[n+6]|=t.words[n+6],this.words[n+7]|=t.words[n+7];for(;n<e;++n)this.words[n]|=t.words[n];if(this.words.length<t.words.length){this.resize((t.words.length<<5)-1);var r=t.words.length;for(n=e;n<r;++n)this.words[n]=t.words[n]}return this},i.prototype.new_union=function(t){var e=Object.create(i.prototype),n=Math.max(this.words.length,t.words.length);e.words=new Array(n);for(var r=Math.min(this.words.length,t.words.length),s=0;s+7<r;s+=8)e.words[s]=this.words[s]|t.words[s],e.words[s+1]=this.words[s+1]|t.words[s+1],e.words[s+2]=this.words[s+2]|t.words[s+2],e.words[s+3]=this.words[s+3]|t.words[s+3],e.words[s+4]=this.words[s+4]|t.words[s+4],e.words[s+5]=this.words[s+5]|t.words[s+5],e.words[s+6]=this.words[s+6]|t.words[s+6],e.words[s+7]=this.words[s+7]|t.words[s+7];for(;s<r;++s)e.words[s]=this.words[s]|t.words[s];var o=this.words.length;for(s=r;s<o;++s)e.words[s]=this.words[s];var a=t.words.length;for(s=r;s<a;++s)e.words[s]=t.words[s];return e},i.prototype.new_difference=function(t){return this.clone().difference(t)},i.prototype.union_size=function(t){for(var e=Math.min(this.words.length,t.words.length),n=0,r=0;r<e;++r)n+=this.hammingWeight(this.words[r]|t.words[r]);if(this.words.length<t.words.length){var i=t.words.length;for(r=this.words.length;r<i;++r)n+=this.hammingWeight(0|t.words[r])}else for(i=this.words.length,r=t.words.length;r<i;++r)n+=this.hammingWeight(0|this.words[r]);return n},t.exports=i},6894:function(t,e,n){"use strict";var r=n(9728).default,i=n(6690).default,s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Archetype=void 0;var o=s(n(3294)),a=r((function t(e){i(this,t),this.componentBits=new o.default,this.componentBitsInitialized=!1,this.componentTypes=e}));e.Archetype=a},8315:function(t,e,n){"use strict";var r=n(9728).default,i=n(6690).default;Object.defineProperty(e,"__esModule",{value:!0}),e.Component=void 0;var s=r((function t(){i(this,t)}));e.Component=s},3907:function(t,e,n){"use strict";var r=n(6690).default,i=n(9728).default;Object.defineProperty(e,"__esModule",{value:!0}),e.ComponentMapper=void 0;var s=function(){function t(){r(this,t),this.data=[]}return i(t,[{key:"add",value:function(t,e){this.data[t]=e}},{key:"get",value:function(t){return this.data[t]}},{key:"remove",value:function(t){delete this.data[t]}}]),t}();e.ComponentMapper=s},1776:function(t,e,n){"use strict";var r=n(4704).default,i=n(6690).default,s=n(9728).default,o=n(1588).default,a=n(3808).default,u=n(1655).default,h=n(6389).default,l=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.EntityIteratingSystem=void 0;var c=n(7812),f=l(n(3294)),d=function(t){u(n,t);var e=h(n);function n(t){var r;return i(this,n),(r=e.call(this)).componentBits=new f.default,r.types=t,r}return s(n,[{key:"setWorld",value:function(t){o(a(n.prototype),"setWorld",this).call(this,t);var e,i=r(this.types);try{for(i.s();!(e=i.n()).done;){var s=e.value;this.componentBits.add(t.getComponentIndex(s))}}catch(u){i.e(u)}finally{i.f()}}},{key:"process",value:function(){this.begin(),this.world.getEntities(this.componentBits,this.processEntity.bind(this)),this.end()}},{key:"begin",value:function(){}},{key:"end",value:function(){}}]),n}(c.System);e.EntityIteratingSystem=d},3929:function(t,e,n){"use strict";var r=n(6690).default,i=n(9728).default,s=n(1655).default,o=n(6389).default;Object.defineProperty(e,"__esModule",{value:!0}),e.EntitySystem=void 0;var a=function(t){s(n,t);var e=o(n);function n(){var t;return r(this,n),(t=e.apply(this,arguments)).entities=[],t}return i(n,[{key:"process",value:function(){this.entities.length=0,this.begin(),this.world.getEntities(this.componentBits,this.processEntity.bind(this)),this.processEntities(this.entities),this.end()}},{key:"processEntity",value:function(t){this.entities.push(t)}}]),n}(n(1776).EntityIteratingSystem);e.EntitySystem=a},8841:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Inject=void 0,e.Inject=function(t){return function(e,n){var r=e.constructor;r.hasOwnProperty("__inject__")||(r.__inject__={}),r.__inject__[n]=t}}},8675:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InjectMapper=void 0,e.InjectMapper=function(t){return function(e,n){var r=e.constructor;r.hasOwnProperty("__injectMapper__")||(r.__injectMapper__={}),r.__injectMapper__[n]=t}}},7812:function(t,e,n){"use strict";var r=n(6690).default,i=n(9728).default;Object.defineProperty(e,"__esModule",{value:!0}),e.System=void 0;var s=function(){function t(){r(this,t)}return i(t,[{key:"setWorld",value:function(t){this.world=t}},{key:"initialized",value:function(){}},{key:"dispose",value:function(){}}]),t}();e.System=s},1694:function(t,e,n){"use strict";var r=n(4704).default,i=n(6690).default,s=n(9728).default,o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var a=o(n(3294)),u=n(3907),h=function(){function t(){i(this,t),this.index=0,this.mappers={},this.componentBitsMap=[],this.componentIndices=new Map,this.currentComponentIndex=0,this.activeSystems=[],this.passiveSystems=[],this.injectionRegistry={},this.delta=0}return s(t,[{key:"getNewId",value:function(){return this.index++}},{key:"createEntity",value:function(){return this.getNewId()}},{key:"getComponentBits",value:function(t){return this.componentBitsMap[t]||(this.componentBitsMap[t]=new a.default),this.componentBitsMap[t]}},{key:"getMapper",value:function(t){var e=this.getComponentIndex(t);return this.getMapperByIndex(e)}},{key:"getMapperByIndex",value:function(t){return this.mappers[t]||(this.mappers[t]=new u.ComponentMapper),this.mappers[t]}},{key:"getComponentIndex",value:function(t){var e=this.componentIndices.get(t);return void 0===e&&(e=this.currentComponentIndex++,this.componentIndices.set(t,e)),e}},{key:"createEntityByArchetype",value:function(t){var e=this,n=this.getNewId();return t.componentTypes.forEach((function(r){var i=new r;t.componentBitsInitialized||t.componentBits.add(e.getComponentIndex(r)),e.addComponent(n,i,!1)})),this.componentBitsMap[n]=t.componentBits,n}},{key:"addComponent",value:function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=this.getComponentIndex(e.constructor),i=this.getMapperByIndex(r);return i.add(t,e),n&&this.getComponentBits(t).add(r),e}},{key:"getComponent",value:function(t,e){return this.getMapper(e).get(t)}},{key:"getEntities",value:function(t,e){for(var n=0;n<this.componentBitsMap.length;n++)if(this.componentBitsMap[n]){var r=this.componentBitsMap[n];t.union_size(r)===r.size()&&e(n)}}},{key:"addSystem",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e?this.activeSystems.push(t):this.passiveSystems.push(t),t.setWorld(this),this.injectMapper(t),this.inject(t),t.initialized()}},{key:"injectMapper",value:function(t){var e=t.constructor.__injectMapper__||{};for(var n in e){var r=e[n];t[n]=this.getMapper(r)}}},{key:"register",value:function(t,e){this.injectionRegistry[t]=e}},{key:"inject",value:function(t){var e=t.constructor.__inject__||{};for(var n in e){var r=e[n];t[n]=this.injectionRegistry[r]}}},{key:"dispose",value:function(){var t,e=r(this.activeSystems);try{for(e.s();!(t=e.n()).done;){t.value.dispose()}}catch(s){e.e(s)}finally{e.f()}var n,i=r(this.passiveSystems);try{for(i.s();!(n=i.n()).done;){n.value.dispose()}}catch(s){i.e(s)}finally{i.f()}}},{key:"setDelta",value:function(t){this.delta=t}},{key:"processActiveSystem",value:function(){var t,e=r(this.activeSystems);try{for(e.s();!(t=e.n()).done;){t.value.process()}}catch(n){e.e(n)}finally{e.f()}}},{key:"processPassiveSystem",value:function(){var t,e=r(this.passiveSystems);try{for(e.s();!(t=e.n()).done;){t.value.process()}}catch(n){e.e(n)}finally{e.f()}}},{key:"deleteEntity",value:function(t){for(var e in this.mappers)this.mappers[e].remove(t);delete this.componentBitsMap[t]}},{key:"isEntityActive",value:function(t){return!!this.componentBitsMap[t]}}]),t}();e.default=h},7530:function(t,e,n){"use strict";var r=n(1694);Object.defineProperty(e,"q3",{enumerable:!0,get:function(){return r.default}});var i=n(6894);var s=n(8315);var o=n(3907);var a=n(1776);var u=n(3929);var h=n(7812);Object.defineProperty(e,"xP",{enumerable:!0,get:function(){return h.System}});var l=n(8675);var c=n(8841);Object.defineProperty(e,"tB",{enumerable:!0,get:function(){return c.Inject}})},9054:function(t,e,n){"use strict";var r,i=n(4704).default,s=n(6690).default,o=n(9728).default;Object.defineProperty(e,"__esModule",{value:!0}),e.Animation=e.PlayMode=void 0,function(t){t[t.NORMAL=0]="NORMAL",t[t.LOOP=1]="LOOP",t[t.LOOP_PINGPONG=2]="LOOP_PINGPONG",t[t.REVERSED=3]="REVERSED",t[t.LOOP_REVERSED=4]="LOOP_REVERSED"}(r=e.PlayMode||(e.PlayMode={}));var a=function(){function t(e,n){s(this,t),this.totalDuration=0,this.keyFrames=e,Array.isArray(n)||(n=[n]);for(var r=n[n.length-1]||0;n.length<e.length;)n.push(r);var o,a=i(n);try{for(a.s();!(o=a.n()).done;){var u=o.value;this.totalDuration+=u}}catch(h){a.e(h)}finally{a.f()}this.frameDurations=n}return o(t,[{key:"getFrameNumber",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.frameDurations,r=e?n.length-1:0;!((t-=n[r])<0);)e?r--:r++;return r}},{key:"getKeyFrame",value:function(t,e){var n=this.keyFrames,i=this.frameDurations,s=this.totalDuration,o=Math.floor(t/s),a=t%s,u=0;switch(e){case r.NORMAL:u=0===o?this.getFrameNumber(a):i.length-1;break;case r.LOOP:u=this.getFrameNumber(a);break;case r.LOOP_PINGPONG:u=this.getFrameNumber(a,o%2===1);break;case r.REVERSED:u=0===o?this.getFrameNumber(a,!0):0;break;case r.LOOP_REVERSED:u=this.getFrameNumber(a,!0)}return n[u]}}]),t}();e.Animation=a},7035:function(t,e,n){"use strict";var r=n(861).default,i=n(7061).default,s=n(4704).default,o=n(6690).default,a=n(9728).default,u=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,s){function o(t){try{u(r.next(t))}catch(e){s(e)}}function a(t){try{u(r.throw(t))}catch(e){s(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}u((r=r.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.AssetManager=void 0;var h=n(5283),l=n(3432),c=n(8143),f=function(){function t(e){o(this,t),this.promises=[],this.atlases=new Map,this.textures=new Map,this.jsonData=new Map,this.binaryData=new Map,this.done=0,this.listeners=[],this.fonts=new Map,this.gl=e}return a(t,[{key:"addListener",value:function(t){this.listeners.push(t)}},{key:"reportDone",value:function(){this.done++;var t,e=s(this.listeners);try{for(e.s();!(t=e.n()).done;){(0,t.value)(this.done/this.getTotal()*100,this.done>=this.getTotal())}}catch(n){e.e(n)}finally{e.f()}}},{key:"loadAtlas",value:function(t,e){var n=this,r=c.TextureAtlas.load(this.gl,t,{}).then((function(t){return n.atlases.set(e,t),n.reportDone(),t}));return this.promises.push(r),r}},{key:"getAtlas",value:function(t){return this.atlases.get(t)}},{key:"loadJsonData",value:function(t,e){var n=this,r=fetch(t).then((function(t){return t.json()})).then((function(t){return n.jsonData.set(e,t),n.reportDone(),t}));return this.promises.push(r),r}},{key:"getJsonData",value:function(t){return this.jsonData.get(t)}},{key:"loadBinaryData",value:function(t,e){var n=this,r=fetch(t).then((function(t){return t.arrayBuffer()})).then((function(t){return n.binaryData.set(e,t),n.reportDone(),t}));return this.promises.push(r),r}},{key:"getBinaryData",value:function(t){return this.binaryData.get(t)}},{key:"loadFont",value:function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=h.BitmapFont.load(this.gl,t,r).then((function(t){return n.fonts.set(e,t),n.reportDone(),t}));return this.promises.push(i),i}},{key:"getFont",value:function(t){return this.fonts.get(t)}},{key:"loadTexture",value:function(t,e){var n=this,r=l.Texture.load(this.gl,t).then((function(t){return n.textures.set(e,t),n.reportDone(),t}));return this.promises.push(r),r}},{key:"getTexture",value:function(t){return this.textures.get(t)}},{key:"finishLoading",value:function(){return u(this,void 0,void 0,i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all(this.promises);case 2:case"end":return t.stop()}}),t,this)})))}},{key:"getDone",value:function(){return this.done}},{key:"getTotal",value:function(){return this.promises.length}},{key:"disposeAll",value:function(){var t=this;r(this.atlases.keys()).forEach((function(e){var n;((null===(n=t.atlases.get(e))||void 0===n?void 0:n.getRegions())||[]).forEach((function(t){var e;null===(e=t.texture)||void 0===e||e.destroy()})),t.atlases.delete(e)})),r(this.textures.keys()).forEach((function(e){var n;null===(n=t.textures.get(e))||void 0===n||n.destroy(),t.textures.delete(e)})),r(this.fonts.keys()).forEach((function(e){var n;((null===(n=t.fonts.get(e))||void 0===n?void 0:n.getRegions())||[]).forEach((function(t){var e;null===(e=t.texture)||void 0===e||e.destroy()})),t.fonts.delete(e)}))}}]),t}();e.AssetManager=f,e.default=f},5283:function(t,e,n){"use strict";var r=n(7061).default,i=n(9728).default,s=n(6690).default,o=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,s){function o(t){try{u(r.next(t))}catch(e){s(e)}}function a(t){try{u(r.throw(t))}catch(e){s(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}u((r=r.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.BitmapFont=void 0;var a=n(6735),u=n(909),h=n(8637),l=i((function t(e,n,r){var i=this;s(this,t),this.load=function(t){for(var e=Object.values(t.glyphs),n=0;n<e.length;n++){var r=e[n];if(r)for(var s=0;s<r.length;s++){var o=r[s];o&&t.setGlyphRegion(o,i.regions[o.page])}}null!=t.missingGlyph&&t.setGlyphRegion(t.missingGlyph,i.regions[t.missingGlyph.page])},this.draw=function(t,e,n,r,s){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:h.Align.left,a=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:e.length,c=arguments.length>9?arguments[9]:void 0;i.cache.clear(),i.cache.addText(e,n,r,u,l,s,o,a,c),i.cache.draw(t)},this.getColor=function(){return i.cache.getColor()},this.getScaleX=function(){return i.data.scaleX},this.getScaleY=function(){return i.data.scaleY},this.getRegions=function(){return i.regions},this.getRegion=function(t){return i.regions[t]},this.getLineHeight=function(){return i.data.lineHeight},this.getSpaceXadvance=function(){return i.data.spaceXadvance},this.getXHeight=function(){return i.data.xHeight},this.getCapHeight=function(){return i.data.capHeight},this.getAscent=function(){return i.data.ascent},this.getDescent=function(){return i.data.descent},this.isFlipped=function(){return i.flipped},this.dispose=function(){if(i.ownsTexture)for(var t=0;t<i.regions.length;t++)i.regions[t].texture.dispose()},this.setFixedWidthGlyphs=function(t){for(var e=i.data,n=0,r=0,s=t.length;r<s;r++){var o=e.getGlyph(t.charAt(r));null!=o&&o.xadvance>n&&(n=o.xadvance)}for(var a=0,u=t.length;a<u;a++){var h=e.getGlyph(t.charAt(a));h&&(h.xoffset+=(n-h.xadvance)/2,h.xadvance=n,h.kerning=[],h.kerning=null,h.fixedWidth=!0)}},this.setUseIntegerPositions=function(t){i.integer=t,i.cache.setUseIntegerPositions(t)},this.usesIntegerPositions=function(){return i.integer},this.getCache=function(){return i.cache},this.getData=function(){return i.data},this.getOwnsTexture=function(){return i.ownsTexture},this.setOwnsTexture=function(t){i.ownsTexture=t},this.newFontCache=function(){return new a.BitmapFontCache(i,i.integer)},this.regions=n,this.flipped=e.flipped,this.data=e,this.integer=r,0!==this.regions.length?(this.ownsTexture=!1,this.cache=this.newFontCache(),this.load(e)):console.log("No texture region were found")}));e.BitmapFont=l,l.load=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return o(void 0,void 0,void 0,r().mark((function s(){var o;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return o=new u.BitmapFontData(e,n),r.next=3,o.loadFont(t);case 3:return r.abrupt("return",new l(o,o.regions,i));case 4:case"end":return r.stop()}}),s)})))}},6735:function(t,e,n){"use strict";var r=n(861).default,i=n(6690).default,s=n(9728).default;Object.defineProperty(e,"__esModule",{value:!0}),e.BitmapFontCache=void 0;var o=n(417),a=n(2226),u=n(8637),h=function(){function t(e,n){var s=this;i(this,t),this.tempColor=new u.Color(1,1,1,1),this.drawingTexts=[],this.layouts=[],this.pooledLayouts=[],this.color=new u.Color(1,1,1,1),this.setPosition=function(t,e){s.translate(t-s.x,e-s.y)},this.translate=function(t,e){if(0!==t||0!==e){s.integer&&(t=Math.round(t),e=Math.round(e)),s.x+=t,s.y+=e;for(var n=s.pageVertices,r=0,i=n.length;r<i;r++)for(var o=n[r],a=0,u=s.idx[r];a<u;a+=5)o[a]+=t,o[a+1]+=e}},this.setColors=function(t,e,n,r){for(var i=255<<24|255*n<<16|255*e<<8|255*t,o=a.NumberUtil.intToFloatColor(i),u=0,h=s.pageVertices.length;u<h;u++)for(var l=s.pageVertices[u],c=2,f=s.idx[u];c<f;c+=5)l[c]=o},this.getColor=function(){return s.color},this.setColor=function(t,e,n,r){s.color.set(t,e,n,r)},this.clear=function(){s.x=0,s.y=0,u.Pools.freeAll("GlyphLayout",s.pooledLayouts),s.pooledLayouts.length=0,s.layouts.length=0;for(var t=0,e=s.idx.length;t<e;t++)null!=s.pageGlyphIndices&&(s.pageGlyphIndices[t].length=0),s.idx[t]=0},this.requireGlyphs=function(t){if(1===s.pageVertices.length)s.requirePageGlyphs(0,t.glyphCount);else{for(var e=s.tempGlyphCount,n=0;n<e.length;n++)e[n]=0;for(var r=0,i=t.runs.length;r<i;r++)for(var o=t.runs[r].glyphs,a=o,u=0,h=o.length;u<h;u++)e[a[u].page]++;for(var l=0,c=e.length;l<c;l++)s.requirePageGlyphs(l,e[l])}},this.requirePageGlyphs=function(t,e){var n=s.idx[t]+20*e,r=s.pageVertices[t];if(r){if(r.length<n){var i=new Array(n);u.Utils.arrayCopy(r,0,i,0,s.idx[t]),s.pageVertices[t]=i}}else s.pageVertices[t]=new Array(n)},this.setPageCount=function(t){var e=new Array(t).fill([]);u.Utils.arrayCopy(s.pageVertices,0,e,0,s.pageVertices.length),s.pageVertices=r(e);var n=new Array(t);u.Utils.arrayCopy(s.idx,0,n,0,s.idx.length),s.idx=n;var i=new Array(t),o=0;null!=s.pageGlyphIndices&&(o=s.pageGlyphIndices.length,u.Utils.arrayCopy(s.pageGlyphIndices,0,i,0,s.pageGlyphIndices.length));for(var a=o;a<t;a++)i[a]=[];s.pageGlyphIndices=i,s.tempGlyphCount=new Array(t)},this.addToCache=function(t,e,n){var r=t.runs.length;if(0!==r){s.pageVertices.length<s.font.regions.length&&s.setPageCount(s.font.regions.length),s.layouts.push(t),s.requireGlyphs(t);var i=t.colors,o=0,u=0,h=0,l=0;s.drawingTexts.length=0;for(var c=0;c<r;c++)for(var f=t.runs[c],d=f.glyphs,p=f.xAdvances,v=e+f.x,y=n+f.y,g=0,M=f.glyphs.length;g<M;g++)h++===u&&(l=a.NumberUtil.intToFloatColor(i[++o]),u=++o<i.length?i[o]:-1),v+=p[g],s.drawingTexts.push(d[g].id),s.addGlyph(d[g],v,y,l);s.currentTint=a.NumberUtil.intToFloatColor(-1)}},this.addGlyph=function(t,e,n,r){var i=s.font.data.scaleX,o=s.font.data.scaleY;e+=t.xoffset*i,n+=t.yoffset*o;var a=t.width*i,u=t.height*o,h=t.u,l=t.u2,c=t.v,f=t.v2;s.integer&&(e=Math.round(e),n=Math.round(n),a=Math.round(a),u=Math.round(u));var d=e+a,p=n+u,v=t.page,y=s.idx[v];s.idx[v]+=20,null!=s.pageGlyphIndices&&s.pageGlyphIndices[v].push(s.glyphCount++);var g=s.pageVertices[v];g[y++]=e,g[y++]=n,g[y++]=r,g[y++]=h,g[y++]=c,g[y++]=e,g[y++]=p,g[y++]=r,g[y++]=h,g[y++]=f,g[y++]=d,g[y++]=p,g[y++]=r,g[y++]=l,g[y++]=f,g[y++]=d,g[y++]=n,g[y++]=r,g[y++]=l,g[y]=c},this.setText=function(t,e,n,r,i,o,a,u,h){return s.clear(),s.addText(t,e,n,r,i,o,a,u,h)},this.setTextToCache=function(t,e,n){s.clear(),s.addTextToCache(t,e,n)},this.addText=function(t,e,n,r,i,o,a,h,l){var c=u.Pools.obtain("GlyphLayout");return s.pooledLayouts.push(c),c.setText(s.font,t,r,i,s.color,o,a,h,l),s.addTextToCache(c,e,n),c},this.addTextToCache=function(t,e,n){s.addToCache(t,e,n+s.font.data.ascent)},this.getX=function(){return s.x},this.getY=function(){return s.y},this.getFont=function(){return s.font},this.setUseIntegerPositions=function(t){s.integer=t},this.usesIntegerPositions=function(){return s.integer},this.getVertices=function(t){return s.pageVertices[t]},this.getVertexCount=function(t){return s.idx[t]},this.getLayouts=function(){return s.layouts},this.font=e,this.integer=n;var h=e.regions.length;if(0===h&&console.log("The specified font must contain at least one texture page."),this.pageVertices=new Array(h).fill([]),this.idx=new Array(h),h>1){this.pageGlyphIndices=new Array(h);for(var l=0,c=this.pageGlyphIndices.length;l<c;l++)this.pageGlyphIndices[l]=[]}this.tempGlyphCount=new Array(h),u.Pools.get("GlyphLayout",(function(){return new o.GlyphLayout(e,"",0,0,u.Color.WHITE,0,u.Align.left,!1)}))}return s(t,[{key:"draw",value:function(t){for(var e=this,n=this.font.getRegions(),r=0;r<this.pageVertices.length;r++)if(this.idx[r]>0)for(var i=this.pageVertices[r],s=function(r){var s=20*r,o=n.find((function(t){var n;return t.id===(null===(n=e.drawingTexts)||void 0===n?void 0:n[r])}));o&&o.draw(t,i[0+s],i[1+s],i[10+s]-i[0+s],i[11+s]-i[1+s])},o=0;o<this.idx[r]/20;o++)s(o)}}]),t}();e.BitmapFontCache=h},909:function(t,e,n){"use strict";var r=n(861).default,i=n(7061).default,s=n(6690).default,o=n(9728).default,a=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,s){function o(t){try{u(r.next(t))}catch(e){s(e)}}function a(t){try{u(r.throw(t))}catch(e){s(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}u((r=r.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.BitmapFontData=void 0;var u=n(5508),h=n(3432),l=n(8026);function c(t,e){for(var n=t.split("/"),r=e.split("/"),i=[],s=0,o=n.length;s<o;s++)if(".."===n[s])i.pop();else{if("."===n[s])continue;i.push(n[s])}for(var a=0,u=r.length;a<u;a++)if(".."===r[a])i.pop();else{if("."===r[a])continue;i.push(r[a])}return i.join("/")}var f=65535,d=function(){function t(e,n){var r=this;s(this,t),this.capHeight=1,this.blankLineScale=1,this.scaleX=1,this.scaleY=1,this.glyphs={},this.xHeight=1,this.xChars=["x","e","a","o","n","s","r","c","u","m","v","w","z"],this.capChars=["M","N","B","D","C","E","F","K","A","G","H","I","J","L","O","P","Q","R","S","T","U","V","W","X","Y","Z"],this.loadFont=function(t){return a(r,void 0,void 0,i().mark((function e(){var n,r,s,o,a,d,v,y,g,M,m,x,w,b,k,_,E,T,A,P,L,C,R,I,S,O,j,D,z,G,N,V,B,F,W,H,U,X,Y,q,Z,K,J,Q,$,tt,et,nt,rt,it,st,ot,at,ut,ht,lt,ct,ft,dt,pt,vt,yt,gt,Mt,mt,xt;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.imagePaths){e.next=2;break}return e.abrupt("return");case 2:return n=0,e.next=5,fetch(this.fontFile);case 5:return s=e.sent,e.next=8,s.text();case 8:if(r=e.sent,o=r.split(/\r?\n/).map((function(t){return t.trim()})),e.prev=10,"string"===typeof(a=o[n])){e.next=14;break}throw new Error("File is empty.");case 14:if(a=a.substring(a.indexOf("padding=")+8),4===(d=a.substring(0,a.indexOf(" ")).split(",",4)).length){e.next=18;break}throw new Error("Invalid padding.");case 18:if(this.padTop=parseInt(d[0]),this.padRight=parseInt(d[1]),this.padBottom=parseInt(d[2]),this.padLeft=parseInt(d[3]),v=this.padTop+this.padBottom,n++,"string"===typeof(a=o[n])){e.next=27;break}throw new Error("Missing common header.");case 27:if(!((y=a.split(" ",9)).length<3)){e.next=30;break}throw new Error("Invalid common header.");case 30:if(y[1].startsWith("lineHeight=")){e.next=32;break}throw new Error("Missing: lineHeight");case 32:if(this.lineHeight=parseInt(y[1].substring(11)),y[2].startsWith("base=")){e.next=35;break}throw new Error("Missing: base");case 35:if(g=parseInt(y[2].substring(5)),M=1,y.length>=6&&null!=y[5]&&y[5].startsWith("pages="))try{M=Math.max(1,parseInt(y[5].substring(6)))}catch(i){}this.imagePaths=new Array(M),m=[],x=0;case 41:if(!(x<M)){e.next=65;break}if(n++,"string"===typeof(a=o[n])){e.next=46;break}throw new Error("Missing additional page definitions.");case 46:if(!((w=a.match(new RegExp(".*id=(\\d+)")))&&w.length>1)){e.next=57;break}if(b=w[1],e.prev=49,parseInt(b)===x){e.next=53;break}throw new Error("Page IDs must be indices starting at 0: "+b);case 53:e.next=57;break;case 55:e.prev=55,e.t0=e.catch(49);case 57:if((k=a.match(new RegExp('.*file="?([^"]+)"?')))&&!(k.length<=1)){e.next=60;break}throw new Error("Missing: file");case 60:_=k[1],m[x]=_;case 62:x++,e.next=41;break;case 65:this.descent=0;case 66:if(n++,a=o[n]){e.next=71;break}return e.abrupt("break",105);case 71:if(!a.startsWith("kernings ")){e.next=73;break}return e.abrupt("break",105);case 73:if(!a.startsWith("metrics ")){e.next=75;break}return e.abrupt("break",105);case 75:if(a.startsWith("char ")){e.next=77;break}return e.abrupt("continue",66);case 77:if(E=new u.Glyph,(T=new p(a,"=")).nextToken(),T.nextToken(),!((A=parseInt(T.nextToken()))>0&&A>f)){e.next=84;break}return e.abrupt("continue",66);case 84:if(E.id=A+"",T.nextToken(),E.srcX=parseInt(T.nextToken()),T.nextToken(),E.srcY=parseInt(T.nextToken()),T.nextToken(),E.width=parseInt(T.nextToken()),T.nextToken(),E.height=parseInt(T.nextToken()),T.nextToken(),E.xoffset=parseInt(T.nextToken()),T.nextToken(),this.flipped?E.yoffset=parseInt(T.nextToken()):E.yoffset=-(E.height+parseInt(T.nextToken())),T.nextToken(),E.xadvance=parseInt(T.nextToken()),T.hasMoreTokens()&&T.nextToken(),T.hasMoreTokens())try{E.page=parseInt(T.nextToken())}catch(wt){}E.width>0&&E.height>0&&(this.descent=Math.min(g+E.yoffset,this.descent)),A<=0?this.missingGlyph=E:A<=f&&this.setGlyph(A,E),e.next=66;break;case 105:this.descent+=this.padBottom;case 106:if(n++,"string"===typeof(a=o[n])){e.next=111;break}return e.abrupt("break",127);case 111:if(a.startsWith("kerning ")){e.next=113;break}return e.abrupt("break",127);case 113:if((P=new p(a,"=")).nextToken(),P.nextToken(),L=parseInt(P.nextToken()),P.nextToken(),C=parseInt(P.nextToken()),!(L<0||L>f||C<0||C>f)){e.next=121;break}return e.abrupt("continue",106);case 121:R=this.getGlyph(L+""),P.nextToken(),I=parseInt(P.nextToken()),R&&R.setKerning(C,I),e.next=106;break;case 127:S=!1,O=0,j=0,D=0,z=0,G=0,N=0,V=0,null!=a&&a.startsWith("metrics ")&&(S=!0,(B=new p(a,"=")).nextToken(),B.nextToken(),O=parseFloat(B.nextToken()),B.nextToken(),j=parseFloat(B.nextToken()),B.nextToken(),D=parseFloat(B.nextToken()),B.nextToken(),z=parseFloat(B.nextToken()),B.nextToken(),G=parseFloat(B.nextToken()),B.nextToken(),N=parseFloat(B.nextToken()),B.nextToken(),V=parseFloat(B.nextToken())),(F=this.getGlyph("32"))||((F=new u.Glyph).id="32",(W=this.getGlyph("l"))||(W=this.getFirstGlyph()),F.xadvance=W.xadvance,this.setGlyph(32,F)),0===F.width&&(F.width=this.padLeft+F.xadvance+this.padRight,F.xoffset=-this.padLeft),this.spaceXadvance=F.xadvance,U=0;case 141:if(!(U<this.xChars.length)){e.next=148;break}if(!(H=this.getGlyph(this.xChars[U]))){e.next=145;break}return e.abrupt("break",148);case 145:U++,e.next=141;break;case 148:H||(H=this.getFirstGlyph()),this.xHeight=H.height-v,Y=0;case 151:if(!(Y<this.capChars.length)){e.next=158;break}if(!(X=this.getGlyph(this.capChars[Y]))){e.next=155;break}return e.abrupt("break",158);case 155:Y++,e.next=151;break;case 158:if(X){e.next=178;break}q=Object.values(this.glyphs),Z=0;case 161:if(!(Z<q.length)){e.next=176;break}if(K=q[Z]){e.next=165;break}return e.abrupt("continue",173);case 165:J=0;case 166:if(!(J<K.length)){e.next=173;break}if(K[J]&&0!==K[J].height&&0!==K[J].width){e.next=169;break}return e.abrupt("continue",170);case 169:this.capHeight=Math.max(this.capHeight,K[J].height);case 170:J++,e.next=166;break;case 173:Z++,e.next=161;break;case 176:e.next=179;break;case 178:this.capHeight=X.height;case 179:for(this.capHeight-=v,this.ascent=g-this.capHeight,this.down=-this.lineHeight,this.flipped&&(this.ascent=-this.ascent,this.down=-this.down),S&&(this.ascent=O,this.descent=j,this.down=D,this.capHeight=z,this.lineHeight=G,this.spaceXadvance=N,this.xHeight=V),Q=[],$=Object.values(this.glyphs),tt=0;tt<$.length;tt++)for(et=Object.values($[tt]),nt=0;nt<et.length;nt++)rt={id:et[nt].id,left:et[nt].srcX,top:et[nt].srcY,width:et[nt].width,height:et[nt].height,xoffset:et[nt].xoffset,yoffset:et[nt].yoffset,xadvance:et[nt].xadvance,page:m[et[nt].page],pageId:et[nt].page},Q.push(rt);it=[],st=0;case 189:if(!(st<M)){e.next=199;break}return e.next=192,h.Texture.load(t,c(this.fontFile,"../".concat(m[st])));case 192:ot=e.sent,at=1/ot.width,ut=1/ot.height,it.push({texture:ot,invTexWidth:at,invTexHeight:ut});case 196:st++,e.next=189;break;case 199:for(this.regions=[],ht=0,lt=Q;ht<lt.length;ht++)ct=lt[ht],ft=ct.left,dt=ct.top,pt=ct.width,vt=ct.height,yt=it[ct.pageId],gt=yt.texture,Mt=yt.invTexWidth,mt=yt.invTexHeight,(xt=new l.TextureRegion(gt,ft,dt,pt,vt,ct,Mt,mt)).originalWidth=pt,xt.originalHeight=vt,xt.offsetX=0,xt.offsetY=0,this.regions.push(xt);e.next=206;break;case 203:e.prev=203,e.t1=e.catch(10),console.error(e.t1);case 206:case"end":return e.stop()}}),e,this,[[10,203],[49,55]])})))},this.setGlyphRegion=function(t,e){var n=e.texture,i=1/n.width,s=1/n.height,o=e.u,a=e.v,u=(e.originalWidth,e.originalHeight,t.srcX),h=t.srcX+t.width,l=t.srcY,c=t.srcY+t.height;t.u=o+u*i,t.u2=o+h*i,r.flipped?(t.v=a+l*s,t.v2=a+c*s):(t.v2=a+l*s,t.v=a+c*s)},this.setLineHeight=function(t){r.lineHeight=t*r.scaleY,r.down=r.flipped?r.lineHeight:-r.lineHeight},this.setGlyph=function(t,e){var n=r.glyphs[t/u.PAGE_SIZE];n||(n=new Array(u.PAGE_SIZE),r.glyphs[t/u.PAGE_SIZE]=n),n[t&u.PAGE_SIZE-1]=e},this.getFirstGlyph=function(){for(var t=Object.values(r.glyphs),e=0;e<t.length;e++){var n=t[e];if(n)for(var i=0;i<n.length;i++){var s=n[i];if(s&&0!==s.height&&0!==s.width)return s}}},this.hasGlyph=function(t){return!!r.missingGlyph||null!=r.getGlyph(t)},this.getGlyph=function(t){var e=r.glyphs[t.charCodeAt(0)/u.PAGE_SIZE];if(null!=e)return e[t.charCodeAt(0)&u.PAGE_SIZE-1]},this.getGlyphs=function(t,e,n,i,s){if(0!==i-n){var o=r.markupEnabled,a=r.scaleX,u=t.glyphs,h=t.xAdvances;do{var l=e.charAt(n++);if("\r"!==l){var c=r.getGlyph(l);if(!c){if(!r.missingGlyph)continue;c=r.missingGlyph}u.push(c),h.push(s?(s.xadvance+s.getKerning(l))*a:c.fixedWidth?0:-c.xoffset*a-r.padLeft),s=c,o&&"["===l&&n<i&&"["===e.charAt(n)&&n++}}while(n<i);if(s){var f=s.fixedWidth?s.xadvance*a:(s.width+s.xoffset)*a-r.padRight;h.push(f)}}},this.getWrapIndex=function(t,e){var n=e-1,i=t,s=i[n].id;if(r.isWhitespace(s+""))return n;for(r.isBreakChar(s+"")&&n--;n>0;n--)if(s=i[n].id,r.isWhitespace(s+"")||r.isBreakChar(s+""))return n+1;return 0},this.isBreakChar=function(t){if(!r.breakChars)return!1;for(var e=String.fromCharCode(parseInt(t)),n=0;n<r.breakChars.length;n++)if(e===r.breakChars[n])return!0;return!1},this.isWhitespace=function(t){switch(String.fromCharCode(parseInt(t))){case"\n":case"\r":case"\t":case" ":return!0;default:return!1}},this.getImagePath=function(t){return r.imagePaths[t]},this.getImagePaths=function(){return r.imagePaths},this.setScale=function(t,e){if(0!==t&&0!==e){var n=t/r.scaleX,i=e/r.scaleY;r.lineHeight*=i,r.spaceXadvance*=n,r.xHeight*=i,r.capHeight*=i,r.ascent*=i,r.descent*=i,r.down*=i,r.padLeft*=n,r.padRight*=n,r.padTop*=i,r.padBottom*=i,r.scaleX=t,r.scaleY=e}},this.scale=function(t){r.setScale(r.scaleX+t,r.scaleY+t)},this.fontFile=e,this.flipped=n}return o(t,[{key:"setXYScale",value:function(t){this.setScale(t,t)}}]),t}();e.BitmapFontData=d;var p=function(){function t(e,n){s(this,t),this.strArray=[],this.currentIndex=0;for(var i=e.split(/\s+/),o=0;o<i.length;o++){var a,u=i[o];(a=this.strArray).push.apply(a,r(u.split(n)))}}return o(t,[{key:"hasMoreTokens",value:function(){return this.currentIndex>=this.strArray.length}},{key:"nextToken",value:function(){return this.strArray[this.currentIndex++]}}]),t}()},2691:function(t,e,n){"use strict";var r=n(4704).default,i=n(6690).default,s=n(9728).default;Object.defineProperty(e,"__esModule",{value:!0}),e.BoundingBox=void 0;var o=n(2668),a=function(){function t(){i(this,t),this.min=new o.Vector3,this.max=new o.Vector3,this.cnt=new o.Vector3,this.dim=new o.Vector3,this.clr()}return s(t,[{key:"getCenter",value:function(t){return t.setFrom(this.cnt)}},{key:"getCenterX",value:function(){return this.cnt.x}},{key:"getCenterY",value:function(){return this.cnt.y}},{key:"getCenterZ",value:function(){return this.cnt.z}},{key:"getCorner000",value:function(t){return t.set(this.min.x,this.min.y,this.min.z)}},{key:"getCorner001",value:function(t){return t.set(this.min.x,this.min.y,this.max.z)}},{key:"getCorner010",value:function(t){return t.set(this.min.x,this.max.y,this.min.z)}},{key:"getCorner011",value:function(t){return t.set(this.min.x,this.max.y,this.max.z)}},{key:"getCorner100",value:function(t){return t.set(this.max.x,this.min.y,this.min.z)}},{key:"getCorner101",value:function(t){return t.set(this.max.x,this.min.y,this.max.z)}},{key:"getCorner110",value:function(t){return t.set(this.max.x,this.max.y,this.min.z)}},{key:"getCorner111",value:function(t){return t.set(this.max.x,this.max.y,this.max.z)}},{key:"getDimensions",value:function(t){return t.setFrom(this.dim)}},{key:"getWidth",value:function(){return this.dim.x}},{key:"getHeight",value:function(){return this.dim.y}},{key:"getDepth",value:function(){return this.dim.z}},{key:"getMin",value:function(t){return t.setFrom(this.min)}},{key:"getMax",value:function(t){return t.setFrom(this.max)}},{key:"setFromBounds",value:function(t){return this.set(t.min,t.max)}},{key:"set",value:function(t,e){return this.min.set(t.x<e.x?t.x:e.x,t.y<e.y?t.y:e.y,t.z<e.z?t.z:e.z),this.max.set(t.x>e.x?t.x:e.x,t.y>e.y?t.y:e.y,t.z>e.z?t.z:e.z),this.update(),this}},{key:"update",value:function(){this.cnt.setFrom(this.min).add(this.max).scale(.5),this.dim.setFrom(this.max).sub(this.min)}},{key:"setFromPoints",value:function(t){this.inf();var e,n=r(t);try{for(n.s();!(e=n.n()).done;){var i=e.value;this.extPoint(i)}}catch(s){n.e(s)}finally{n.f()}return this}},{key:"inf",value:function(){return this.min.set(1/0,1/0,1/0),this.max.set(-1/0,-1/0,-1/0),this.cnt.set(0,0,0),this.dim.set(0,0,0),this}},{key:"extPoint",value:function(t){return this.set(this.min.set(Math.min(this.min.x,t.x),Math.min(this.min.y,t.y),Math.min(this.min.z,t.z)),this.max.set(Math.max(this.max.x,t.x),Math.max(this.max.y,t.y),Math.max(this.max.z,t.z)))}},{key:"clr",value:function(){return this.set(this.min.set(0,0,0),this.max.set(0,0,0))}},{key:"isValid",value:function(){return this.min.x<=this.max.x&&this.min.y<=this.max.y&&this.min.z<=this.max.z}},{key:"extBounds",value:function(t){return this.set(this.min.set(Math.min(this.min.x,t.min.x),Math.min(this.min.y,t.min.y),Math.min(this.min.z,t.min.z)),this.max.set(Math.max(this.max.x,t.max.x),Math.max(this.max.y,t.max.y),Math.max(this.max.z,t.max.z)))}},{key:"extSphere",value:function(t,e){return this.set(this.min.set(Math.min(this.min.x,t.x-e),Math.min(this.min.y,t.y-e),Math.min(this.min.z,t.z-e)),this.max.set(Math.max(this.max.x,t.x+e),Math.max(this.max.y,t.y+e),Math.max(this.max.z,t.z+e)))}},{key:"extTransformedBox",value:function(e,n){return this.extPoint(t.tmpVector.set(e.min.x,e.min.y,e.min.z).multiply(n)),this.extPoint(t.tmpVector.set(e.min.x,e.min.y,e.max.z).multiply(n)),this.extPoint(t.tmpVector.set(e.min.x,e.max.y,e.min.z).multiply(n)),this.extPoint(t.tmpVector.set(e.min.x,e.max.y,e.max.z).multiply(n)),this.extPoint(t.tmpVector.set(e.max.x,e.min.y,e.min.z).multiply(n)),this.extPoint(t.tmpVector.set(e.max.x,e.min.y,e.max.z).multiply(n)),this.extPoint(t.tmpVector.set(e.max.x,e.max.y,e.min.z).multiply(n)),this.extPoint(t.tmpVector.set(e.max.x,e.max.y,e.max.z).multiply(n)),this}},{key:"mul",value:function(e){var n=this.min.x,r=this.min.y,i=this.min.z,s=this.max.x,o=this.max.y,a=this.max.z;return this.inf(),this.extPoint(t.tmpVector.set(n,r,i).multiply(e)),this.extPoint(t.tmpVector.set(n,r,a).multiply(e)),this.extPoint(t.tmpVector.set(n,o,i).multiply(e)),this.extPoint(t.tmpVector.set(n,o,a).multiply(e)),this.extPoint(t.tmpVector.set(s,r,i).multiply(e)),this.extPoint(t.tmpVector.set(s,r,a).multiply(e)),this.extPoint(t.tmpVector.set(s,o,i).multiply(e)),this.extPoint(t.tmpVector.set(s,o,a).multiply(e)),this}},{key:"containsBounds",value:function(t){return!this.isValid()||this.min.x<=t.min.x&&this.min.y<=t.min.y&&this.min.z<=t.min.z&&this.max.x>=t.max.x&&this.max.y>=t.max.y&&this.max.z>=t.max.z}},{key:"intersects",value:function(t){if(!this.isValid())return!1;var e=Math.abs(this.cnt.x-t.cnt.x),n=this.dim.x/2+t.dim.x/2,r=Math.abs(this.cnt.y-t.cnt.y),i=this.dim.y/2+t.dim.y/2,s=Math.abs(this.cnt.z-t.cnt.z),o=this.dim.z/2+t.dim.z/2;return e<=n&&r<=i&&s<=o}},{key:"containsPoint",value:function(t){return this.min.x<=t.x&&this.max.x>=t.x&&this.min.y<=t.y&&this.max.y>=t.y&&this.min.z<=t.z&&this.max.z>=t.z}},{key:"ext",value:function(t,e,n){return this.set(this.min.set(Math.min(this.min.x,t),Math.min(this.min.y,e),Math.min(this.min.z,n)),this.max.set(Math.max(this.max.x,t),Math.max(this.max.y,e),Math.max(this.max.z,n)))}}]),t}();e.BoundingBox=a,a.tmpVector=new o.Vector3},814:function(t,e,n){"use strict";var r=n(6690).default,i=n(9728).default;Object.defineProperty(e,"__esModule",{value:!0}),e.OrthoCamera=void 0;var s=n(5474),o=n(2668),a=function(){function t(e,n,i,a){r(this,t),this.position=new o.Vector3(0,0,0),this.direction=new o.Vector3(0,0,-1),this.up=new o.Vector3(0,1,0),this.near=0,this.far=100,this.zoom=1,this.viewportWidth=0,this.viewportHeight=0,this.projectionView=new s.Matrix4,this.inverseProjectionView=new s.Matrix4,this.projection=new s.Matrix4,this.view=new s.Matrix4,this.tmp3=new o.Vector3,this.resize(e,n,i,a)}return i(t,[{key:"setYDown",value:function(t){t?(this.up.set(0,-1,0),this.direction.set(0,0,1)):(this.up.set(0,1,0),this.direction.set(0,0,-1)),this.update()}},{key:"resize",value:function(t,e,n,r){this.viewportWidth=t,this.viewportHeight=e,this.screenWidth=n,this.screenHeight=r,this.update()}},{key:"setPosition",value:function(t,e){this.position.set(t,e,this.position.z)}},{key:"update",value:function(){var t=this.projection,e=this.view,n=this.projectionView,r=this.inverseProjectionView,i=this.zoom,s=this.viewportWidth,o=this.viewportHeight;t.ortho(i*(-s/2),i*(s/2),i*(-o/2),i*(o/2),this.near,this.far),e.lookAt(this.position,this.direction,this.up),n.set(t.values),n.multiply(e),r.set(n.values).invert(),this.combined=n.values}},{key:"screenToWorld",value:function(t,e,n){e=e||this.screenWidth,n=n||this.screenHeight;var r=t.x,i=n-t.y-1;return t.x=2*r/e-1,t.y=2*i/n-1,t.z=2*t.z-1,t.project(this.inverseProjectionView),t}},{key:"worldToScreen",value:function(t,e,n){return e=e||this.screenWidth,n=n||this.screenHeight,t.project(this.projectionView),t.x=e*(t.x+1)/2,t.y=n*(t.y+1)/2,t.z=(t.z+1)/2,t}},{key:"unprojectVector2",value:function(t,e){this.tmp3.set(e.x,e.y,0),this.screenToWorld(this.tmp3),t.set(this.tmp3.x,this.tmp3.y)}},{key:"setViewport",value:function(t,e){this.viewportWidth=t,this.viewportHeight=e}}]),t}();e.OrthoCamera=a},2229:function(t,e,n){"use strict";var r=n(6690).default,i=n(9728).default;Object.defineProperty(e,"__esModule",{value:!0}),e.Game=void 0;var s=function(){function t(){r(this,t)}return i(t,[{key:"setScreen",value:function(t){this.currentScreen&&this.currentScreen.dispose&&this.currentScreen.dispose(),this.currentScreen=t,this.currentScreen&&this.currentScreen.init&&this.currentScreen.init(this)}},{key:"update",value:function(t){this.currentScreen&&this.currentScreen.update&&this.currentScreen.update(t,this)}}]),t}();e.Game=s,s.shared=new s},5508:function(t,e,n){"use strict";var r=n(6690).default,i=n(9728).default;Object.defineProperty(e,"__esModule",{value:!0}),e.Glyph=e.PAGES=e.PAGE_SIZE=e.LOG2_PAGE_SIZE=void 0,e.LOG2_PAGE_SIZE=9,e.PAGE_SIZE=1<<e.LOG2_PAGE_SIZE,e.PAGES=65536/e.PAGE_SIZE;var s=function(){function t(){r(this,t),this.page=0}return i(t,[{key:"getKerning",value:function(t){if(this.kerning){var n=this.kerning[t.charCodeAt(0)>>>e.LOG2_PAGE_SIZE];if(null!=n)return n[t.charCodeAt(0)&e.PAGE_SIZE-1]}return 0}},{key:"setKerning",value:function(t,n){this.kerning||(this.kerning=[]);var r=this.kerning[t>>>e.LOG2_PAGE_SIZE];r||(this.kerning[t>>>e.LOG2_PAGE_SIZE]=r=new Uint32Array(new ArrayBuffer(e.PAGE_SIZE))),r[t&e.PAGE_SIZE-1]=n}}]),t}();e.Glyph=s},417:function(t,e,n){"use strict";var r=n(861).default,i=n(6690).default,s=n(9728).default;Object.defineProperty(e,"__esModule",{value:!0}),e.GlyphLayout=void 0;var o=n(1013),a=n(8637),u=function(){function t(e,n,s,u,h,l,c,f,d){var p=this;i(this,t),this.epsilon=1e-4,this.glyphRunPool=a.Pools.get("GlyphRun",(function(){return new o.GlyphRun})),this.colorStack=new Array(4),this.runs=[],this.colors=[],this.setText=function(t,e,n,r,i,s,o,a,u){p.reset();var h=t.data;if(n!==r){a&&(s=Math.max(s,3*h.spaceXadvance));var l=a||null!=u,c=i.toIntBits(),f=c;p.colors.shift();var d=h.markupEnabled;d&&p.colorStack.push(c);for(var v=!1,y=0,g=h.down,M=null,m=null,x=n;;){var w=void 0,b=!1;if(n===r){if(x===r)break;w=r,v=!0}else{if("\n"!==e.charAt(n++))continue;w=n-1,b=!0}t:{var k=p.glyphRunPool.obtain();if(k.x=0,k.y=y,h.getGlyphs(k,e,x,w,m),p.glyphCount+=k.glyphs.length,f!==c&&(p.colors[p.colors.length-2]===p.glyphCount?p.colors[p.colors.length-1]=f:(p.colors.push(p.glyphCount),p.colors.push(f)),c=f),0===k.glyphs.length){if(p.glyphRunPool.free(k),!M)break}else M?(M.appendRun(k),p.glyphRunPool.free(k)):(M=k,p.runs.push(M));if(b||v?(p.setLastGlyphXAdvance(h,M),m=null):m=M.glyphs[M.glyphs.length-1],l&&0!==M.glyphs.length&&(b||v))for(var _=M.xAdvances[0]+M.xAdvances[1],E=2;E<M.xAdvances.length;E++){var T=M.glyphs[E-1];if(_+p.getGlyphWidth(T,h)-p.epsilon<=s)_+=M.xAdvances[E];else{if(null!=u){p.truncate(h,M,s,u);break}var A=h.getWrapIndex(M.glyphs,E);if((0===A&&0===M.x||A>=M.glyphs.length)&&(A=E-1),!(M=p.wrap(h,M,A)))break t;p.runs.push(M),y+=g,M.x=0,M.y=y,_=M.xAdvances[0]+M.xAdvances[1],E=1}}}b&&(M=null,m=null,y+=w===x?g*h.blankLineScale:g),x=n}p.height=h.capHeight+Math.abs(y),p.calculateWidths(h),p.alignRuns(s,o),d&&(p.colorStack.length=0)}else p.height=h.capHeight},this.calculateWidths=function(t){for(var e,n=0,i=r(p.runs),s=0,o=p.runs.length;s<o;s++){for(var a=i[s],u=a.xAdvances,h=a.x+u[0],l=0,c=a.glyphs,f=0;f<a.glyphs.length;){var d=c[f],v=p.getGlyphWidth(d,t);l=Math.max(l,h+v),h+=null!==(e=u[++f])&&void 0!==e?e:0}a.width=Math.max(h,l)-a.x,n=Math.max(n,a.x+(isNaN(a.width)?h:a.width))}p.width=n},this.alignRuns=function(t,e){if(0===(e&a.Align.left))for(var n=0!==(e&a.Align.center),i=r(p.runs),s=0,o=p.runs.length;s<o;s++){var u=i[s];u.x+=n?.5*(t-u.width):t-u.width}},this.truncate=function(t,e,n,r){var i=e.glyphs.length,s=p.glyphRunPool.obtain();t.getGlyphs(s,r,0,r.length,null);var o=0;if(s.xAdvances.length>0){p.setLastGlyphXAdvance(t,s);for(var u=s.xAdvances,h=1;h<s.xAdvances.length;h++)o+=u[h]}n-=o;for(var l=0,c=e.x,f=e.xAdvances;l<e.xAdvances.length;){if((c+=f[l])>n)break;l++}if(l>1){if(l-1>=0&&e.glyphs.length>l-1)for(var d=l-1;d<e.glyphs.length;d++)e.glyphs.splice(d,1);if(l>=0&&e.xAdvances.length>l)for(var v=l;v<e.xAdvances.length;v++)e.xAdvances.splice(v,1);p.setLastGlyphXAdvance(t,e),s.xAdvances.length>0&&a.Utils.arrayCopy(s.xAdvances,1,e.xAdvances,e.xAdvances.length,s.xAdvances.length-1)}else e.glyphs.length=0,e.xAdvances.length=0,a.Utils.arrayCopy(s.xAdvances,0,e.xAdvances,e.xAdvances.length,s.xAdvances.length);var y=i-e.glyphs.length;if(y>0&&(p.glyphCount-=y,t.markupEnabled))for(;p.colors.length>2&&p.colors[p.colors.length-2]>=p.glyphCount;)p.colors.length-=2;a.Utils.arrayCopy(s.glyphs,0,e.glyphs,e.glyphs.length,s.glyphs.length),p.glyphCount+=r.length,p.glyphRunPool.free(s)},this.setLastGlyphXAdvance=function(t,e){var n=e.glyphs[e.glyphs.length-1];n.fixedWidth||(e.xAdvances[e.xAdvances.length-1]=p.getGlyphWidth(n,t))},this.getGlyphWidth=function(t,e){return(t.width+t.xoffset)*e.scaleX-e.padRight},this.getLineOffset=function(t,e){return-t[0].xoffset*e.scaleX-e.padLeft},this.reset=function(){p.glyphRunPool.freeAll(p.runs),p.runs.length=0,p.colors.length=0,p.glyphCount=0,p.width=0,p.height=0},this.setText(e,n,s,u,h,l,c,f,d)}return s(t,[{key:"wrap",value:function(t,e,n){for(var r=e.glyphs.length,i=e.glyphs,s=e.xAdvances,o=n;o>0&&t.isWhitespace(i[o-1].id);o--);for(var u,h=n;h<r&&t.isWhitespace(i[h].id);h++);if(h<r){var l=(u=this.glyphRunPool.obtain()).glyphs;a.Utils.arrayCopy(i,0,l,l.length,o),i.splice(0,h-1+1),e.glyphs=l,u.glyphs=i;var c=u.xAdvances;a.Utils.arrayCopy(s,0,c,c.length,o+1),s.splice(1,h),s[0]=this.getLineOffset(i,t),e.xAdvances=c,u.xAdvances=s;var f=e.glyphs.length,d=u.glyphs.length,p=r-f-d;if(this.glyphCount-=p,t.markupEnabled&&p>0)for(var v=this.glyphCount-d,y=this.colors.length-2;y>=2;y-=2){var g=this.colors[y];if(g<=v)break;this.colors[y]=g-p}}else{i=i.slice(0,o),s=s.slice(0,o+1);var M=h-o;if(M>0&&(this.glyphCount-=M,t.markupEnabled&&this.colors[this.colors.length-2]>this.glyphCount)){for(var m=this.colors[this.colors.length-1];this.colors[this.colors.length-2]>this.glyphCount;)this.colors.length-=2;this.colors[this.colors.length-2]=this.glyphCount,this.colors[this.colors.length-1]=m}}return 0===o?(this.glyphRunPool.free(e),this.runs.pop()):this.setLastGlyphXAdvance(t,e),u}}]),t}();e.GlyphLayout=u},1013:function(t,e,n){"use strict";var r=n(9728).default,i=n(6690).default;Object.defineProperty(e,"__esModule",{value:!0}),e.GlyphRun=void 0;var s=r((function t(){var e=this;i(this,t),this.glyphs=[],this.xAdvances=[],this.appendRun=function(t){e.glyphs.concat(t.glyphs),e.xAdvances.length||e.xAdvances.length--,e.xAdvances.concat(t.xAdvances)},this.reset=function(){e.glyphs.length=0,e.xAdvances.length=0}}));e.GlyphRun=s},3233:function(t,e,n){"use strict";var r=n(6690).default,i=n(9728).default;Object.defineProperty(e,"__esModule",{value:!0}),e.InputHandler=e.InputEvent=void 0;var s=n(7465),o=n(3192);!function(t){t.TouchStart="touchStart",t.TouchEnd="touchEnd",t.TouchMove="touchMove"}(e.InputEvent||(e.InputEvent={}));var a=function(){function t(e){var n=this;r(this,t),this.screenCoord=new o.Vector2,this.worldCoord=new o.Vector2,this.canvas=e,this.lastX=0,this.lastY=0,this.touched=!1;var i=this.emitter=new s.EventEmitter;this.mouseDownHandler=function(t){n.touched=!0,n.handleMove(t),i.emit("touchStart",n.getX(),n.getY())},this.mouseUpHandler=function(t){n.touched=!1,i.emit("touchEnd",n.getX(),n.getY())},this.mouseMoveHandler=function(t){n.handleMove(t),i.emit("touchMove",n.getX(),n.getY())},this.touchStartHandler=function(t){t.preventDefault();var e=t.touches[0];n.canvas.dispatchEvent(new MouseEvent("mousedown",{clientX:e.clientX,clientY:e.clientY}))},this.touchEndHandler=function(t){t.preventDefault(),n.canvas.dispatchEvent(new MouseEvent("mouseup"))},this.touchMoveHandler=function(t){t.preventDefault();var e=t.touches[0];n.canvas.dispatchEvent(new MouseEvent("mousemove",{clientX:e.clientX,clientY:e.clientY}))},this.canvas.addEventListener("mousedown",this.mouseDownHandler,!1),this.canvas.addEventListener("mouseup",this.mouseUpHandler,!1),this.canvas.addEventListener("mousemove",this.mouseMoveHandler,!1),this.canvas.addEventListener("touchstart",this.touchStartHandler,!1),this.canvas.addEventListener("touchend",this.touchEndHandler,!1),this.canvas.addEventListener("touchmove",this.touchMoveHandler,!1)}return i(t,[{key:"cleanup",value:function(){this.canvas.removeEventListener("mousedown",this.mouseDownHandler),this.canvas.removeEventListener("mouseup",this.mouseUpHandler),this.canvas.removeEventListener("mousemove",this.mouseMoveHandler),this.canvas.removeEventListener("touchstart",this.touchStartHandler),this.canvas.removeEventListener("touchend",this.touchEndHandler),this.canvas.removeEventListener("touchmove",this.touchMoveHandler)}},{key:"addEventListener",value:function(t,e){this.emitter.addListener(t,e)}},{key:"handleMove",value:function(t){var e=this.canvas.getBoundingClientRect(),n=t.clientX-e.left,r=t.clientY-e.top;this.lastX=n,this.lastY=r}},{key:"getX",value:function(){return this.lastX}},{key:"getY",value:function(){return this.lastY}},{key:"isTouched",value:function(){return this.touched}},{key:"getTouchedWorldCoord",value:function(t){return this.screenCoord.set(this.getX(),this.getY()),t.unprojectVector2(this.worldCoord,this.screenCoord),this.worldCoord}}]),t}();e.InputHandler=a},5474:function(t,e,n){"use strict";var r=n(6690).default,i=n(9728).default;Object.defineProperty(e,"__esModule",{value:!0}),e.Matrix4=e.M33=e.M32=e.M31=e.M30=e.M23=e.M22=e.M21=e.M20=e.M13=e.M12=e.M11=e.M10=e.M03=e.M02=e.M01=e.M00=void 0;var s=n(2668);e.M00=0,e.M01=4,e.M02=8,e.M03=12,e.M10=1,e.M11=5,e.M12=9,e.M13=13,e.M20=2,e.M21=6,e.M22=10,e.M23=14,e.M30=3,e.M31=7,e.M32=11,e.M33=15;var o=function(){function t(){r(this,t),this.temp=new Float32Array(16),this.values=new Float32Array(16);var n=this.values;n[e.M00]=1,n[e.M11]=1,n[e.M22]=1,n[e.M33]=1}return i(t,[{key:"set",value:function(t){return this.values.set(t),this}},{key:"transpose",value:function(){var t=this.temp,n=this.values;return t[e.M00]=n[e.M00],t[e.M01]=n[e.M10],t[e.M02]=n[e.M20],t[e.M03]=n[e.M30],t[e.M10]=n[e.M01],t[e.M11]=n[e.M11],t[e.M12]=n[e.M21],t[e.M13]=n[e.M31],t[e.M20]=n[e.M02],t[e.M21]=n[e.M12],t[e.M22]=n[e.M22],t[e.M23]=n[e.M32],t[e.M30]=n[e.M03],t[e.M31]=n[e.M13],t[e.M32]=n[e.M23],t[e.M33]=n[e.M33],this.set(t)}},{key:"identity",value:function(){var t=this.values;return t[e.M00]=1,t[e.M01]=0,t[e.M02]=0,t[e.M03]=0,t[e.M10]=0,t[e.M11]=1,t[e.M12]=0,t[e.M13]=0,t[e.M20]=0,t[e.M21]=0,t[e.M22]=1,t[e.M23]=0,t[e.M30]=0,t[e.M31]=0,t[e.M32]=0,t[e.M33]=1,this}},{key:"invert",value:function(){var t=this.values,n=this.temp,r=t[e.M30]*t[e.M21]*t[e.M12]*t[e.M03]-t[e.M20]*t[e.M31]*t[e.M12]*t[e.M03]-t[e.M30]*t[e.M11]*t[e.M22]*t[e.M03]+t[e.M10]*t[e.M31]*t[e.M22]*t[e.M03]+t[e.M20]*t[e.M11]*t[e.M32]*t[e.M03]-t[e.M10]*t[e.M21]*t[e.M32]*t[e.M03]-t[e.M30]*t[e.M21]*t[e.M02]*t[e.M13]+t[e.M20]*t[e.M31]*t[e.M02]*t[e.M13]+t[e.M30]*t[e.M01]*t[e.M22]*t[e.M13]-t[e.M00]*t[e.M31]*t[e.M22]*t[e.M13]-t[e.M20]*t[e.M01]*t[e.M32]*t[e.M13]+t[e.M00]*t[e.M21]*t[e.M32]*t[e.M13]+t[e.M30]*t[e.M11]*t[e.M02]*t[e.M23]-t[e.M10]*t[e.M31]*t[e.M02]*t[e.M23]-t[e.M30]*t[e.M01]*t[e.M12]*t[e.M23]+t[e.M00]*t[e.M31]*t[e.M12]*t[e.M23]+t[e.M10]*t[e.M01]*t[e.M32]*t[e.M23]-t[e.M00]*t[e.M11]*t[e.M32]*t[e.M23]-t[e.M20]*t[e.M11]*t[e.M02]*t[e.M33]+t[e.M10]*t[e.M21]*t[e.M02]*t[e.M33]+t[e.M20]*t[e.M01]*t[e.M12]*t[e.M33]-t[e.M00]*t[e.M21]*t[e.M12]*t[e.M33]-t[e.M10]*t[e.M01]*t[e.M22]*t[e.M33]+t[e.M00]*t[e.M11]*t[e.M22]*t[e.M33];if(0===r)throw new Error("non-invertible matrix");var i=1/r;return n[e.M00]=t[e.M12]*t[e.M23]*t[e.M31]-t[e.M13]*t[e.M22]*t[e.M31]+t[e.M13]*t[e.M21]*t[e.M32]-t[e.M11]*t[e.M23]*t[e.M32]-t[e.M12]*t[e.M21]*t[e.M33]+t[e.M11]*t[e.M22]*t[e.M33],n[e.M01]=t[e.M03]*t[e.M22]*t[e.M31]-t[e.M02]*t[e.M23]*t[e.M31]-t[e.M03]*t[e.M21]*t[e.M32]+t[e.M01]*t[e.M23]*t[e.M32]+t[e.M02]*t[e.M21]*t[e.M33]-t[e.M01]*t[e.M22]*t[e.M33],n[e.M02]=t[e.M02]*t[e.M13]*t[e.M31]-t[e.M03]*t[e.M12]*t[e.M31]+t[e.M03]*t[e.M11]*t[e.M32]-t[e.M01]*t[e.M13]*t[e.M32]-t[e.M02]*t[e.M11]*t[e.M33]+t[e.M01]*t[e.M12]*t[e.M33],n[e.M03]=t[e.M03]*t[e.M12]*t[e.M21]-t[e.M02]*t[e.M13]*t[e.M21]-t[e.M03]*t[e.M11]*t[e.M22]+t[e.M01]*t[e.M13]*t[e.M22]+t[e.M02]*t[e.M11]*t[e.M23]-t[e.M01]*t[e.M12]*t[e.M23],n[e.M10]=t[e.M13]*t[e.M22]*t[e.M30]-t[e.M12]*t[e.M23]*t[e.M30]-t[e.M13]*t[e.M20]*t[e.M32]+t[e.M10]*t[e.M23]*t[e.M32]+t[e.M12]*t[e.M20]*t[e.M33]-t[e.M10]*t[e.M22]*t[e.M33],n[e.M11]=t[e.M02]*t[e.M23]*t[e.M30]-t[e.M03]*t[e.M22]*t[e.M30]+t[e.M03]*t[e.M20]*t[e.M32]-t[e.M00]*t[e.M23]*t[e.M32]-t[e.M02]*t[e.M20]*t[e.M33]+t[e.M00]*t[e.M22]*t[e.M33],n[e.M12]=t[e.M03]*t[e.M12]*t[e.M30]-t[e.M02]*t[e.M13]*t[e.M30]-t[e.M03]*t[e.M10]*t[e.M32]+t[e.M00]*t[e.M13]*t[e.M32]+t[e.M02]*t[e.M10]*t[e.M33]-t[e.M00]*t[e.M12]*t[e.M33],n[e.M13]=t[e.M02]*t[e.M13]*t[e.M20]-t[e.M03]*t[e.M12]*t[e.M20]+t[e.M03]*t[e.M10]*t[e.M22]-t[e.M00]*t[e.M13]*t[e.M22]-t[e.M02]*t[e.M10]*t[e.M23]+t[e.M00]*t[e.M12]*t[e.M23],n[e.M20]=t[e.M11]*t[e.M23]*t[e.M30]-t[e.M13]*t[e.M21]*t[e.M30]+t[e.M13]*t[e.M20]*t[e.M31]-t[e.M10]*t[e.M23]*t[e.M31]-t[e.M11]*t[e.M20]*t[e.M33]+t[e.M10]*t[e.M21]*t[e.M33],n[e.M21]=t[e.M03]*t[e.M21]*t[e.M30]-t[e.M01]*t[e.M23]*t[e.M30]-t[e.M03]*t[e.M20]*t[e.M31]+t[e.M00]*t[e.M23]*t[e.M31]+t[e.M01]*t[e.M20]*t[e.M33]-t[e.M00]*t[e.M21]*t[e.M33],n[e.M22]=t[e.M01]*t[e.M13]*t[e.M30]-t[e.M03]*t[e.M11]*t[e.M30]+t[e.M03]*t[e.M10]*t[e.M31]-t[e.M00]*t[e.M13]*t[e.M31]-t[e.M01]*t[e.M10]*t[e.M33]+t[e.M00]*t[e.M11]*t[e.M33],n[e.M23]=t[e.M03]*t[e.M11]*t[e.M20]-t[e.M01]*t[e.M13]*t[e.M20]-t[e.M03]*t[e.M10]*t[e.M21]+t[e.M00]*t[e.M13]*t[e.M21]+t[e.M01]*t[e.M10]*t[e.M23]-t[e.M00]*t[e.M11]*t[e.M23],n[e.M30]=t[e.M12]*t[e.M21]*t[e.M30]-t[e.M11]*t[e.M22]*t[e.M30]-t[e.M12]*t[e.M20]*t[e.M31]+t[e.M10]*t[e.M22]*t[e.M31]+t[e.M11]*t[e.M20]*t[e.M32]-t[e.M10]*t[e.M21]*t[e.M32],n[e.M31]=t[e.M01]*t[e.M22]*t[e.M30]-t[e.M02]*t[e.M21]*t[e.M30]+t[e.M02]*t[e.M20]*t[e.M31]-t[e.M00]*t[e.M22]*t[e.M31]-t[e.M01]*t[e.M20]*t[e.M32]+t[e.M00]*t[e.M21]*t[e.M32],n[e.M32]=t[e.M02]*t[e.M11]*t[e.M30]-t[e.M01]*t[e.M12]*t[e.M30]-t[e.M02]*t[e.M10]*t[e.M31]+t[e.M00]*t[e.M12]*t[e.M31]+t[e.M01]*t[e.M10]*t[e.M32]-t[e.M00]*t[e.M11]*t[e.M32],n[e.M33]=t[e.M01]*t[e.M12]*t[e.M20]-t[e.M02]*t[e.M11]*t[e.M20]+t[e.M02]*t[e.M10]*t[e.M21]-t[e.M00]*t[e.M12]*t[e.M21]-t[e.M01]*t[e.M10]*t[e.M22]+t[e.M00]*t[e.M11]*t[e.M22],t[e.M00]=n[e.M00]*i,t[e.M01]=n[e.M01]*i,t[e.M02]=n[e.M02]*i,t[e.M03]=n[e.M03]*i,t[e.M10]=n[e.M10]*i,t[e.M11]=n[e.M11]*i,t[e.M12]=n[e.M12]*i,t[e.M13]=n[e.M13]*i,t[e.M20]=n[e.M20]*i,t[e.M21]=n[e.M21]*i,t[e.M22]=n[e.M22]*i,t[e.M23]=n[e.M23]*i,t[e.M30]=n[e.M30]*i,t[e.M31]=n[e.M31]*i,t[e.M32]=n[e.M32]*i,t[e.M33]=n[e.M33]*i,this}},{key:"determinant",value:function(){var t=this.values;return t[e.M30]*t[e.M21]*t[e.M12]*t[e.M03]-t[e.M20]*t[e.M31]*t[e.M12]*t[e.M03]-t[e.M30]*t[e.M11]*t[e.M22]*t[e.M03]+t[e.M10]*t[e.M31]*t[e.M22]*t[e.M03]+t[e.M20]*t[e.M11]*t[e.M32]*t[e.M03]-t[e.M10]*t[e.M21]*t[e.M32]*t[e.M03]-t[e.M30]*t[e.M21]*t[e.M02]*t[e.M13]+t[e.M20]*t[e.M31]*t[e.M02]*t[e.M13]+t[e.M30]*t[e.M01]*t[e.M22]*t[e.M13]-t[e.M00]*t[e.M31]*t[e.M22]*t[e.M13]-t[e.M20]*t[e.M01]*t[e.M32]*t[e.M13]+t[e.M00]*t[e.M21]*t[e.M32]*t[e.M13]+t[e.M30]*t[e.M11]*t[e.M02]*t[e.M23]-t[e.M10]*t[e.M31]*t[e.M02]*t[e.M23]-t[e.M30]*t[e.M01]*t[e.M12]*t[e.M23]+t[e.M00]*t[e.M31]*t[e.M12]*t[e.M23]+t[e.M10]*t[e.M01]*t[e.M32]*t[e.M23]-t[e.M00]*t[e.M11]*t[e.M32]*t[e.M23]-t[e.M20]*t[e.M11]*t[e.M02]*t[e.M33]+t[e.M10]*t[e.M21]*t[e.M02]*t[e.M33]+t[e.M20]*t[e.M01]*t[e.M12]*t[e.M33]-t[e.M00]*t[e.M21]*t[e.M12]*t[e.M33]-t[e.M10]*t[e.M01]*t[e.M22]*t[e.M33]+t[e.M00]*t[e.M11]*t[e.M22]*t[e.M33]}},{key:"translate",value:function(t,n,r){var i=this.values;return i[e.M03]+=t,i[e.M13]+=n,i[e.M23]+=r,this}},{key:"copy",value:function(){return(new t).set(this.values)}},{key:"projection",value:function(t,n,r,i){this.identity();var s=1/Math.tan(r*(Math.PI/180)/2),o=(n+t)/(t-n),a=2*n*t/(t-n),u=this.values;return u[e.M00]=s/i,u[e.M10]=0,u[e.M20]=0,u[e.M30]=0,u[e.M01]=0,u[e.M11]=s,u[e.M21]=0,u[e.M31]=0,u[e.M02]=0,u[e.M12]=0,u[e.M22]=o,u[e.M32]=-1,u[e.M03]=0,u[e.M13]=0,u[e.M23]=a,u[e.M33]=0,this}},{key:"ortho2d",value:function(t,e,n,r){return this.ortho(t,t+n,e,e+r,0,1)}},{key:"ortho",value:function(t,n,r,i,s,o){this.identity();var a=2/(n-t),u=2/(i-r),h=-2/(o-s),l=-(n+t)/(n-t),c=-(i+r)/(i-r),f=-(o+s)/(o-s),d=this.values;return d[e.M00]=a,d[e.M10]=0,d[e.M20]=0,d[e.M30]=0,d[e.M01]=0,d[e.M11]=u,d[e.M21]=0,d[e.M31]=0,d[e.M02]=0,d[e.M12]=0,d[e.M22]=h,d[e.M32]=0,d[e.M03]=l,d[e.M13]=c,d[e.M23]=f,d[e.M33]=1,this}},{key:"multiply",value:function(t){var n=this.temp,r=this.values,i=t.values;return n[e.M00]=r[e.M00]*i[e.M00]+r[e.M01]*i[e.M10]+r[e.M02]*i[e.M20]+r[e.M03]*i[e.M30],n[e.M01]=r[e.M00]*i[e.M01]+r[e.M01]*i[e.M11]+r[e.M02]*i[e.M21]+r[e.M03]*i[e.M31],n[e.M02]=r[e.M00]*i[e.M02]+r[e.M01]*i[e.M12]+r[e.M02]*i[e.M22]+r[e.M03]*i[e.M32],n[e.M03]=r[e.M00]*i[e.M03]+r[e.M01]*i[e.M13]+r[e.M02]*i[e.M23]+r[e.M03]*i[e.M33],n[e.M10]=r[e.M10]*i[e.M00]+r[e.M11]*i[e.M10]+r[e.M12]*i[e.M20]+r[e.M13]*i[e.M30],n[e.M11]=r[e.M10]*i[e.M01]+r[e.M11]*i[e.M11]+r[e.M12]*i[e.M21]+r[e.M13]*i[e.M31],n[e.M12]=r[e.M10]*i[e.M02]+r[e.M11]*i[e.M12]+r[e.M12]*i[e.M22]+r[e.M13]*i[e.M32],n[e.M13]=r[e.M10]*i[e.M03]+r[e.M11]*i[e.M13]+r[e.M12]*i[e.M23]+r[e.M13]*i[e.M33],n[e.M20]=r[e.M20]*i[e.M00]+r[e.M21]*i[e.M10]+r[e.M22]*i[e.M20]+r[e.M23]*i[e.M30],n[e.M21]=r[e.M20]*i[e.M01]+r[e.M21]*i[e.M11]+r[e.M22]*i[e.M21]+r[e.M23]*i[e.M31],n[e.M22]=r[e.M20]*i[e.M02]+r[e.M21]*i[e.M12]+r[e.M22]*i[e.M22]+r[e.M23]*i[e.M32],n[e.M23]=r[e.M20]*i[e.M03]+r[e.M21]*i[e.M13]+r[e.M22]*i[e.M23]+r[e.M23]*i[e.M33],n[e.M30]=r[e.M30]*i[e.M00]+r[e.M31]*i[e.M10]+r[e.M32]*i[e.M20]+r[e.M33]*i[e.M30],n[e.M31]=r[e.M30]*i[e.M01]+r[e.M31]*i[e.M11]+r[e.M32]*i[e.M21]+r[e.M33]*i[e.M31],n[e.M32]=r[e.M30]*i[e.M02]+r[e.M31]*i[e.M12]+r[e.M32]*i[e.M22]+r[e.M33]*i[e.M32],n[e.M33]=r[e.M30]*i[e.M03]+r[e.M31]*i[e.M13]+r[e.M32]*i[e.M23]+r[e.M33]*i[e.M33],this.set(this.temp)}},{key:"multiplyLeft",value:function(t){var n=this.temp,r=this.values,i=t.values;return n[e.M00]=i[e.M00]*r[e.M00]+i[e.M01]*r[e.M10]+i[e.M02]*r[e.M20]+i[e.M03]*r[e.M30],n[e.M01]=i[e.M00]*r[e.M01]+i[e.M01]*r[e.M11]+i[e.M02]*r[e.M21]+i[e.M03]*r[e.M31],n[e.M02]=i[e.M00]*r[e.M02]+i[e.M01]*r[e.M12]+i[e.M02]*r[e.M22]+i[e.M03]*r[e.M32],n[e.M03]=i[e.M00]*r[e.M03]+i[e.M01]*r[e.M13]+i[e.M02]*r[e.M23]+i[e.M03]*r[e.M33],n[e.M10]=i[e.M10]*r[e.M00]+i[e.M11]*r[e.M10]+i[e.M12]*r[e.M20]+i[e.M13]*r[e.M30],n[e.M11]=i[e.M10]*r[e.M01]+i[e.M11]*r[e.M11]+i[e.M12]*r[e.M21]+i[e.M13]*r[e.M31],n[e.M12]=i[e.M10]*r[e.M02]+i[e.M11]*r[e.M12]+i[e.M12]*r[e.M22]+i[e.M13]*r[e.M32],n[e.M13]=i[e.M10]*r[e.M03]+i[e.M11]*r[e.M13]+i[e.M12]*r[e.M23]+i[e.M13]*r[e.M33],n[e.M20]=i[e.M20]*r[e.M00]+i[e.M21]*r[e.M10]+i[e.M22]*r[e.M20]+i[e.M23]*r[e.M30],n[e.M21]=i[e.M20]*r[e.M01]+i[e.M21]*r[e.M11]+i[e.M22]*r[e.M21]+i[e.M23]*r[e.M31],n[e.M22]=i[e.M20]*r[e.M02]+i[e.M21]*r[e.M12]+i[e.M22]*r[e.M22]+i[e.M23]*r[e.M32],n[e.M23]=i[e.M20]*r[e.M03]+i[e.M21]*r[e.M13]+i[e.M22]*r[e.M23]+i[e.M23]*r[e.M33],n[e.M30]=i[e.M30]*r[e.M00]+i[e.M31]*r[e.M10]+i[e.M32]*r[e.M20]+i[e.M33]*r[e.M30],n[e.M31]=i[e.M30]*r[e.M01]+i[e.M31]*r[e.M11]+i[e.M32]*r[e.M21]+i[e.M33]*r[e.M31],n[e.M32]=i[e.M30]*r[e.M02]+i[e.M31]*r[e.M12]+i[e.M32]*r[e.M22]+i[e.M33]*r[e.M32],n[e.M33]=i[e.M30]*r[e.M03]+i[e.M31]*r[e.M13]+i[e.M32]*r[e.M23]+i[e.M33]*r[e.M33],this.set(this.temp)}},{key:"lookAt",value:function(n,r,i){t.initTemps();var s=t.xAxis,o=t.yAxis,a=t.zAxis;a.setFrom(r).normalize(),s.setFrom(r).normalize(),s.cross(i).normalize(),o.setFrom(s).cross(a).normalize(),this.identity();var u=this.values;return u[e.M00]=s.x,u[e.M01]=s.y,u[e.M02]=s.z,u[e.M10]=o.x,u[e.M11]=o.y,u[e.M12]=o.z,u[e.M20]=-a.x,u[e.M21]=-a.y,u[e.M22]=-a.z,t.tmpMatrix.identity(),t.tmpMatrix.values[e.M03]=-n.x,t.tmpMatrix.values[e.M13]=-n.y,t.tmpMatrix.values[e.M23]=-n.z,this.multiply(t.tmpMatrix),this}}],[{key:"initTemps",value:function(){null===t.xAxis&&(t.xAxis=new s.Vector3),null===t.yAxis&&(t.yAxis=new s.Vector3),null===t.zAxis&&(t.zAxis=new s.Vector3)}}]),t}();e.Matrix4=o,o.xAxis=null,o.yAxis=null,o.zAxis=null,o.tmpMatrix=new o},4731:function(t,e,n){"use strict";var r=n(1655).default,i=n(6389).default,s=n(6690).default,o=n(9728).default;Object.defineProperty(e,"__esModule",{value:!0}),e.Color2Attribute=e.ColorAttribute=e.TexCoordAttribute=e.Position3Attribute=e.Position2Attribute=e.VertexAttribute=e.VertexAttributeType=e.Mesh=void 0;var a,u=n(6403),h=function(){function t(e,n,r,i){s(this,t),this.attributes=n,this.verticesLength=0,this.dirtyVertices=!1,this.indicesLength=0,this.dirtyIndices=!1,this.elementsPerVertex=0,this.context=e,this.elementsPerVertex=0;for(var o=0;o<n.length;o++)this.elementsPerVertex+=n[o].numElements;this.vertices=new Float32Array(r*this.elementsPerVertex),this.indices=new Uint16Array(i)}return o(t,[{key:"getAttributes",value:function(){return this.attributes}},{key:"maxVertices",value:function(){return this.vertices.length/this.elementsPerVertex}},{key:"numVertices",value:function(){return this.verticesLength/this.elementsPerVertex}},{key:"setVerticesLength",value:function(t){this.dirtyVertices=!0,this.verticesLength=t}},{key:"getVertices",value:function(){return this.vertices}},{key:"maxIndices",value:function(){return this.indices.length}},{key:"numIndices",value:function(){return this.indicesLength}},{key:"setIndicesLength",value:function(t){this.dirtyIndices=!0,this.indicesLength=t}},{key:"getIndices",value:function(){return this.indices}},{key:"getVertexSizeInFloats",value:function(){for(var t=0,e=0;e<this.attributes.length;e++){t+=this.attributes[e].numElements}return t}},{key:"setVertices",value:function(t){if(this.dirtyVertices=!0,t.length>this.vertices.length)throw Error("Mesh can't store more than "+this.maxVertices()+" vertices");this.vertices.set(t,0),this.verticesLength=t.length}},{key:"setIndices",value:function(t){if(this.dirtyIndices=!0,t.length>this.indices.length)throw Error("Mesh can't store more than "+this.maxIndices()+" indices");this.indices.set(t,0),this.indicesLength=t.length}},{key:"draw",value:function(t,e){this.drawWithOffset(t,e,0,this.indicesLength>0?this.indicesLength:this.verticesLength/this.elementsPerVertex)}},{key:"drawWithOffset",value:function(t,e,n,r){var i=this.context;(this.dirtyVertices||this.dirtyIndices)&&this.update(),this.bind(t),this.indicesLength>0?i.drawElements(e,r,i.UNSIGNED_SHORT,2*n):i.drawArrays(e,n,r),this.unbind(t)}},{key:"bind",value:function(t){var e=this.context;e.bindBuffer(e.ARRAY_BUFFER,this.verticesBuffer);for(var n=0,r=0;r<this.attributes.length;r++){var i=this.attributes[r],s=t.getAttributeLocation(i.name);e.enableVertexAttribArray(s),e.vertexAttribPointer(s,i.numElements,e.FLOAT,!1,4*this.elementsPerVertex,4*n),n+=i.numElements}this.indicesLength>0&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indicesBuffer)}},{key:"unbind",value:function(t){for(var e=this.context,n=0;n<this.attributes.length;n++){var r=this.attributes[n],i=t.getAttributeLocation(r.name);e.disableVertexAttribArray(i)}e.bindBuffer(e.ARRAY_BUFFER,null),this.indicesLength>0&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)}},{key:"update",value:function(){var t=this.context;this.dirtyVertices&&(this.verticesBuffer||(this.verticesBuffer=t.createBuffer()),t.bindBuffer(t.ARRAY_BUFFER,this.verticesBuffer),t.bufferData(t.ARRAY_BUFFER,this.vertices.subarray(0,this.verticesLength),t.DYNAMIC_DRAW),this.dirtyVertices=!1),this.dirtyIndices&&(this.indicesBuffer||(this.indicesBuffer=t.createBuffer()),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indicesBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indices.subarray(0,this.indicesLength),t.DYNAMIC_DRAW),this.dirtyIndices=!1)}},{key:"restore",value:function(){this.verticesBuffer=null,this.indicesBuffer=null,this.update()}},{key:"dispose",value:function(){var t=this.context;t.deleteBuffer(this.verticesBuffer),t.deleteBuffer(this.indicesBuffer)}}]),t}();e.Mesh=h,function(t){t[t.Float=0]="Float"}(a=e.VertexAttributeType||(e.VertexAttributeType={}));var l=o((function t(e,n,r){s(this,t),this.name=e,this.type=n,this.numElements=r}));e.VertexAttribute=l;var c=function(t){r(n,t);var e=i(n);function n(){return s(this,n),e.call(this,u.Shader.POSITION,a.Float,2)}return o(n)}(l);e.Position2Attribute=c;var f=function(t){r(n,t);var e=i(n);function n(){return s(this,n),e.call(this,u.Shader.POSITION,a.Float,3)}return o(n)}(l);e.Position3Attribute=f;var d=function(t){r(n,t);var e=i(n);function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return s(this,n),e.call(this,u.Shader.TEXCOORDS+(0===t?"":t),a.Float,2)}return o(n)}(l);e.TexCoordAttribute=d;var p=function(t){r(n,t);var e=i(n);function n(){return s(this,n),e.call(this,u.Shader.COLOR,a.Float,4)}return o(n)}(l);e.ColorAttribute=p;var v=function(t){r(n,t);var e=i(n);function n(){return s(this,n),e.call(this,u.Shader.COLOR2,a.Float,4)}return o(n)}(l);e.Color2Attribute=v},2226:function(t,e,n){"use strict";var r=n(6690).default,i=n(9728).default;Object.defineProperty(e,"__esModule",{value:!0}),e.NumberUtil=void 0;var s=new Int8Array(4),o=new Int32Array(s.buffer,0,1),a=new Float32Array(s.buffer,0,1),u=function(){function t(){r(this,t)}return i(t,null,[{key:"intBitsToFloat",value:function(t){return o[0]=t,a[0]}},{key:"floatToIntBits",value:function(t){return a[0]=t,o[0]}},{key:"intToFloatColor",value:function(e){return t.intBitsToFloat(4278190079&e)}},{key:"colorToFloat",value:function(e,n,r,i){var s=e<<24|n<<16|r<<8|i;return t.intToFloatColor(s)}},{key:"isPowerOfTwo",value:function(t){return 0===(t&t-1)}},{key:"nextPowerOfTwo",value:function(t){return t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,(t|=t>>16)+1}}]),t}();e.NumberUtil=u},2991:function(t,e,n){"use strict";var r=n(6690).default,i=n(9728).default;Object.defineProperty(e,"__esModule",{value:!0}),e.PolygonBatch=void 0;var s=n(8637),o=n(4731),a=n(6403),u=[0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0],h=new s.Color(1,1,1,1),l=function(){function t(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10920;if(r(this,t),this.isDrawing=!1,this.shader=null,this.lastTexture=null,this.verticesLength=0,this.indicesLength=0,this.projectionValues=new Float32Array(16),this.color=h,this.twoColorTint=!0,this.yDown=!1,i>10920)throw new Error("Can't have more than 10920 triangles per batch: "+i);this.context=e;var s=n?[new o.Position2Attribute,new o.ColorAttribute,new o.TexCoordAttribute,new o.Color2Attribute]:[new o.Position2Attribute,new o.ColorAttribute,new o.TexCoordAttribute];this.mesh=new o.Mesh(e,s,i,3*i),this.shader=a.Shader.newTwoColoredTextured(e);var u=this.context;this.srcColorBlend=u.SRC_ALPHA,this.srcAlphaBlend=u.ONE,this.dstBlend=u.ONE_MINUS_SRC_ALPHA,this.twoColorTint=n}return i(t,[{key:"setColor",value:function(t){this.color=t}},{key:"setShader",value:function(t){this.shader.dispose(),this.shader=t}},{key:"setProjection",value:function(t){this.projectionValues=t}},{key:"begin",value:function(){if(this.isDrawing)throw new Error("PolygonBatch is already drawing. Call PolygonBatch.end() before calling PolygonBatch.begin()");this.drawCalls=0;var t=this.shader;this.lastTexture=null,this.isDrawing=!0,t.bind(),t.setUniform4x4f(a.Shader.MVP_MATRIX,this.projectionValues),t.setUniformi("u_texture",0);var e=this.context;e.enable(e.BLEND),e.blendFuncSeparate(this.srcColorBlend,this.dstBlend,this.srcAlphaBlend,this.dstBlend)}},{key:"setBlendMode",value:function(t,e,n){this.srcColorBlend===t&&this.srcAlphaBlend===e&&this.dstBlend===n||(this.srcColorBlend=t,this.srcAlphaBlend=e,this.dstBlend=n,this.isDrawing&&(this.flush(),this.context.blendFuncSeparate(t,n,e,n)))}},{key:"drawVerticesWithOffset",value:function(e,n,r,i){for(var s=[],o=0;o<i;o++)s[o]=n[o+r];this.drawVertices(e,s,t.QUAD_TRIANGLES)}},{key:"drawVertices",value:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.QUAD_TRIANGLES;e!==this.lastTexture?(this.flush(),this.lastTexture=e):(this.verticesLength+n.length>this.mesh.getVertices().length||this.indicesLength+r.length>this.mesh.getIndices().length)&&this.flush();var i=this.mesh.numVertices();this.mesh.getVertices().set(n,this.verticesLength),this.verticesLength+=n.length,this.mesh.setVerticesLength(this.verticesLength);for(var s=this.mesh.getIndices(),o=this.indicesLength,a=0;a<r.length;o++,a++)s[o]=r[a]+i;this.indicesLength+=r.length,this.mesh.setIndicesLength(this.indicesLength)}},{key:"flush",value:function(){0!==this.verticesLength&&(this.lastTexture.bind(),this.mesh.draw(this.shader,this.context.TRIANGLES),this.verticesLength=0,this.indicesLength=0,this.mesh.setVerticesLength(0),this.mesh.setIndicesLength(0),this.drawCalls++)}},{key:"end",value:function(){if(!this.isDrawing)throw new Error("PolygonBatch is not drawing. Call PolygonBatch.begin() before calling PolygonBatch.end()");(this.verticesLength>0||this.indicesLength>0)&&this.flush(),this.shader.unbind(),this.lastTexture=null,this.isDrawing=!1,t.totalDrawCalls+=this.drawCalls;var e=this.context;e.disable(e.BLEND)}},{key:"getDrawCalls",value:function(){return this.drawCalls}},{key:"dispose",value:function(){this.mesh.dispose()}},{key:"setYDown",value:function(t){this.yDown=t}},{key:"draw",value:function(e,n,r,i,s){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,h=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:1,c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:1,f=arguments.length>10&&void 0!==arguments[10]?arguments[10]:0,d=arguments.length>11&&void 0!==arguments[11]?arguments[11]:1,p=arguments.length>12&&void 0!==arguments[12]?arguments[12]:1,v=arguments.length>13&&void 0!==arguments[13]?arguments[13]:0,y=arguments.length>14&&void 0!==arguments[14]&&arguments[14],g=this.color;if(this.yDown){var M=d;d=v,v=M}n=n||0,r=r||0;var m=-o,x=(i=0===i?i:i||e.width)-o,w=i-o,b=-o,k=-a,_=-a,E=(s=0===s?s:s||e.height)-a,T=s-a;if(1!==l&&(m*=l,x*=l,w*=l,b*=l),1!==c&&(k*=c,_*=c,E*=c,T*=c),0!==h){var A=Math.cos(h),P=Math.sin(h),L=A*m-P*k,C=P*m+A*k,R=A*x-P*_,I=P*x+A*_,S=A*w-P*E,O=P*w+A*E,j=A*b-P*T,D=P*b+A*T;m=L,x=R,w=S,b=j,k=C,_=I,E=O,T=D}m+=n+o,x+=n+o,w+=n+o,b+=n+o,k+=r+a,_+=r+a,E+=r+a,T+=r+a;var z=f,G=d,N=p,V=v,B=N,F=G,W=z,H=V;y&&(this.yDown?(z=f,G=v,N=p,V=d,B=f,F=d,W=p,H=v):(z=p,G=d,N=f,V=v,B=p,F=v,W=f,H=d));var U=0;u[U++]=m,u[U++]=k,u[U++]=g.r,u[U++]=g.g,u[U++]=g.b,u[U++]=g.a,u[U++]=z,u[U++]=G,this.twoColorTint&&(u[U++]=0,u[U++]=0,u[U++]=0,u[U++]=0),u[U++]=x,u[U++]=_,u[U++]=g.r,u[U++]=g.g,u[U++]=g.b,u[U++]=g.a,u[U++]=B,u[U++]=F,this.twoColorTint&&(u[U++]=0,u[U++]=0,u[U++]=0,u[U++]=0),u[U++]=w,u[U++]=E,u[U++]=g.r,u[U++]=g.g,u[U++]=g.b,u[U++]=g.a,u[U++]=N,u[U++]=V,this.twoColorTint&&(u[U++]=0,u[U++]=0,u[U++]=0,u[U++]=0),u[U++]=b,u[U++]=T,u[U++]=g.r,u[U++]=g.g,u[U++]=g.b,u[U++]=g.a,u[U++]=W,u[U++]=H,this.twoColorTint&&(u[U++]=0,u[U++]=0,u[U++]=0,u[U]=0),this.drawVertices(e,u,t.QUAD_TRIANGLES)}}],[{key:"resetTotalDrawCalls",value:function(){t.totalDrawCalls=0}}]),t}();e.PolygonBatch=l,l.QUAD_TRIANGLES=[0,1,2,2,3,0],l.totalDrawCalls=0},6403:function(t,e,n){"use strict";var r=n(6690).default,i=n(9728).default;Object.defineProperty(e,"__esModule",{value:!0}),e.Shader=void 0;var s=function(){function t(e,n,i){r(this,t),this.vertexShader=n,this.fragmentShader=i,this.vs=null,this.fs=null,this.program=null,this.tmp2x2=new Float32Array(4),this.tmp3x3=new Float32Array(9),this.tmp4x4=new Float32Array(16),this.vsSource=n,this.fsSource=i,this.context=e,this.compile()}return i(t,[{key:"getProgram",value:function(){return this.program}},{key:"getVertexShader",value:function(){return this.vertexShader}},{key:"getFragmentShader",value:function(){return this.fragmentShader}},{key:"getVertexShaderSource",value:function(){return this.vsSource}},{key:"getFragmentSource",value:function(){return this.fsSource}},{key:"compile",value:function(){var t=this.context;try{this.vs=this.compileShader(t.VERTEX_SHADER,this.vertexShader),this.fs=this.compileShader(t.FRAGMENT_SHADER,this.fragmentShader),this.program=this.compileProgram(this.vs,this.fs)}catch(e){throw this.dispose(),e}}},{key:"compileShader",value:function(t,e){var n=this.context,r=n.createShader(t);if(n.shaderSource(r,e),n.compileShader(r),!n.getShaderParameter(r,n.COMPILE_STATUS)){var i="Couldn't compile shader: "+n.getShaderInfoLog(r);if(n.deleteShader(r),!n.isContextLost())throw new Error(i)}return r}},{key:"compileProgram",value:function(t,e){var n=this.context,r=n.createProgram();if(n.attachShader(r,t),n.attachShader(r,e),n.linkProgram(r),!n.getProgramParameter(r,n.LINK_STATUS)){var i="Couldn't compile shader program: "+n.getProgramInfoLog(r);if(n.deleteProgram(r),!n.isContextLost())throw new Error(i)}return r}},{key:"restore",value:function(){this.compile()}},{key:"bind",value:function(){this.context.useProgram(this.program)}},{key:"unbind",value:function(){this.context.useProgram(null)}},{key:"setUniformi",value:function(t,e){this.context.uniform1i(this.getUniformLocation(t),e)}},{key:"setUniformf",value:function(t,e){this.context.uniform1f(this.getUniformLocation(t),e)}},{key:"setUniform2f",value:function(t,e,n){this.context.uniform2f(this.getUniformLocation(t),e,n)}},{key:"setUniform3f",value:function(t,e,n,r){this.context.uniform3f(this.getUniformLocation(t),e,n,r)}},{key:"setUniform4f",value:function(t,e,n,r,i){this.context.uniform4f(this.getUniformLocation(t),e,n,r,i)}},{key:"setUniform2x2f",value:function(t,e){var n=this.context;this.tmp2x2.set(e),n.uniformMatrix2fv(this.getUniformLocation(t),!1,this.tmp2x2)}},{key:"setUniform3x3f",value:function(t,e){var n=this.context;this.tmp3x3.set(e),n.uniformMatrix3fv(this.getUniformLocation(t),!1,this.tmp3x3)}},{key:"setUniform4x4f",value:function(t,e){var n=this.context;this.tmp4x4.set(e),n.uniformMatrix4fv(this.getUniformLocation(t),!1,this.tmp4x4)}},{key:"getUniformLocation",value:function(t){var e=this.context,n=e.getUniformLocation(this.program,t);if(!n&&!e.isContextLost())throw new Error("Couldn't find location for uniform ".concat(t));return n}},{key:"getAttributeLocation",value:function(t){var e=this.context,n=e.getAttribLocation(this.program,t);if(-1===n&&!e.isContextLost())throw new Error("Couldn't find location for attribute ".concat(t));return n}},{key:"dispose",value:function(){var t=this.context;this.vs&&(t.deleteShader(this.vs),this.vs=null),this.fs&&(t.deleteShader(this.fs),this.fs=null),this.program&&(t.deleteProgram(this.program),this.program=null)}}],[{key:"newColoredTextured",value:function(e){return new t(e,"\n         attribute vec4 ".concat(t.POSITION,";\n         attribute vec4 ").concat(t.COLOR,";\n         attribute vec2 ").concat(t.TEXCOORDS,";\n         uniform mat4 ").concat(t.MVP_MATRIX,";\n         varying vec4 v_color;\n         varying vec2 v_texCoords;\n \n         void main () {\n           v_color = ").concat(t.COLOR,";\n           v_texCoords = ").concat(t.TEXCOORDS,";\n           gl_Position = ").concat(t.MVP_MATRIX," * ").concat(t.POSITION,";\n         }\n       "),"\n         #ifdef GL_ES\n           #define LOWP lowp\n           precision mediump float;\n         #else\n           #define LOWP\n         #endif\n         varying LOWP vec4 v_color;\n         varying vec2 v_texCoords;\n         uniform sampler2D u_texture;\n \n         void main () {\n           gl_FragColor = v_color * texture2D(u_texture, v_texCoords);\n         }\n       ")}},{key:"newTwoColoredTextured",value:function(e){return new t(e,"\n         attribute vec4 ".concat(t.POSITION,";\n         attribute vec4 ").concat(t.COLOR,";\n         attribute vec4 ").concat(t.COLOR2,";\n         attribute vec2 ").concat(t.TEXCOORDS,";\n         uniform mat4 ").concat(t.MVP_MATRIX,";\n         varying vec4 v_light;\n         varying vec4 v_dark;\n         varying vec2 v_texCoords;\n \n         void main () {\n           v_light = ").concat(t.COLOR,";\n           v_dark = ").concat(t.COLOR2,";\n           v_texCoords = ").concat(t.TEXCOORDS,";\n           gl_Position = ").concat(t.MVP_MATRIX," * ").concat(t.POSITION,";\n         }\n       "),"\n         #ifdef GL_ES\n           #define LOWP lowp\n           precision mediump float;\n         #else\n           #define LOWP\n         #endif\n         varying LOWP vec4 v_light;\n         varying LOWP vec4 v_dark;\n         varying vec2 v_texCoords;\n         uniform sampler2D u_texture;\n \n         void main () {\n           vec4 texColor = texture2D(u_texture, v_texCoords);\n           gl_FragColor.a = texColor.a * v_light.a;\n           gl_FragColor.rgb = ((texColor.a - 1.0) * v_dark.a + 1.0 - texColor.rgb) * v_dark.rgb + texColor.rgb * v_light.rgb;\n         }\n       ")}},{key:"newColored",value:function(e){return new t(e,"\n         attribute vec4 ".concat(t.POSITION,";\n         attribute vec4 ").concat(t.COLOR,";\n         uniform mat4 ").concat(t.MVP_MATRIX,";\n         varying vec4 v_color;\n \n         void main () {\n           v_color = ").concat(t.COLOR,";\n           gl_Position = ").concat(t.MVP_MATRIX," * ").concat(t.POSITION,";\n         }\n       "),"\n         #ifdef GL_ES\n           #define LOWP lowp\n           precision mediump float;\n         #else\n           #define LOWP\n         #endif\n         varying LOWP vec4 v_color;\n \n         void main () {\n           gl_FragColor = v_color;\n         }\n       ")}}]),t}();e.Shader=s,s.MVP_MATRIX="u_projTrans",s.POSITION="a_position",s.COLOR="a_color",s.COLOR2="a_color2",s.TEXCOORDS="a_texCoords",s.SAMPLER="u_texture"},2438:function(t,e,n){"use strict";var r=n(6690).default,i=n(9728).default;Object.defineProperty(e,"__esModule",{value:!0}),e.ShapeRenderer=e.ShapeType=void 0;var s,o=n(4731),a=n(6403),u=n(8637),h=n(3192);!function(t){t[t.Point=0]="Point",t[t.Line=1]="Line",t[t.Filled=4]="Filled"}(s=e.ShapeType||(e.ShapeType={}));var l=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10920;if(r(this,t),this.isDrawing=!1,this.shapeType=s.Filled,this.color=new u.Color(1,1,1,1),this.vertexIndex=0,this.tmp=new h.Vector2,this.projectionValues=new Float32Array(16),n>10920)throw new Error("Can't have more than 10920 triangles per batch: "+n);this.context=e,this.mesh=new o.Mesh(e,[new o.Position2Attribute,new o.ColorAttribute],n,0);var i=this.context;this.srcColorBlend=i.SRC_ALPHA,this.srcAlphaBlend=i.ONE,this.dstBlend=i.ONE_MINUS_SRC_ALPHA,this.shader=a.Shader.newColored(i)}return i(t,[{key:"setProjection",value:function(t){this.projectionValues=t}},{key:"begin",value:function(){if(this.isDrawing)throw new Error("ShapeRenderer.begin() has already been called");this.vertexIndex=0,this.isDrawing=!0,this.shader.bind(),this.shader.setUniform4x4f(a.Shader.MVP_MATRIX,this.projectionValues);var t=this.context;t.enable(t.BLEND),t.blendFuncSeparate(this.srcColorBlend,this.dstBlend,this.srcAlphaBlend,this.dstBlend)}},{key:"setBlendMode",value:function(t,e,n){(this.srcColorBlend=t,this.srcAlphaBlend=e,this.dstBlend=n,this.isDrawing)&&(this.flush(),this.context.blendFuncSeparate(t,n,e,n))}},{key:"setColor",value:function(t){this.color.setFromColor(t)}},{key:"setColorWith",value:function(t,e,n,r){this.color.set(t,e,n,r)}},{key:"point",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.check(s.Point,1),null===n&&(n=this.color),this.vertex(t,e,n)}},{key:"line",value:function(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;this.check(s.Line,2),null===i&&(i=this.color),this.vertex(t,e,i),this.vertex(n,r,i)}},{key:"triangle",value:function(t,e,n,r,i,o,a){var u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,h=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null,l=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null;this.check(t?s.Filled:s.Line,3),null===u&&(u=this.color),null===h&&(h=this.color),null===l&&(l=this.color),t?(this.vertex(e,n,u),this.vertex(r,i,h),this.vertex(o,a,l)):(this.vertex(e,n,u),this.vertex(r,i,h),this.vertex(r,i,u),this.vertex(o,a,h),this.vertex(o,a,u),this.vertex(e,n,h))}},{key:"quad",value:function(t,e,n,r,i,o,a,u,h){var l=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,c=arguments.length>10&&void 0!==arguments[10]?arguments[10]:null,f=arguments.length>11&&void 0!==arguments[11]?arguments[11]:null,d=arguments.length>12&&void 0!==arguments[12]?arguments[12]:null;this.check(t?s.Filled:s.Line,3),null===l&&(l=this.color),null===c&&(c=this.color),null===f&&(f=this.color),null===d&&(d=this.color),t?(this.vertex(e,n,l),this.vertex(r,i,c),this.vertex(o,a,f),this.vertex(o,a,f),this.vertex(u,h,d),this.vertex(e,n,l)):(this.vertex(e,n,l),this.vertex(r,i,c),this.vertex(r,i,c),this.vertex(o,a,f),this.vertex(o,a,f),this.vertex(u,h,d),this.vertex(u,h,d),this.vertex(e,n,l))}},{key:"rect",value:function(t,e,n,r,i){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;this.quad(t,e,n,e+r,n,e+r,n+i,e,n+i,s,s,s,s)}},{key:"rectLine",value:function(t,e,n,r,i,o){var a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.check(t?s.Filled:s.Line,8),null===a&&(a=this.color);var u=this.tmp.set(i-n,e-r);u.nor(),o*=.5;var h=u.x*o,l=u.y*o;t?(this.vertex(e+h,n+l,a),this.vertex(e-h,n-l,a),this.vertex(r+h,i+l,a),this.vertex(r-h,i-l,a),this.vertex(r+h,i+l,a),this.vertex(e-h,n-l,a)):(this.vertex(e+h,n+l,a),this.vertex(e-h,n-l,a),this.vertex(r+h,i+l,a),this.vertex(r-h,i-l,a),this.vertex(r+h,i+l,a),this.vertex(e+h,n+l,a),this.vertex(r-h,i-l,a),this.vertex(e-h,n-l,a))}},{key:"x",value:function(t,e,n){this.line(t-n,e-n,t+n,e+n),this.line(t-n,e+n,t+n,e-n)}},{key:"polygon",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(n<3)throw new Error("Polygon must contain at least 3 vertices");this.check(s.Line,2*n),null===r&&(r=this.color),n<<=1;for(var i=t[e<<=1],o=t[e+1],a=e+n,u=e,h=e+n-2;u<h;u+=2){var l=t[u],c=t[u+1],f=0,d=0;u+2>=a?(f=i,d=o):(f=t[u+2],d=t[u+3]),this.vertex(l,c,r),this.vertex(f,d,r)}}},{key:"circle",value:function(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;if(0===o&&(o=Math.max(1,6*u.MathUtils.cbrt(r)|0)),o<=0)throw new Error("segments must be > 0.");null===i&&(i=this.color);var a=2*u.MathUtils.PI/o,h=Math.cos(a),l=Math.sin(a),c=r,f=0;if(t){this.check(s.Filled,3*o+3),o--;for(var d=0;d<o;d++){this.vertex(e,n,i),this.vertex(e+c,n+f,i);var p=c;c=h*c-l*f,f=l*p+h*f,this.vertex(e+c,n+f,i)}this.vertex(e,n,i),this.vertex(e+c,n+f,i)}else{this.check(s.Line,2*o+2);for(var v=0;v<o;v++){this.vertex(e+c,n+f,i);var y=c;c=h*c-l*f,f=l*y+h*f,this.vertex(e+c,n+f,i)}this.vertex(e+c,n+f,i)}c=r,f=0,this.vertex(e+c,n+f,i)}},{key:"curve",value:function(t,e,n,r,i,o,a,u,h){var l=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null;this.check(s.Line,2*h+2),null===l&&(l=this.color);for(var c=1/h,f=c*c,d=c*c*c,p=3*c,v=3*f,y=6*f,g=6*d,M=t-2*n+i,m=e-2*r+o,x=3*(n-i)-t+a,w=3*(r-o)-e+u,b=t,k=e,_=(n-t)*p+M*v+x*d,E=(r-e)*p+m*v+w*d,T=M*y+x*g,A=m*y+w*g,P=x*g,L=w*g;h-- >0;)this.vertex(b,k,l),b+=_,k+=E,_+=T,E+=A,T+=P,A+=L,this.vertex(b,k,l);this.vertex(b,k,l),this.vertex(a,u,l)}},{key:"vertex",value:function(t,e,n){var r=this.vertexIndex,i=this.mesh.getVertices();i[r++]=t,i[r++]=e,i[r++]=n.r,i[r++]=n.g,i[r++]=n.b,i[r++]=n.a,this.vertexIndex=r}},{key:"end",value:function(){if(!this.isDrawing)throw new Error("ShapeRenderer.begin() has not been called");this.flush();var t=this.context;t.disable(t.BLEND),this.isDrawing=!1}},{key:"flush",value:function(){0!==this.vertexIndex&&(this.mesh.setVerticesLength(this.vertexIndex),this.mesh.draw(this.shader,this.shapeType),this.vertexIndex=0)}},{key:"check",value:function(t,e){if(!this.isDrawing)throw new Error("ShapeRenderer.begin() has not been called");if(this.shapeType===t){if(!(this.mesh.maxVertices()-this.mesh.numVertices()<e))return;this.flush()}else this.flush(),this.shapeType=t}},{key:"dispose",value:function(){this.mesh.dispose()}}]),t}();e.ShapeRenderer=l},9805:function(t,e,n){"use strict";var r=n(6690).default,i=n(9728).default;Object.defineProperty(e,"__esModule",{value:!0}),e.Sprite=void 0;var s=n(8637),o=n(3192),a=function(){function t(e){r(this,t),this.region=e,this.dirty=!1,this.position=new o.Vector2(0,0),this.size=new o.Vector2(0,0),this.origin=new o.Vector2(0,0),this.scale=new o.Vector2(1,1),this.color=new s.Color(1,1,1,1),this.rotation=0,this.vertices=new Float32Array(48),this.bounds={x:0,y:0,width:0,height:0},this.setSize(e.width,e.height),this.setOrigin(e.width/2,e.height/2)}return i(t,[{key:"set",value:function(t){this.region=t.region,this.position.setVector(t.position),this.size.setVector(t.size),this.origin.setVector(t.origin),this.rotation=t.rotation,this.scale.setVector(t.scale),this.color.setFromColor(t.color),this.dirty=!0}},{key:"setBounds",value:function(t,e,n,r){this.setPosition(t,e),this.setSize(t,e),this.dirty=!0}},{key:"setSize",value:function(t,e){this.size.set(t,e),this.dirty=!0}},{key:"setPosition",value:function(t,e){this.position.set(t,e),this.dirty=!0}},{key:"setOriginBasedPosition",value:function(t,e){this.setPosition(t-this.origin.x,e-this.origin.y)}},{key:"setX",value:function(t){this.position.x=t,this.dirty=!0}},{key:"setY",value:function(t){this.position.y=t,this.dirty=!0}},{key:"setCenterX",value:function(t){this.setX(t-this.size.x/2)}},{key:"setCenterY",value:function(t){this.setY(t-this.size.y/2)}},{key:"setCenter",value:function(t,e){this.setPosition(t-this.size.x/2,e-this.size.y/2)}},{key:"translateX",value:function(t){this.translate(t,0)}},{key:"translateY",value:function(t){this.translate(0,t)}},{key:"translate",value:function(t,e){this.position.add(t,e),this.dirty=!0}},{key:"setColor",value:function(t){this.color.setFromColor(t),this.dirty=!0}},{key:"setAlpha",value:function(t){this.color.a=t,this.dirty=!0}},{key:"setOrigin",value:function(t,e){this.origin.set(t,e),this.dirty=!0}},{key:"setOriginCenter",value:function(){this.origin.set(this.size.x/2,this.size.y/2),this.dirty=!0}},{key:"setRotation",value:function(t){this.rotation=t,this.dirty=!0}},{key:"getRotation",value:function(){return this.rotation}},{key:"rotate",value:function(t){0!==t&&(this.rotation+=t,this.dirty=!0)}},{key:"setScale",value:function(t,e){this.scale.set(t,e),this.dirty=!0}},{key:"applyScale",value:function(t){this.scale.scale(t),this.dirty=!0}},{key:"getVertices",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.vertices,n=this.region;if(!this.dirty)return e;var r=this.position.x,i=this.position.y,s=this.size.x,o=this.size.y,a=this.origin.x,u=this.origin.y,h=this.rotation,l=this.scale.x,c=this.scale.y,f=n.u,d=n.v,p=n.u2,v=n.v2,y=this.color,g=n.rotated,M=s/n.originalWidth,m=o/n.originalHeight,x=n.width*M,w=n.height*m,b=r+n.offsetX*M;if(r=b,i=t?i+o-n.offsetY*m-w:i+n.offsetY*m,t){var k=d;d=v,v=k}var _=-a,E=(s=x)-a,T=s-a,A=-a,P=-u,L=-u,C=(o=w)-u,R=o-u;if(1!==l&&(_*=l,E*=l,T*=l,A*=l),1!==c&&(P*=c,L*=c,C*=c,R*=c),0!==h){var I=Math.cos(h),S=Math.sin(h),O=I*_-S*P,j=S*_+I*P,D=I*E-S*L,z=S*E+I*L,G=I*T-S*C,N=S*T+I*C,V=I*A-S*R,B=S*A+I*R;_=O,E=D,T=G,A=V,P=j,L=z,C=N,R=B}_+=r+a,E+=r+a,T+=r+a,A+=r+a,P+=i+u,L+=i+u,C+=i+u,R+=i+u;var F=f,W=d,H=p,U=v,X=H,Y=W,q=F,Z=U;g&&(t?(F=f,W=v,H=p,U=d,X=f,Y=d,q=p,Z=v):(F=p,W=d,H=f,U=v,X=p,Y=v,q=f,Z=d));var K=0;return e[K++]=_,e[K++]=P,e[K++]=y.r,e[K++]=y.g,e[K++]=y.b,e[K++]=y.a,e[K++]=F,e[K++]=W,e[K++]=0,e[K++]=0,e[K++]=0,e[K++]=0,e[K++]=E,e[K++]=L,e[K++]=y.r,e[K++]=y.g,e[K++]=y.b,e[K++]=y.a,e[K++]=X,e[K++]=Y,e[K++]=0,e[K++]=0,e[K++]=0,e[K++]=0,e[K++]=T,e[K++]=C,e[K++]=y.r,e[K++]=y.g,e[K++]=y.b,e[K++]=y.a,e[K++]=H,e[K++]=U,e[K++]=0,e[K++]=0,e[K++]=0,e[K++]=0,e[K++]=A,e[K++]=R,e[K++]=y.r,e[K++]=y.g,e[K++]=y.b,e[K++]=y.a,e[K++]=q,e[K++]=Z,e[K++]=0,e[K++]=0,e[K++]=0,e[K]=0,e}},{key:"getBoundingRectangle",value:function(){var t=this.vertices,e=t[0],n=t[1],r=t[0],i=t[1];return e=(e=(e=e>t[12]?t[12]:e)>t[24]?t[24]:e)>t[36]?t[36]:e,r=(r=(r=r<t[12]?t[12]:r)<t[24]?t[24]:r)<t[36]?t[36]:r,n=(n=(n=n>t[13]?t[13]:n)>t[25]?t[25]:n)>t[37]?t[37]:n,i=(i=(i=i<t[13]?t[13]:i)<t[25]?t[25]:i)<t[37]?t[37]:i,this.bounds.x=e,this.bounds.y=n,this.bounds.width=r-e,this.bounds.height=i-n,this.bounds}},{key:"draw",value:function(t){t.drawVertices(this.region.texture,this.getVertices(t.yDown))}},{key:"drawWithAlpha",value:function(t,e){var n=this.getColor().a;this.setAlpha(n*e),this.draw(t),this.setAlpha(n)}},{key:"getX",value:function(){return this.position.x}},{key:"getY",value:function(){return this.position.y}},{key:"getWidth",value:function(){return this.size.x}},{key:"getHeight",value:function(){return this.size.y}},{key:"getOriginX",value:function(){return this.origin.x}},{key:"getOriginY",value:function(){return this.origin.y}},{key:"getScaleX",value:function(){return this.scale.x}},{key:"getScaleY",value:function(){return this.scale.y}},{key:"getColor",value:function(){return this.color}}]),t}();e.Sprite=a},3432:function(t,e,n){"use strict";var r,i=n(6690).default,s=n(9728).default;Object.defineProperty(e,"__esModule",{value:!0}),e.Texture=e.TextureWrap=e.TextureFilter=void 0,function(t){t[t.Nearest=9728]="Nearest",t[t.Linear=9729]="Linear",t[t.MipMap=9987]="MipMap",t[t.MipMapNearestNearest=9984]="MipMapNearestNearest",t[t.MipMapLinearNearest=9985]="MipMapLinearNearest",t[t.MipMapNearestLinear=9986]="MipMapNearestLinear",t[t.MipMapLinearLinear=9987]="MipMapLinearLinear"}(r=e.TextureFilter||(e.TextureFilter={})),function(t){t[t.MirroredRepeat=33648]="MirroredRepeat",t[t.ClampToEdge=33071]="ClampToEdge",t[t.Repeat=10497]="Repeat"}(e.TextureWrap||(e.TextureWrap={}));var o=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];i(this,t),this.texture=null,this.boundUnit=0,this.useMipMaps=!1,this.width=0,this.height=0,this._image=n,this.context=e,this.useMipMaps=r,this.restore(),this.width=n.width,this.height=n.height}return s(t,[{key:"getImage",value:function(){return this._image}},{key:"getWebGLTexture",value:function(){return this.texture}},{key:"setFilters",value:function(e,n){var r=this.context;this.bind(),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,e),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,t.validateMagFilter(n))}},{key:"setWraps",value:function(t,e){var n=this.context;this.bind(),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,t),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,e)}},{key:"update",value:function(e){var n=this.context;this.texture||(this.texture=this.context.createTexture()),this.bind(),t.DISABLE_UNPACK_PREMULTIPLIED_ALPHA_WEBGL&&n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,this._image),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,e?n.LINEAR_MIPMAP_LINEAR:n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),e&&n.generateMipmap(n.TEXTURE_2D)}},{key:"restore",value:function(){this.texture=null,this.update(this.useMipMaps)}},{key:"bind",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=this.context;this.boundUnit=t,e.activeTexture(e.TEXTURE0+t),e.bindTexture(e.TEXTURE_2D,this.texture)}},{key:"unbind",value:function(){var t=this.context;t.activeTexture(t.TEXTURE0+this.boundUnit),t.bindTexture(t.TEXTURE_2D,null)}},{key:"dispose",value:function(){this.context.deleteTexture(this.texture)}}],[{key:"load",value:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return new Promise((function(i){var s=new Image;s.onload=function(){i(new t(e,s,r))},s.src=n}))}},{key:"validateMagFilter",value:function(t){switch(t){case r.MipMap:case r.MipMapLinearLinear:case r.MipMapLinearNearest:case r.MipMapNearestLinear:case r.MipMapNearestNearest:return r.Linear;default:return t}}}]),t}();e.Texture=o,o.DISABLE_UNPACK_PREMULTIPLIED_ALPHA_WEBGL=!1},8143:function(t,e,n){"use strict";var r=n(7061).default,i=n(7424).default,s=n(4704).default,o=n(6690).default,a=n(9728).default,u=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,s){function o(t){try{u(r.next(t))}catch(e){s(e)}}function a(t){try{u(r.throw(t))}catch(e){s(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}u((r=r.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.TextureAtlas=void 0;var h=n(3432),l=n(8026);function c(t,e){for(var n=t.split("/"),r=e.split("/"),i=[],s=0,o=n.length;s<o;s++)if(".."===n[s])i.pop();else{if("."===n[s])continue;i.push(n[s])}for(var a=0,u=r.length;a<u;a++)if(".."===r[a])i.pop();else{if("."===r[a])continue;i.push(r[a])}return i.join("/")}var f=function(){function t(e,n){o(this,t),this.pages=e,this.regions=n}return a(t,[{key:"dispose",value:function(){var t,e=s(this.pages);try{for(e.s();!(t=e.n()).done;){t.value.dispose()}}catch(n){e.e(n)}finally{e.f()}}},{key:"getPages",value:function(){return this.pages}},{key:"getRegions",value:function(){return this.regions}},{key:"findRegion",value:function(t,e){for(var n=0;n<this.regions.length;n++){var r=this.regions[n];if(r.name===t&&(void 0===e||r.index===e))return r}return null}},{key:"findRegions",value:function(t){return this.regions.filter((function(e){return e.name===t})).sort((function(t,e){return t.index-e.index}))}}],[{key:"load",value:function(e,n,s){return u(this,void 0,void 0,r().mark((function o(){var a,u,f,d,p,v,y,g,M,m,x,w,b,k,_,E,T,A,P,L,C,R,I,S,O,j,D,z,G,N,V,B,F,W,H,U,X,Y,q,Z,K;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,fetch(n).then((function(t){return t.text()}));case 2:a=r.sent,u=[],f=[],d=[],v=a.split(/\r?\n/),y=0;case 8:if(void 0!==(M=v[y])){r.next=12;break}return r.abrupt("break",16);case 12:0===M.trim().length?p=null:null===p?(m=c(n,"../".concat(M)),y++,M=v[y],g=M.split(":")[1].split(",").map((function(t){return t.trim()})),x=parseInt(g[0],10),w=parseInt(g[1],10),y++,M=v[y],g=M.split(":")[1].split(",").map((function(t){return t.trim()})),b=g[0],y++,M=v[y],g=M.split(":")[1].split(",").map((function(t){return t.trim()})),k=i(g,2),_=k[0],E=k[1],y++,M=v[y],g=M.split(":")[1].split(",").map((function(t){return t.trim()})),T=g[0],A=h.TextureWrap.ClampToEdge,P=h.TextureWrap.ClampToEdge,"x"===T?A=h.TextureWrap.Repeat:"y"===T?P=h.TextureWrap.Repeat:"xy"===T&&(A=h.TextureWrap.Repeat,P=h.TextureWrap.Repeat),p={file:m,width:x,height:w,format:b,mipMaps:"Nearest"!==_&&"Linear"!==_,min:_,max:E,direction:T,repeatX:A,repeatY:P},u.push(p)):(L=M,y++,M=v[y],g=M.split(":")[1].split(",").map((function(t){return t.trim()})),C="true"===g[0],y++,M=v[y],g=M.split(":")[1].split(",").map((function(t){return t.trim()})),R=parseInt(g[0],10),I=parseInt(g[1],10),y++,M=v[y],g=M.split(":")[1].split(",").map((function(t){return t.trim()})),S=parseInt(g[0],10),O=parseInt(g[1],10),j={name:L,rotate:C,left:R,top:I,width:S,height:O,page:p},y++,M=v[y],4===(g=M.split(":")[1].split(",").map((function(t){return t.trim()}))).length&&(j.splits=g.map((function(t){return parseInt(t,10)})),y++,M=v[y],4===(g=M.split(":")[1].split(",").map((function(t){return t.trim()}))).length&&(j.pads=g.map((function(t){return parseInt(t,10)})),y++,M=v[y],g=M.split(":")[1].split(",").map((function(t){return t.trim()})))),j.originalWidth=parseInt(g[0],10),j.originalHeight=parseInt(g[1],10),y++,M=v[y],g=M.split(":")[1].split(",").map((function(t){return t.trim()})),j.offsetX=parseInt(g[0],10),j.offsetY=parseInt(g[1],10),y++,M=v[y],g=M.split(":")[1].split(",").map((function(t){return t.trim()})),j.index=parseInt(g[0],10),d.push(j)),y++,r.next=8;break;case 16:D=0,z=u;case 17:if(!(D<z.length)){r.next=27;break}return G=z[D],r.next=21,h.Texture.load(e,G.file,s);case 21:G.texture=r.sent,G.invTexWidth=1/G.texture.width,G.invTexHeight=1/G.texture.height;case 24:D++,r.next=17;break;case 27:for(N=[],V=0,B=d;V<B.length;V++)F=B[V],W=F.left,H=F.top,U=F.rotate?F.height:F.width,X=F.rotate?F.width:F.height,Y=F.page,q=Y.texture,Z=Y.invTexWidth,K=Y.invTexHeight,N.push(new l.TextureRegion(q,W,H,U,X,F,Z,K,F.rotate));return r.abrupt("return",new t(f,N));case 30:case"end":return r.stop()}}),o)})))}}]),t}();e.TextureAtlas=f},8026:function(t,e,n){"use strict";var r=n(6690).default,i=n(9728).default;Object.defineProperty(e,"__esModule",{value:!0}),e.TextureRegion=void 0;var s=function(){function t(e,n,i,s,o,a,u,h){var l=arguments.length>8&&void 0!==arguments[8]&&arguments[8];r(this,t),this.name=null,this.index=0,this.texture=null,this.regionX=0,this.regionY=0,this.width=0,this.height=0,this.invTexWidth=0,this.invTexHeight=0,this.originalWidth=0,this.originalHeight=0,this.offsetX=0,this.offsetY=0,this.u=0,this.v=0,this.u2=0,this.v2=0,this.rotated=!1,u&&h||(u=1/e.width,h=1/e.height);var c=n*u,f=(i+o)*h,d=(n+s)*u,p=i*h;for(var v in this.texture=e,this.regionX=n,this.regionY=i,this.width=s,this.height=o,this.originalWidth=s,this.originalHeight=o,this.offsetX=0,this.offsetY=0,this.u=c,this.v=f,this.u2=d,this.v2=p,this.rotated=l,a)this[v]=a[v]}return i(t,[{key:"draw",value:function(t,e,n,r,i){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:1,h=arguments.length>9&&void 0!==arguments[9]?arguments[9]:1,l=this.originalWidth,c=this.originalHeight,f=this.offsetX,d=this.offsetY,p=this.width,v=this.height,y=r/l,g=i/c,M=p*y,m=v*g,x=e+f*y,w=0;s-=x-e,o-=(w=t.yDown?n+i-d*g-m:n+d*g)-n,t.draw(this.texture,x,w,M,m,s,o,a,u,h,this.u,this.v,this.u2,this.v2,this.rotated)}}],[{key:"splitTexture",value:function(e,n,r){for(var i=e.width/n,s=e.height/r,o=[],a=0;a<r;a++)for(var u=0;u<n;u++)o.push(new t(e,u*i,a*s,i,s,{}));return o}}]),t}();e.TextureRegion=s},8637:function(t,e,n){"use strict";var r,i=n(1655).default,s=n(6389).default,o=n(6690).default,a=n(9728).default;Object.defineProperty(e,"__esModule",{value:!0}),e.copyArray=e.createStage=e.pointInRect=e.resizeCanvas=e.createGameLoop=e.WindowedMean=e.TimeKeeper=e.Pools=e.Pool=e.Utils=e.PowOut=e.Pow=e.Interpolation=e.MathUtils=e.Color=e.StringSet=e.IntSet=e.Align=void 0;var u=function(){function t(){o(this,t)}return a(t,null,[{key:"isLeft",value:function(t){return 0!==(t&this.left)}},{key:"isRight",value:function(t){return 0!==(t&this.right)}},{key:"isTop",value:function(t){return 0!==(t&this.top)}},{key:"isBottom",value:function(t){return 0!==(t&this.bottom)}},{key:"isCenterVertical",value:function(t){return 0===(t&this.top)&&0===(t&this.bottom)}},{key:"isCenterHorizontal",value:function(t){return 0===(t&this.left)&&0===(t&this.right)}}]),t}();e.Align=u,r=u,u.center=1,u.top=2,u.bottom=4,u.left=8,u.right=16,u.topLeft=r.top|r.left,u.topRight=r.top|r.right,u.bottomLeft=r.bottom|r.left,u.bottomRight=r.bottom|r.right;var h=function(){function t(){o(this,t),this.array=new Array}return a(t,[{key:"add",value:function(t){var e=this.contains(t);return this.array[0|t]=0|t,!e}},{key:"contains",value:function(t){return void 0!==this.array[0|t]}},{key:"remove",value:function(t){this.array[0|t]=void 0}},{key:"clear",value:function(){this.array.length=0}}]),t}();e.IntSet=h;var l=function(){function t(){o(this,t),this.entries={},this.size=0}return a(t,[{key:"add",value:function(t){var e=this.entries[t];return this.entries[t]=!0,!e&&(this.size++,!0)}},{key:"addAll",value:function(t){for(var e=this.size,n=0,r=t.length;n<r;n++)this.add(t[n]);return e!==this.size}},{key:"contains",value:function(t){return this.entries[t]}},{key:"clear",value:function(){this.entries={},this.size=0}}]),t}();e.StringSet=l;var c=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;o(this,t),this.r=e,this.g=n,this.b=r,this.a=i}return a(t,[{key:"unsafeSet",value:function(t,e,n,r){this.r=t,this.g=e,this.b=n,this.a=r}},{key:"set",value:function(t,e,n,r){return this.r=t,this.g=e,this.b=n,this.a=r,this.clamp()}},{key:"setFromColor",value:function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this.a=t.a,this}},{key:"setFromString",value:function(t){return t="#"===t.charAt(0)?t.substring(1):t,this.r=parseInt(t.substring(0,2),16)/255,this.g=parseInt(t.substring(2,4),16)/255,this.b=parseInt(t.substring(4,6),16)/255,this.a=8!==t.length?1:parseInt(t.substring(6,8),16)/255,this}},{key:"add",value:function(t,e,n,r){return this.r+=t,this.g+=e,this.b+=n,this.a+=r,this.clamp()}},{key:"clamp",value:function(){return this.r<0?this.r=0:this.r>1&&(this.r=1),this.g<0?this.g=0:this.g>1&&(this.g=1),this.b<0?this.b=0:this.b>1&&(this.b=1),this.a<0?this.a=0:this.a>1&&(this.a=1),this}},{key:"toIntBits",value:function(){return 255*this.a<<24|255*this.b<<16|255*this.g<<8|255*this.r}}],[{key:"rgba8888ToColor",value:function(t,e){t.r=((4278190080&e)>>>24)/255,t.g=((16711680&e)>>>16)/255,t.b=((65280&e)>>>8)/255,t.a=(255&e)/255}},{key:"rgb888ToColor",value:function(t,e){t.r=((16711680&e)>>>16)/255,t.g=((65280&e)>>>8)/255,t.b=(255&e)/255}},{key:"fromString",value:function(e){return(new t).setFromString(e)}}]),t}();e.Color=c,c.WHITE=new c(1,1,1,1),c.RED=new c(1,0,0,1),c.GREEN=new c(0,1,0,1),c.BLUE=new c(0,0,1,1),c.MAGENTA=new c(1,0,1,1);var f=function(){function t(){o(this,t)}return a(t,null,[{key:"clamp",value:function(t,e,n){return t<e?e:t>n?n:t}},{key:"cosDeg",value:function(e){return Math.cos(e*t.degRad)}},{key:"sinDeg",value:function(e){return Math.sin(e*t.degRad)}},{key:"signum",value:function(t){return t>0?1:t<0?-1:0}},{key:"toInt",value:function(t){return t>0?Math.floor(t):Math.ceil(t)}},{key:"cbrt",value:function(t){var e=Math.pow(Math.abs(t),1/3);return t<0?-e:e}},{key:"randomTriangular",value:function(e,n){return t.randomTriangularWith(e,n,.5*(e+n))}},{key:"randomTriangularWith",value:function(t,e,n){var r=Math.random(),i=e-t;return r<=(n-t)/i?t+Math.sqrt(r*i*(n-t)):e-Math.sqrt((1-r)*i*(e-n))}},{key:"isPowerOfTwo",value:function(t){return t&&0===(t&t-1)}}]),t}();e.MathUtils=f,f.PI=3.1415927,f.PI2=2*f.PI,f.radiansToDegrees=180/f.PI,f.radDeg=f.radiansToDegrees,f.degreesToRadians=f.PI/180,f.degRad=f.degreesToRadians;var d=function(){function t(){o(this,t)}return a(t,[{key:"apply",value:function(t,e,n){return t+(e-t)*this.applyInternal(n)}}]),t}();e.Interpolation=d;var p=function(t){i(n,t);var e=s(n);function n(t){var r;return o(this,n),(r=e.call(this)).power=2,r.power=t,r}return a(n,[{key:"applyInternal",value:function(t){return t<=.5?Math.pow(2*t,this.power)/2:Math.pow(2*(t-1),this.power)/(this.power%2===0?-2:2)+1}}]),n}(d);e.Pow=p;var v=function(t){i(n,t);var e=s(n);function n(){return o(this,n),e.apply(this,arguments)}return a(n,[{key:"applyInternal",value:function(t){return Math.pow(t-1,this.power)*(this.power%2===0?-1:1)+1}}]),n}(p);e.PowOut=v;var y=function(){function t(){o(this,t)}return a(t,null,[{key:"arrayCopy",value:function(t,e,n,r,i){for(var s=e,o=r;s<e+i;s++,o++)n[o]=t[s]}},{key:"arrayFill",value:function(t,e,n,r){for(var i=e;i<n;i++)t[i]=r}},{key:"setArraySize",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=t.length;if(r===e)return t;if(t.length=e,r<e)for(var i=r;i<e;i++)t[i]=n;return t}},{key:"ensureArrayCapacity",value:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return e.length>=n?e:t.setArraySize(e,n,r)}},{key:"newArray",value:function(t,e){for(var n=new Array(t),r=0;r<t;r++)n[r]=e;return n}},{key:"newFloatArray",value:function(e){if(t.SUPPORTS_TYPED_ARRAYS)return new Float32Array(e);for(var n=new Array(e),r=0;r<n.length;r++)n[r]=0;return n}},{key:"newShortArray",value:function(e){if(t.SUPPORTS_TYPED_ARRAYS)return new Int16Array(e);for(var n=new Array(e),r=0;r<n.length;r++)n[r]=0;return n}},{key:"toFloatArray",value:function(e){return t.SUPPORTS_TYPED_ARRAYS?new Float32Array(e):e}},{key:"toSinglePrecision",value:function(e){return t.SUPPORTS_TYPED_ARRAYS?Math.fround(e):e}},{key:"contains",value:function(t,e){for(var n=0;n<t.length;n++)if(t[n]===e)return!0;return!1}},{key:"enumValue",value:function(t,e){return t[e[0].toUpperCase()+e.slice(1)]}}]),t}();e.Utils=y,y.SUPPORTS_TYPED_ARRAYS="undefined"!==typeof Float32Array;var g=function(){function t(e){o(this,t),this.items=new Array,this.instantiator=e||function(){return{}}}return a(t,[{key:"obtain",value:function(){return this.items.length>0?this.items.pop():this.instantiator()}},{key:"free",value:function(t){(null===t||void 0===t?void 0:t.reset)&&t.reset(),this.items.push(t)}},{key:"freeAll",value:function(t){for(var e=0;e<t.length;e++)this.free(t[e])}},{key:"clear",value:function(){this.items.length=0}}]),t}();e.Pool=g;var M=function(){function t(){o(this,t)}return a(t,null,[{key:"free",value:function(t,e){this.pools[t]&&this.pools[t].free(e)}},{key:"freeAll",value:function(t,e){this.pools[t]&&this.pools[t].freeAll(e)}},{key:"get",value:function(t,e){return this.pools[t]||(this.pools[t]=new g(e)),this.pools[t]}},{key:"set",value:function(t,e){this.pools[t]=e}},{key:"obtain",value:function(t,e){return this.get(t,e).obtain()}}]),t}();e.Pools=M,M.pools={};var m=function(){function t(){o(this,t),this.maxDelta=.064,this.framesPerSecond=0,this.delta=0,this.totalTime=0,this.lastTime=Date.now()/1e3,this.frameCount=0,this.frameTime=0}return a(t,[{key:"update",value:function(){var t=Date.now()/1e3;this.delta=t-this.lastTime,this.frameTime+=this.delta,this.totalTime+=this.delta,this.delta>this.maxDelta&&(this.delta=this.maxDelta),this.lastTime=t,this.frameCount++,this.frameTime>1&&(this.framesPerSecond=this.frameCount/this.frameTime,this.frameTime=0,this.frameCount=0)}}]),t}();e.TimeKeeper=m;var x=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32;o(this,t),this.addedValues=0,this.lastValue=0,this.mean=0,this.dirty=!0,this.values=new Array(e)}return a(t,[{key:"hasEnoughData",value:function(){return this.addedValues>=this.values.length}},{key:"addValue",value:function(t){this.addedValues<this.values.length&&this.addedValues++,this.values[this.lastValue++]=t,this.lastValue>this.values.length-1&&(this.lastValue=0),this.dirty=!0}},{key:"getMean",value:function(){if(this.hasEnoughData()){if(this.dirty){for(var t=0,e=0;e<this.values.length;e++)t+=this.values[e];this.mean=t/this.values.length,this.dirty=!1}return this.mean}return 0}}]),t}();e.WindowedMean=x;e.createGameLoop=function(t){var e,n=Date.now(),r=0,i=!0,s=0,o=0;function a(){if(i){var u=Date.now()-n;n=Date.now(),s++,(o+=u)>=1e3&&(r=s,s=0,o-=1e3),e=requestAnimationFrame(a),t(u/1e3)}}return a(),{isRunning:function(){return i},start:function(){i||(i=!0,a())},stop:function(){e&&cancelAnimationFrame(e),i=!1},getFps:function(){return r}}};e.resizeCanvas=function(t,e){var n=e||window.devicePixelRatio||1,r=t.clientWidth*n,i=t.clientHeight*n;return t.width===r&&t.height===i||(t.width=r,t.height=i),[r,i]};e.pointInRect=function(t,e,n,r,i,s){return t>n&&t<n+i&&e>r&&e<r+s};e.createStage=function(t){t=Object.assign(Object.assign({},{hidden:!1,info:!0}),t);var e=document.createElement("div");e.setAttribute("style","position:fixed;top:0;left:0;right:0;bottom:0;"),t.wrapperClassName&&(e.className=t.wrapperClassName),t.hidden&&(e.style.display="none");var n=document.createElement("canvas");n.setAttribute("style","width:100%;height:100%;");var r=document.createElement("div");return r.setAttribute("style","position:absolute;top:1em;left:1em;color:white"),t.info||(r.style.display="none"),e.appendChild(n),e.appendChild(r),document.body.appendChild(e),{getCanvas:function(){return n},getInfo:function(){return r},show:function(){return e.style.display="block"},hide:function(){return e.style.display="none"},cleanup:function(){return document.body.removeChild(e)}}};e.copyArray=function(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:e.length,s=0;s<i;s++)e[n+s]=t[r+s]}},3192:function(t,e,n){"use strict";var r=n(6690).default,i=n(9728).default;Object.defineProperty(e,"__esModule",{value:!0}),e.Vector2=void 0;var s=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;r(this,t),this.x=0,this.y=0,this.x=e,this.y=n}return i(t,[{key:"getX",value:function(){return this.x}},{key:"getY",value:function(){return this.y}},{key:"set",value:function(t,e){return this.x=t,this.y=e,this}},{key:"setVector",value:function(t){return this.set(t.x,t.y)}},{key:"add",value:function(t,e){return this.x+=t,this.y+=e,this}},{key:"addVector",value:function(t){return this.add(t.x,t.y)}},{key:"sub",value:function(t,e){return this.add(-t,-e)}},{key:"subVector",value:function(t){return this.sub(t.x,t.y)}},{key:"scale",value:function(t){return this.x*=t,this.y*=t,this}},{key:"dot",value:function(t){return this.x*t.x+this.y*t.y}},{key:"distanceSqr",value:function(t){var e=this.x-t.x,n=this.y-t.y;return e*e+n*n}},{key:"distance",value:function(t){return Math.sqrt(this.distanceSqr(t))}},{key:"angle",value:function(){return Math.atan2(this.y,this.x)}},{key:"len2",value:function(){return this.x*this.x+this.y*this.y}},{key:"len",value:function(){return Math.sqrt(this.len2())}},{key:"nor",value:function(){var t=this.len();return 0!==t&&(this.x/=t,this.y/=t),this}},{key:"rotateRad",value:function(t){var e=Math.cos(t),n=Math.sin(t),r=this.x*e-this.y*n,i=this.x*n+this.y*e;return this.x=r,this.y=i,this}},{key:"rotate",value:function(t){return this.rotateRad(t*Math.PI/180)}},{key:"cpy",value:function(){return new t(this.x,this.y)}}]),t}();e.Vector2=s},2668:function(t,e,n){"use strict";var r=n(6690).default,i=n(9728).default;Object.defineProperty(e,"__esModule",{value:!0}),e.Vector3=void 0;var s=n(5474),o=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;r(this,t),this.x=0,this.y=0,this.z=0,this.x=e,this.y=n,this.z=i}return i(t,[{key:"setFrom",value:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}},{key:"set",value:function(t,e,n){return this.x=t,this.y=e,this.z=n,this}},{key:"add",value:function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}},{key:"sub",value:function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}},{key:"scale",value:function(t){return this.x*=t,this.y*=t,this.z*=t,this}},{key:"normalize",value:function(){var t=this.length();return 0===t||(t=1/t,this.x*=t,this.y*=t,this.z*=t),this}},{key:"cross",value:function(t){return this.set(this.y*t.z-this.z*t.y,this.z*t.x-this.x*t.z,this.x*t.y-this.y*t.x)}},{key:"multiply",value:function(t){var e=t.values;return this.set(this.x*e[s.M00]+this.y*e[s.M01]+this.z*e[s.M02]+e[s.M03],this.x*e[s.M10]+this.y*e[s.M11]+this.z*e[s.M12]+e[s.M13],this.x*e[s.M20]+this.y*e[s.M21]+this.z*e[s.M22]+e[s.M23])}},{key:"project",value:function(t){var e=t.values,n=1/(this.x*e[s.M30]+this.y*e[s.M31]+this.z*e[s.M32]+e[s.M33]);return this.set((this.x*e[s.M00]+this.y*e[s.M01]+this.z*e[s.M02]+e[s.M03])*n,(this.x*e[s.M10]+this.y*e[s.M11]+this.z*e[s.M12]+e[s.M13])*n,(this.x*e[s.M20]+this.y*e[s.M21]+this.z*e[s.M22]+e[s.M23])*n)}},{key:"unproject",value:function(t,e,n,r,i,s){var o=this.x,a=this.y,u=this.z;return o-=n,a=s-a-1,a-=r,t.set(2*o/i-1,2*a/s-1,2*u-1),t.project(e),t}},{key:"dot",value:function(t){return this.x*t.x+this.y*t.y+this.z*t.z}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}},{key:"distance",value:function(t){var e=t.x-this.x,n=t.y-this.y,r=t.z-this.z;return Math.sqrt(e*e+n*n+r*r)}}]),t}();e.Vector3=o},7885:function(t,e,n){"use strict";var r=n(4704).default,i=n(7424).default;Object.defineProperty(e,"__esModule",{value:!0}),e.createViewport=void 0;var s=n(814),o=n(8637);e.createViewport=function(t,e,n,a){var u,h={autoUpdate:!0,pixelRatio:void 0,crop:!0};(a=Object.assign(Object.assign({},h),a)).disablePremultipliedAlpha&&(u={premultipliedAlpha:!1}),u=Object.assign(Object.assign({},u),a.contextOption);var l,c=t.getContext("webgl2",u),f=[],d=a,p=d.autoUpdate,v=d.pixelRatio,y=d.crop,g={pixelRatio:v=v||window.devicePixelRatio||1,x:0,y:0,width:e,height:n,worldWidth:e,worldHeight:n},M=(0,o.resizeCanvas)(t,v),m=i(M,2),x=m[0],w=m[1],b=new s.OrthoCamera(e,n,x,w);p&&(l=function(t){k.update()},window.addEventListener("resize",l));var k={getViewportInfo:function(){return g},getCamera:function(){return b},addCamera:function(t){f.push(t)},getContext:function(){return c},getCanvas:function(){return t},update:function(){var s=(0,o.resizeCanvas)(t,v),a=i(s,2),u=a[0],h=a[1],l=e/n,d=u/h;if(y){var p,M;l<d?(M=h,p=h*l):(p=u,M=u/l);var m=(u-p)/2,x=(h-M)/2;g.x=m,g.y=x,g.width=p,g.height=M,c.viewport(m,x,p,M),b.setPosition(e/2,n/2),b.resize(e,n,p,M);var w,k=r(f);try{for(k.s();!(w=k.n()).done;){var _=w.value;_.setPosition(e/2,n/2),_.resize(e,n,p,M)}}catch(I){k.e(I)}finally{k.f()}}else{var E,T,A,P;g.x=0,g.y=0,g.width=u,g.height=h,c.viewport(0,0,u,h),l<d?(A=-((E=(T=n)*d)-e)/2,P=0):(A=0,P=-((T=(E=e)/d)-n)/2),b.setPosition(A+E/2,P+T/2),b.resize(E,T,u,h);var L,C=r(f);try{for(C.s();!(L=C.n()).done;){var R=L.value;R.setPosition(A+E/2,P+T/2),R.resize(E,T,u,h)}}catch(I){C.e(I)}finally{C.f()}}},cleanUp:function(){l&&window.removeEventListener("resize",l)}};return p&&k.update(),k}},4634:function(t,e,n){"use strict";var r=n(6690).default,i=n(9728).default;Object.defineProperty(e,"__esModule",{value:!0}),e.ViewportInputHandler=void 0;var s=n(3233),o=n(3192),a=function(){function t(e){r(this,t),this.screenCoord=new o.Vector2,this.worldCoord=new o.Vector2,this.viewport=e,this.canvas=e.getCanvas(),this.inputHandler=new s.InputHandler(this.canvas)}return i(t,[{key:"isTouched",value:function(){return this.inputHandler.isTouched()}},{key:"cleanup",value:function(){this.inputHandler.cleanup()}},{key:"addEventListener",value:function(t,e){var n,r;this.inputHandler.addEventListener(t,(n=e,r=this.viewport,function(t,e){var i=r.getViewportInfo(),s=i.x,o=i.y,a=i.pixelRatio;n(t=t*a-s,e=e*a-o)}))}},{key:"getX",value:function(){var t=this.viewport.getViewportInfo(),e=t.x,n=t.pixelRatio;return this.inputHandler.getX()*n-e}},{key:"getY",value:function(){var t=this.viewport.getViewportInfo(),e=t.y,n=t.pixelRatio;return this.inputHandler.getY()*n-e}},{key:"getTouchedWorldCoord",value:function(t){return t||(t=this.viewport.getCamera()),this.screenCoord.set(this.getX(),this.getY()),t.unprojectVector2(this.worldCoord,this.screenCoord),this.worldCoord}}]),t}();e.ViewportInputHandler=a},5547:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||r(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),i(n(9054),e),i(n(7035),e),i(n(5283),e),i(n(6735),e),i(n(909),e),i(n(2691),e),i(n(814),e),i(n(2229),e),i(n(5508),e),i(n(417),e),i(n(1013),e),i(n(3233),e),i(n(5474),e),i(n(4731),e),i(n(2226),e),i(n(2991),e),i(n(6403),e),i(n(9805),e),i(n(2438),e),i(n(3432),e),i(n(8143),e),i(n(8026),e),i(n(8637),e),i(n(3192),e),i(n(2668),e),i(n(7885),e),i(n(4634),e)},3897:function(t){t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r},t.exports.__esModule=!0,t.exports.default=t.exports},5372:function(t){t.exports=function(t){if(Array.isArray(t))return t},t.exports.__esModule=!0,t.exports.default=t.exports},3405:function(t,e,n){var r=n(3897);t.exports=function(t){if(Array.isArray(t))return r(t)},t.exports.__esModule=!0,t.exports.default=t.exports},6115:function(t){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t},t.exports.__esModule=!0,t.exports.default=t.exports},6690:function(t){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},t.exports.__esModule=!0,t.exports.default=t.exports},9728:function(t){function e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}t.exports=function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t},t.exports.__esModule=!0,t.exports.default=t.exports},4704:function(t,e,n){var r=n(6116);t.exports=function(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=r(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var i=0,s=function(){};return{s:s,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}},t.exports.__esModule=!0,t.exports.default=t.exports},6389:function(t,e,n){var r=n(3808),i=n(9617),s=n(4993);t.exports=function(t){var e=i();return function(){var n,i=r(t);if(e){var o=r(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return s(this,n)}},t.exports.__esModule=!0,t.exports.default=t.exports},1588:function(t,e,n){var r=n(1753);function i(){return"undefined"!==typeof Reflect&&Reflect.get?(t.exports=i=Reflect.get.bind(),t.exports.__esModule=!0,t.exports.default=t.exports):(t.exports=i=function(t,e,n){var i=r(t,e);if(i){var s=Object.getOwnPropertyDescriptor(i,e);return s.get?s.get.call(arguments.length<3?t:n):s.value}},t.exports.__esModule=!0,t.exports.default=t.exports),i.apply(this,arguments)}t.exports=i,t.exports.__esModule=!0,t.exports.default=t.exports},3808:function(t){function e(n){return t.exports=e=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},t.exports.__esModule=!0,t.exports.default=t.exports,e(n)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports},1655:function(t,e,n){var r=n(6015);t.exports=function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&r(t,e)},t.exports.__esModule=!0,t.exports.default=t.exports},9617:function(t){t.exports=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}},t.exports.__esModule=!0,t.exports.default=t.exports},9498:function(t){t.exports=function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)},t.exports.__esModule=!0,t.exports.default=t.exports},8872:function(t){t.exports=function(t,e){var n=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,s=[],o=!0,a=!1;try{for(n=n.call(t);!(o=(r=n.next()).done)&&(s.push(r.value),!e||s.length!==e);o=!0);}catch(u){a=!0,i=u}finally{try{o||null==n.return||n.return()}finally{if(a)throw i}}return s}},t.exports.__esModule=!0,t.exports.default=t.exports},2218:function(t){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.__esModule=!0,t.exports.default=t.exports},2281:function(t){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.__esModule=!0,t.exports.default=t.exports},4993:function(t,e,n){var r=n(8698).default,i=n(6115);t.exports=function(t,e){if(e&&("object"===r(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return i(t)},t.exports.__esModule=!0,t.exports.default=t.exports},7061:function(t,e,n){var r=n(8698).default;function i(){"use strict";t.exports=i=function(){return e},t.exports.__esModule=!0,t.exports.default=t.exports;var e={},n=Object.prototype,s=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",u=o.asyncIterator||"@@asyncIterator",h=o.toStringTag||"@@toStringTag";function l(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(L){l=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var i=e&&e.prototype instanceof p?e:p,s=Object.create(i.prototype),o=new T(r||[]);return s._invoke=function(t,e,n){var r="suspendedStart";return function(i,s){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw s;return P()}for(n.method=i,n.arg=s;;){var o=n.delegate;if(o){var a=k(o,n);if(a){if(a===d)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=f(t,e,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===d)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(t,n,o),s}function f(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(L){return{type:"throw",arg:L}}}e.wrap=c;var d={};function p(){}function v(){}function y(){}var g={};l(g,a,(function(){return this}));var M=Object.getPrototypeOf,m=M&&M(M(A([])));m&&m!==n&&s.call(m,a)&&(g=m);var x=y.prototype=p.prototype=Object.create(g);function w(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(i,o,a,u){var h=f(t[i],t,o);if("throw"!==h.type){var l=h.arg,c=l.value;return c&&"object"==r(c)&&s.call(c,"__await")?e.resolve(c.__await).then((function(t){n("next",t,a,u)}),(function(t){n("throw",t,a,u)})):e.resolve(c).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,u)}))}u(h.arg)}var i;this._invoke=function(t,r){function s(){return new e((function(e,i){n(t,r,e,i)}))}return i=i?i.then(s,s):s()}}function k(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,k(t,e),"throw"===e.method))return d;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var r=f(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,d;var i=r.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,d):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function _(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function E(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(_,this),this.reset(!0)}function A(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,r=function e(){for(;++n<t.length;)if(s.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return r.next=r}}return{next:P}}function P(){return{value:void 0,done:!0}}return v.prototype=y,l(x,"constructor",y),l(y,"constructor",v),v.displayName=l(y,h,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,l(t,h,"GeneratorFunction")),t.prototype=Object.create(x),t},e.awrap=function(t){return{__await:t}},w(b.prototype),l(b.prototype,u,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,r,i,s){void 0===s&&(s=Promise);var o=new b(c(t,n,r,i),s);return e.isGeneratorFunction(n)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},w(x),l(x,h,"Generator"),l(x,a,(function(){return this})),l(x,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=A,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!t)for(var e in this)"t"===e.charAt(0)&&s.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(n,r){return o.type="throw",o.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],o=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var a=s.call(i,"catchLoc"),u=s.call(i,"finallyLoc");if(a&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&s.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=e,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),E(n),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;E(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:A(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}t.exports=i,t.exports.__esModule=!0,t.exports.default=t.exports},6015:function(t){function e(n,r){return t.exports=e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},t.exports.__esModule=!0,t.exports.default=t.exports,e(n,r)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports},7424:function(t,e,n){var r=n(5372),i=n(8872),s=n(6116),o=n(2218);t.exports=function(t,e){return r(t)||i(t,e)||s(t,e)||o()},t.exports.__esModule=!0,t.exports.default=t.exports},1753:function(t,e,n){var r=n(3808);t.exports=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=r(t)););return t},t.exports.__esModule=!0,t.exports.default=t.exports},861:function(t,e,n){var r=n(3405),i=n(9498),s=n(6116),o=n(2281);t.exports=function(t){return r(t)||i(t)||s(t)||o()},t.exports.__esModule=!0,t.exports.default=t.exports},8698:function(t){function e(n){return t.exports=e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.__esModule=!0,t.exports.default=t.exports,e(n)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports},6116:function(t,e,n){var r=n(3897);t.exports=function(t,e){if(t){if("string"===typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}},t.exports.__esModule=!0,t.exports.default=t.exports}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var s=e[r]={exports:{}};return t[r].call(s.exports,s,s.exports,n),s.exports}!function(){"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(){e=function(){return n};var n={},r=Object.prototype,i=r.hasOwnProperty,s="function"==typeof Symbol?Symbol:{},o=s.iterator||"@@iterator",a=s.asyncIterator||"@@asyncIterator",u=s.toStringTag||"@@toStringTag";function h(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{h({},"")}catch(P){h=function(t,e,n){return t[e]=n}}function l(t,e,n,r){var i=e&&e.prototype instanceof d?e:d,s=Object.create(i.prototype),o=new E(r||[]);return s._invoke=function(t,e,n){var r="suspendedStart";return function(i,s){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw s;return A()}for(n.method=i,n.arg=s;;){var o=n.delegate;if(o){var a=b(o,n);if(a){if(a===f)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=c(t,e,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(t,n,o),s}function c(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(P){return{type:"throw",arg:P}}}n.wrap=l;var f={};function d(){}function p(){}function v(){}var y={};h(y,o,(function(){return this}));var g=Object.getPrototypeOf,M=g&&g(g(T([])));M&&M!==r&&i.call(M,o)&&(y=M);var m=v.prototype=d.prototype=Object.create(y);function x(t){["next","throw","return"].forEach((function(e){h(t,e,(function(t){return this._invoke(e,t)}))}))}function w(e,n){function r(s,o,a,u){var h=c(e[s],e,o);if("throw"!==h.type){var l=h.arg,f=l.value;return f&&"object"==t(f)&&i.call(f,"__await")?n.resolve(f.__await).then((function(t){r("next",t,a,u)}),(function(t){r("throw",t,a,u)})):n.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,u)}))}u(h.arg)}var s;this._invoke=function(t,e){function i(){return new n((function(n,i){r(t,e,n,i)}))}return s=s?s.then(i,i):i()}}function b(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,b(t,e),"throw"===e.method))return f;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var r=c(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,f;var i=r.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function _(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function T(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,r=function e(){for(;++n<t.length;)if(i.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return r.next=r}}return{next:A}}function A(){return{value:void 0,done:!0}}return p.prototype=v,h(m,"constructor",v),h(v,"constructor",p),p.displayName=h(v,u,"GeneratorFunction"),n.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},n.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,h(t,u,"GeneratorFunction")),t.prototype=Object.create(m),t},n.awrap=function(t){return{__await:t}},x(w.prototype),h(w.prototype,a,(function(){return this})),n.AsyncIterator=w,n.async=function(t,e,r,i,s){void 0===s&&(s=Promise);var o=new w(l(t,e,r,i),s);return n.isGeneratorFunction(e)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},x(m),h(m,u,"Generator"),h(m,o,(function(){return this})),h(m,"toString",(function(){return"[object Generator]"})),n.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},n.values=T,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!t)for(var e in this)"t"===e.charAt(0)&&i.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(n,r){return o.type="throw",o.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var r=this.tryEntries.length-1;r>=0;--r){var s=this.tryEntries[r],o=s.completion;if("root"===s.tryLoc)return n("end");if(s.tryLoc<=this.prev){var a=i.call(s,"catchLoc"),u=i.call(s,"finallyLoc");if(a&&u){if(this.prev<s.catchLoc)return n(s.catchLoc,!0);if(this.prev<s.finallyLoc)return n(s.finallyLoc)}else if(a){if(this.prev<s.catchLoc)return n(s.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return n(s.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var s=r;break}}s&&("break"===t||"continue"===t)&&s.tryLoc<=e&&e<=s.finallyLoc&&(s=null);var o=s?s.completion:{};return o.type=t,o.arg=e,s?(this.method="next",this.next=s.finallyLoc,f):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),_(n),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;_(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:T(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},n}function r(t,e,n,r,i,s,o){try{var a=t[s](o),u=a.value}catch(h){return void n(h)}a.done?e(u):Promise.resolve(u).then(r,i)}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function s(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=function(t,e){if(t){if("string"===typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(t,e){if(isNaN(t)||t<=0)throw new Error('"'+e+'" must be a positive integer, but was '+t+" ("+typeof t+")")}var a=1e-10;function u(t,e,n){return Math.abs(e-t)<Math.abs(n-t)?e:n}function h(t,e,n,r,i,s){return{x:u(i,t,t+n),y:u(s,e,e+r)}}function l(t,e,n,r,i,s,o,a,u,h){for(var l,c,f,d,p,v=isNaN(u)?0:u,y=isNaN(h)?1:h,g=o-i,M=a-s,m=0,x=0,w=0,b=0,k=0,_=[1,2,3,4];k<_.length;k++){var E=_[k];if(1===E?(l=-1,c=0,f=-g,d=i-t):2===E?(l=1,c=0,f=g,d=t+n-i):3===E?(l=0,c=-1,f=-M,d=s-e):(l=0,c=1,f=M,d=e+r-s),0===f){if(d<=0)return[void 0,void 0,void 0,void 0,void 0,void 0]}else if(p=d/f,f<0){if(p>y)return[void 0,void 0,void 0,void 0,void 0,void 0];p>v&&(v=p,m=l,x=c)}else{if(p<v)return[void 0,void 0,void 0,void 0,void 0,void 0];p<y&&(y=p,w=l,b=c)}}return[v,y,m,x,w,b]}function c(t,e,n,r,i,s,o,a){return{x:i-t-n,y:s-e-r,w:n+o,h:r+a}}function f(t,e,n,r,i,s){return i-t>a&&s-e>a&&t+n-i>a&&e+r-s>a}function d(t,e,n,r,i,s,o,a){return t<i+o&&i<t+n&&e<s+a&&s<e+r}function p(t,e,n,r,i,s,o,a){var u=t-i+(n-o)/2,h=e-s+(r-a)/2;return u*u+h*h}function v(t,e,n,r,i,s,o,u,d,p){var v,y,g,M,m=(isNaN(d)?t:d)-t,x=(isNaN(p)?e:p)-e,w=c(t,e,n,r,i,s,o,u),b=w.x,k=w.y,_=w.w,E=w.h;if(f(b,k,_,E,0,0)){var T=h(b,k,_,E,0,0),A=T.x,P=T.y;M=-Math.min(n,Math.abs(A))*Math.min(r,Math.abs(P)),v=!0}else{var L=l(b,k,_,E,0,0,m,x,-Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER),C=L[0],R=L[1],I=L[2],S=L[3];!isNaN(C)&&C<1&&Math.abs(C-(R||0))>=a&&(0<C+a||0===C&&(R||0)>0)&&(M=C,y=I,g=S,v=!1)}if(!isNaN(M)){var O,j;if(v)if(0===m&&0===x){var D=h(b,k,_,E,0,0),z=D.x,G=D.y;Math.abs(z)<Math.abs(G)?G=0:z=0,y=Math.sign(z),g=Math.sign(G),O=t+z,j=e+G}else{var N=l(b,k,_,E,0,0,m,x,-Number.MAX_SAFE_INTEGER,1),V=N[0];if(y=N[2],g=N[3],!V)return;O=t+m*V,j=e+x*V}else O=t+m*M,j=e+x*M;return{overlaps:v,ti:M,move:{x:m,y:x},normal:{x:y,y:g},touch:{x:O,y:j},itemRect:{x:t,y:e,w:n,h:r},otherRect:{x:i,y:s,w:o,h:u}}}}function y(t,e,n){return[Math.floor(e/t)+1,Math.floor(n/t)+1]}function g(t,e,n,r){var i=r-n;return i>0?[1,t/i,((e+i)*t-n)/i]:i<0?[-1,-t/i,((e+i-1)*t-n)/i]:[0,Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER]}function M(t,e,n,r,i){var s=y(t,e,n),o=s[0],a=s[1];return[o,a,Math.ceil((e+r)/t)-o+1,Math.ceil((n+i)/t)-a+1]}function m(t,e,n){if(typeof e!==t)throw new Error('"'+n+'" must be a '+t+", but was a "+e+" ("+typeof e+")")}function x(t,e,n,r){m("number",t,"x"),m("number",e,"y"),o(n,"w"),o(r,"h")}function w(t,e,n,r,i,s,o,a,u){return{x:e.touch.x,y:e.touch.y,collisions:[]}}function b(t,e,n,r,i,s,o,a,u){return{x:o,y:a,collisions:t.project(e.item,n,r,i,s,o,a,u)}}function k(t,e,n,r,i,s,o,a,u){var h=isNaN(o)?n:o,l=isNaN(a)?r:a,c=e.touch,f=e.move;0===f.x&&0===f.y||(0!==e.normal.x?h=c.x:l=c.y),e.slide={x:h,y:l};var d=c.x,p=c.y;return{x:h,y:l,collisions:t.project(e.item,d,p,i,s,h,l,u)}}function _(t,e,n,r,i,s,o,a,u){var h=isNaN(o)?n:o,l=isNaN(a)?r:a,c=e.touch,f=e.move,d=c.x,p=c.y;if(0!==f.x||0!==f.y){var v=h-c.x,y=l-c.y;0===e.normal.x?y=-y:v=-v,d=c.x+v,p=c.y+y}return e.bounce={x:d,y:p},{x:d,y:p,collisions:t.project(e.item,c.x,c.y,i,s,d,p,u)}}function E(t,e){if(t.ti===e.ti){var n=t.itemRect,r=t.otherRect,i=e.otherRect;return p(n.x,n.y,n.w,n.h,r.x,r.y,r.w,r.h)-p(n.x,n.y,n.w,n.h,i.x,i.y,i.w,i.h)}return t.ti-e.ti}function T(){return"slide"}function A(t,e){return t.weight-e.weight}function P(t,e,n,r,i){var s=[],o={};return function(t,e,n,r,i,s){var o=y(t,e,n),a=o[0],u=o[1],h=y(t,r,i),l=h[0],c=h[1],f=g(t,a,e,r),d=f[0],p=f[1],v=f[2],M=g(t,u,n,i),m=M[0],x=M[1],w=M[2],b=a,k=u;s(b,k);do{if(v<w){var _=[v+p,b+d];v=_[0],s(b=_[1],k)}else v==w&&s(b+d,k),w+=x,s(b,k+=m)}while(Math.abs(b-l)+Math.abs(k-c)>1);b==l&&k==c||s(l,c)}(t.cellSize,e,n,r,i,(function(e,n){var r=t.rows[n];if(r){var i=r[e];i&&!o[i.ID]&&(o[i.ID]=!0,s.push(i))}})),s}function L(t,e,n,r,i,o){for(var a,u,h,c,f,d,p,v,y={},g=[],M=s(P(t,e,n,r,i));!(v=M()).done;){var m=v.value;if(null!=m&&m.items)for(var x=0,w=Object.keys(m.items);x<w.length;x++){var b=w[x];if(!y[b]&&(y[b]=!0,!o||o(b))){var k=l(u=(a=t.rects[b]).x,h=a.y,c=a.w,f=a.h,e,n,r,i,0,1);if(d=k[0],p=k[1],!isNaN(d)&&(0<d&&d<1||0<p&&p<1)){var _=l(u,h,c,f,e,n,r,i,-Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER),E=_[0],T=_[1];g.push({item:b,ti1:d,ti2:p,weight:Math.min(E||0,T||0)})}}}}return g.sort(A)}var C=function(){function t(t){this.responses={},this.cellSize=0,this.cellSize=t.cellSize,this.rects=t.rects,this.rows=t.rows,this.nonEmptyCells=t.nonEmptyCells,this.responses=t.responses}var e=t.prototype;return e.addResponse=function(t,e){this.responses[t]=e},e.getResponseByName=function(t){var e=this.responses[t];if(!e)throw new Error("Unknown collision type: "+t+" ("+typeof t+")");return e},e.project=function(t,e,n,r,i,s,o,a){x(e,n,r,i);var u=isNaN(s)?e:s,h=isNaN(o)?n:o,l=a||T,c=[],f={};t&&(f[t]=!0);for(var d=Math.min(u,e),p=Math.min(h,n),y=Math.max(u+r,e+r)-d,g=Math.max(h+i,n+i)-p,m=M(this.cellSize,d,p,y,g),w=m[0],b=m[1],k=m[2],_=m[3],A=this.getDictItemsInCellRect(w,b,k,_),P=0,L=Object.keys(A);P<L.length;P++){var C=L[P];if(!f[C]){f[C]=!0;var R=l(t,C);if(R&&this.hasItem(C)){var I=this.getRect(C),S=v(e,n,r,i,I.x,I.y,I.w,I.h,u,h);S&&(S.other=C,S.item=t,S.type=R,c.push(S))}}}return c.sort(E)},e.countCells=function(){for(var t,e=0,n=s(this.rows.filter((function(t){return!!t})));!(t=n()).done;)for(var r,i=s(t.value);!(r=i()).done;){r.value&&e++}return e},e.hasItem=function(t){return!!this.rects[t]},e.getItems=function(){var t=this;return Object.keys(this.rects).map((function(e){return t.rects[e]}))},e.countItems=function(){return Object.keys(this.rects).length},e.addItemToCell=function(t,e,n){this.rows[n]=this.rows[n]||[];var r=this.rows[n];r[e]||(r[e]={ID:"Cell_"+Math.ceil(Math.random()*Date.now()).toString(36),x:e,y:n,items:{}});var i=r[e];this.nonEmptyCells[i.ID]=!0,i.items[t]||(i.items[t]=!0)},e.getRect=function(t){var e=this.rects[t];if(!e)throw new Error('Item "'+t+'" must be added to the world before getting its rect. Use world:add(item, x,y,w,h) to add it first.');return{x:e.x,y:e.y,w:e.w,h:e.h}},e.getDictItemsInCellRect=function(t,e,n,r){for(var i={},s=e;s<=e+r-1;s++){var o=this.rows[s];if(o)for(var a=t;a<=t+n-1;a++){var u,h=o[a];if(null!=h&&h.items&&(null==(u=Object.keys(h.items))?void 0:u.length)>0)for(var l=0,c=Object.keys(h.items);l<c.length;l++){i[c[l]]=!0}}}return i},e.removeItemFromCell=function(t,e,n){var r,i,s,o=this.rows[n];if(null==o||null==(r=o[e])||null==(i=r.items)||!i[t])return!1;var a=o[e];return delete a.items[t],0===(null==(s=Object.keys(a.items))?void 0:s.length)&&delete this.nonEmptyCells[a.ID],!0},e.toWorld=function(t,e){return function(t,e,n){return[(e-1)*t,(n-1)*t]}(this.cellSize,t,e)},e.toCell=function(t,e){return y(this.cellSize,t,e)},e.queryRect=function(t,e,n,r,i){x(t,e,n,r);for(var s=M(this.cellSize,t,e,n,r),o=s[0],a=s[1],u=s[2],h=s[3],l=this.getDictItemsInCellRect(o,a,u,h),c=[],f=0,p=Object.keys(l);f<p.length;f++){var v=p[f];i&&!i(v)||!d(t,e,n,r,this.rects[v].x,this.rects[v].y,this.rects[v].w,this.rects[v].h)||c.push(v)}return c},e.queryPoint=function(t,e,n){for(var r=this.toCell(t,e),i=r[0],s=r[1],o=this.getDictItemsInCellRect(i,s,1,1),a=[],u=0,h=Object.keys(o);u<h.length;u++){var l=h[u];n&&!n(l)||!f(this.rects[l].x,this.rects[l].y,this.rects[l].w,this.rects[l].h,t,e)||a.push(l)}return a},e.querySegment=function(t,e,n,r,i){var o=L(this,t,e,n,r,i),a=[];if(o)for(var u,h=s(o);!(u=h()).done;){var l=u.value;a.push(l.item)}return a},e.querySegmentWithCoords=function(t,e,n,r,i){for(var o,a,u,h,l=L(this,t,e,n,r,i),c=n-t,f=r-e,d=s(l);!(h=d()).done;){a=(o=h.value).ti1,u=o.ti2,o.weight=null,o.x1=t+c*a,o.y1=e+f*a,o.x2=t+c*u,o.y2=e+f*u}return l},e.add=function(t,e,n,r,i){if(this.rects[t])throw new Error('Item "'+t+'" added to the world twice.');x(e,n,r,i),this.rects[t]={x:e,y:n,w:r,h:i};for(var s=M(this.cellSize,e,n,r,i),o=s[0],a=s[1],u=s[2],h=s[3],l=a;l<a+h;l++)for(var c=o;c<o+u;c++)this.addItemToCell(t,c,l);return t},e.remove=function(t){var e=JSON.parse(JSON.stringify(this.getRect(t)));delete this.rects[t];for(var n=M(this.cellSize,e.x,e.y,e.w,e.h),r=n[0],i=n[1],s=n[2],o=n[3],a=i;a<i+o;a++)for(var u=r;u<r+s;u++)this.removeItemFromCell(t,u,a)},e.update=function(t,e,n,r,i){var s=this.getRect(t);if(x(e,n,r=isNaN(r)?s.w:r,i=isNaN(i)?s.h:i),s.x!=e||s.y!=n||s.w!=r||s.h!=i){var o=M(this.cellSize,s.x,s.y,s.w,s.h),a=o[0],u=o[1],h=o[2],l=o[3],c=M(this.cellSize,e,n,r,i),f=c[0],d=c[1],p=c[2],v=c[3];if(a!=f||u!=d||h!=p||l!=v){for(var y,g=a+h-1,m=u+l-1,w=f+p-1,b=d+v-1,k=u;k<=m;k++){y=Number(k)<d||k>b;for(var _=a;_<=g;_++)(y||_<f||_>w)&&this.removeItemFromCell(t,_,k)}for(var E=d;E<=b;E++){y=E<u||E>m;for(var T=f;T<=w;T++)(y||T<a||T>g)&&this.addItemToCell(t,T,E)}}var A=this.rects[t];A.x=e,A.y=n,A.w=r,A.h=i}},e.move=function(t,e,n,r){var i=this.check(t,e,n,r),s=i.x,o=i.y,a=i.collisions;return this.update(t,s,o),{x:s,y:o,collisions:a}},e.check=function(t,e,n,r){var i,s=e,o=n,a=r||T,u={};u[t]=!0;for(var h=function(t,e){return!u[e]&&a(t,e)},l=[],c=this.getRect(t),f=this.project(t,c.x,c.y,c.w,c.h,s,o,h),d=(null==(i=f)?void 0:i.length)||0;d>0;){var p=f[0];l.push(p),u[p.other]=!0;var v=this.getResponseByName(p.type)(this,p,c.x,c.y,c.w,c.h,s,o,h),y=v.x,g=v.y,M=v.collisions;s=y,o=g,f=M,d=(null==M?void 0:M.length)||0}return{x:s,y:o,collisions:l}},t}(),R={newWorld:function(t){o(t=t||64,"cellSize");var e=new C({cellSize:t,rects:{},rows:[],nonEmptyCells:{},responses:{}});return e.addResponse("touch",w),e.addResponse("cross",b),e.addResponse("slide",k),e.addResponse("bounce",_),e},rect:{getNearestCorner:h,getSegmentIntersectionIndices:l,getDiff:c,containsPoint:f,isIntersecting:d,getSquareDistance:p,detectCollision:v},responses:{touch:w,cross:b,slide:k,bounce:_}},I=Object.freeze(R),S=n(7530),O=n(5547),j=n(3192);function D(t,e,n,r){n&&Object.defineProperty(t,e,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function z(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function G(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function N(t,e,n){return e&&G(t.prototype,e),n&&G(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function V(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function B(t,e){return B=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},B(t,e)}function F(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&B(t,e)}function W(t){return W=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},W(t)}function H(e,n){if(n&&("object"===t(n)||"function"===typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return V(e)}function U(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=W(t);if(e){var i=W(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return H(this,n)}}function X(t,e,n,r,i){var s={};return Object.keys(r).forEach((function(t){s[t]=r[t]})),s.enumerable=!!s.enumerable,s.configurable=!!s.configurable,("value"in s||s.initializer)&&(s.writable=!0),s=n.slice().reverse().reduce((function(n,r){return r(t,e,n)||n}),s),i&&void 0!==s.initializer&&(s.value=s.initializer?s.initializer.call(i):void 0,s.initializer=void 0),void 0===s.initializer&&(Object.defineProperty(t,e,s),s=null),s}var Y,q,Z,K,J,Q,$,tt,et,nt,rt,it,st,ot=N((function t(){z(this,t)}));ot.SCREEN_WIDTH=2e3,ot.SCREEN_HEIGHT=2e3,ot.MAP_WIDTH=320,ot.MAP_HEIGHT=320,ot.MAP_GRID_COLS=20,ot.MAP_GRID_ROWS=20,ot.CELL_WIDTH=ot.MAP_WIDTH/ot.MAP_GRID_COLS,ot.CELL_HEIGHT=ot.MAP_HEIGHT/ot.MAP_GRID_ROWS,ot.MAX_COUNT_MAP=3;var at,ut,ht,lt,ct,ft,dt,pt,vt,yt,gt,Mt,mt,xt,wt,bt,kt,_t,Et,Tt,At,Pt,Lt,Ct,Rt,It,St,Ot=(Y=(0,S.tB)("bumpWorld"),q=(0,S.tB)("gameConfig"),Z=(0,S.tB)("port"),K=(0,S.tB)("layersMapRender"),J=(0,S.tB)("obstacles"),Q=(0,S.tB)("mapData"),$=function(t){F(n,t);var e=U(n);function n(){var t;z(this,n);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return D(t=e.call.apply(e,[this].concat(i)),"bumpWorld",tt,V(t)),D(t,"gameConfig",et,V(t)),D(t,"port",nt,V(t)),D(t,"layersMapRender",rt,V(t)),D(t,"obstacles",it,V(t)),D(t,"mapData",st,V(t)),t.reload=!1,t.realNextMapPosY=0,t.realPreMapPosY=0,t.offsetTileMap=10,t}return N(n,[{key:"initialized",value:function(){}},{key:"process",value:function(){var t=this.bumpWorld.getRect("player");if(console.log(this.gameConfig.mapNumber),this.gameConfig.mapNumber<3&&Math.abs(t.x-(this.port.nextMap.x-5))<=this.offsetTileMap/1.5&&Math.abs(t.y-(ot.MAP_HEIGHT-this.port.nextMap.y+this.offsetTileMap+10))<=this.offsetTileMap/1.5){this.gameConfig.mapNumber++;for(var e=0;e<this.layersMapRender.obstacle.length;e++)this.layersMapRender.obstacle[e]&&this.bumpWorld.remove("obstacle".concat(e));2===this.gameConfig.mapNumber&&(this.port.spawn=this.mapData.map2.layers.find((function(t){return"data"===t.name})).objects.find((function(t){return"spawn"===t.name})),this.port.preMap=this.mapData.map2.layers.find((function(t){return"data"===t.name})).objects.find((function(t){return"previousMap"===t.name})),console.log(this.mapData.map2.layers),this.port.nextMap=this.mapData.map2.layers.find((function(t){return"data"===t.name})).objects.find((function(t){return"nextMap"===t.name})),this.layersMapRender.walls=this.mapData.map2.layers.find((function(t){return"walls"===t.name})).data,this.layersMapRender.layer1=this.mapData.map2.layers.find((function(t){return"layer1"===t.name})).data,this.layersMapRender.layer2=this.mapData.map2.layers.find((function(t){return"layer2"===t.name})).data,this.layersMapRender.obstacle=this.mapData.map2.layers.find((function(t){return"obstacles"===t.name})).data,this.bumpWorld.move("player",this.port.preMap.x-this.offsetTileMap/2,ot.MAP_HEIGHT-this.port.preMap.y+this.offsetTileMap-10)),3===this.gameConfig.mapNumber&&(this.layersMapRender.walls=this.mapData.map3.layers.find((function(t){return"walls"===t.name})).data,this.layersMapRender.layer1=this.mapData.map3.layers.find((function(t){return"layer1"===t.name})).data,this.layersMapRender.layer2=this.mapData.map3.layers.find((function(t){return"layer2"===t.name})).data,this.layersMapRender.obstacle=this.mapData.map3.layers.find((function(t){return"obstacles"===t.name})).data,this.port.preMap=this.mapData.map3.layers.find((function(t){return"data"===t.name})).objects.find((function(t){return"previousMap"===t.name})),this.port.nextMap=this.mapData.map3.layers.find((function(t){return"data"===t.name})).objects.find((function(t){return"nextMap"===t.name})),this.bumpWorld.move("player",this.port.preMap.x-this.offsetTileMap/2,ot.MAP_HEIGHT-this.port.preMap.y+this.offsetTileMap+20));for(var n=0;n<this.layersMapRender.obstacle.length;n++)this.layersMapRender.obstacle[n]&&this.bumpWorld.add("obstacle".concat(n),this.obstacles[n].x,this.obstacles[n].y,this.obstacles[n].width,this.obstacles[n].height)}if(this.gameConfig.mapNumber>1&&Math.abs(t.x-(this.port.preMap.x-5))<=this.offsetTileMap/1.5&&Math.abs(t.y-(ot.MAP_HEIGHT-this.port.preMap.y+this.offsetTileMap+10))<=this.offsetTileMap/1.5){this.gameConfig.mapNumber--;for(var r=0;r<this.layersMapRender.obstacle.length;r++)this.layersMapRender.obstacle[r]&&this.bumpWorld.remove("obstacle".concat(r));1===this.gameConfig.mapNumber&&(this.port.nextMap=this.mapData.map1.layers.find((function(t){return"data"===t.name})).objects.find((function(t){return"nextMap"===t.name})),this.layersMapRender.walls=this.mapData.map1.layers.find((function(t){return"walls"===t.name})).data,this.layersMapRender.layer1=this.mapData.map1.layers.find((function(t){return"layer1"===t.name})).data,this.layersMapRender.layer2=this.mapData.map1.layers.find((function(t){return"layer2"===t.name})).data,this.layersMapRender.obstacle=this.mapData.map1.layers.find((function(t){return"obstacles"===t.name})).data),2===this.gameConfig.mapNumber&&(this.port.preMap=this.mapData.map2.layers.find((function(t){return"data"===t.name})).objects.find((function(t){return"previousMap"===t.name})),this.port.nextMap=this.mapData.map2.layers.find((function(t){return"data"===t.name})).objects.find((function(t){return"nextMap"===t.name})),this.layersMapRender.walls=this.mapData.map2.layers.find((function(t){return"walls"===t.name})).data,this.layersMapRender.layer1=this.mapData.map2.layers.find((function(t){return"layer1"===t.name})).data,this.layersMapRender.layer2=this.mapData.map2.layers.find((function(t){return"layer2"===t.name})).data,this.layersMapRender.obstacle=this.mapData.map2.layers.find((function(t){return"obstacles"===t.name})).data),this.bumpWorld.move("player",this.port.nextMap.x-this.offsetTileMap/2,ot.MAP_HEIGHT-this.port.nextMap.y+this.offsetTileMap);for(var i=0;i<this.layersMapRender.obstacle.length;i++)this.layersMapRender.obstacle[i]&&this.bumpWorld.add("obstacle".concat(i),this.obstacles[i].x,this.obstacles[i].y,this.obstacles[i].width,this.obstacles[i].height)}}}]),n}(S.xP),tt=X($.prototype,"bumpWorld",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),et=X($.prototype,"gameConfig",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),nt=X($.prototype,"port",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),rt=X($.prototype,"layersMapRender",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),it=X($.prototype,"obstacles",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),st=X($.prototype,"mapData",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$),jt=(at=(0,S.tB)("shapeRenderer"),ut=(0,S.tB)("batch"),ht=(0,S.tB)("tileSetsRegions"),lt=(0,S.tB)("layersMapRender"),ct=(0,S.tB)("rects"),ft=function(t){F(n,t);var e=U(n);function n(){var t;z(this,n);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return D(t=e.call.apply(e,[this].concat(i)),"shapeRenderer",dt,V(t)),D(t,"batch",pt,V(t)),D(t,"tileSetsRegions",vt,V(t)),D(t,"layersMapRender",yt,V(t)),D(t,"rects",gt,V(t)),t}return N(n,[{key:"initialized",value:function(){for(var t=0;t<ot.MAP_GRID_COLS;t++)for(var e=0;e<ot.MAP_GRID_ROWS;e++)this.rects.push({x:ot.CELL_WIDTH*e,y:ot.CELL_HEIGHT*ot.MAP_GRID_ROWS-ot.CELL_HEIGHT*t,width:ot.CELL_WIDTH,height:ot.CELL_HEIGHT})}},{key:"process",value:function(){var t=this;this.batch.begin(),this.layersMapRender.walls.forEach((function(e,n){var r=t.tileSetsRegions[e-1],i=t.rects[n];r.draw(t.batch,i.x,i.y,i.width,i.height)})),this.layersMapRender.layer1.forEach((function(e,n){if(e){var r=t.tileSetsRegions[e-1],i=t.rects[n];r.draw(t.batch,i.x,i.y,i.width,i.height)}})),this.layersMapRender.layer2.forEach((function(e,n){if(e){var r=t.tileSetsRegions[e-1],i=t.rects[n];r.draw(t.batch,i.x,i.y,i.width,i.height)}})),this.batch.end()}}]),n}(S.xP),dt=X(ft.prototype,"shapeRenderer",[at],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),pt=X(ft.prototype,"batch",[ut],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),vt=X(ft.prototype,"tileSetsRegions",[ht],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),yt=X(ft.prototype,"layersMapRender",[lt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gt=X(ft.prototype,"rects",[ct],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ft),Dt=(Mt=(0,S.tB)("bumpWorld"),mt=(0,S.tB)("mapData"),xt=(0,S.tB)("obstacles"),wt=(0,S.tB)("layersMapRender"),bt=function(t){F(n,t);var e=U(n);function n(){var t;z(this,n);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return D(t=e.call.apply(e,[this].concat(i)),"bumpWorld",kt,V(t)),D(t,"mapData",_t,V(t)),D(t,"obstacles",Et,V(t)),D(t,"layersMapRender",Tt,V(t)),t}return N(n,[{key:"initialized",value:function(){console.log(this.layersMapRender);for(var t=0;t<this.layersMapRender.obstacle.length;t++)this.layersMapRender.obstacle[t]&&this.bumpWorld.add("obstacle".concat(t),this.obstacles[t].x,this.obstacles[t].y,this.obstacles[t].width,this.obstacles[t].height)}},{key:"process",value:function(){}}]),n}(S.xP),kt=X(bt.prototype,"bumpWorld",[Mt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_t=X(bt.prototype,"mapData",[mt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Et=X(bt.prototype,"obstacles",[xt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Tt=X(bt.prototype,"layersMapRender",[wt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bt);var zt,Gt,Nt,Vt,Bt,Ft,Wt,Ht,Ut,Xt=(At=(0,S.tB)("inputHandler"),Pt=(0,S.tB)("joyStick"),Lt=(0,S.tB)("bumpWorld"),Ct=function(t){F(n,t);var e=U(n);function n(){var t;z(this,n);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return D(t=e.call.apply(e,[this].concat(i)),"inputHandler",Rt,V(t)),D(t,"joyStick",It,V(t)),D(t,"bumpWorld",St,V(t)),t}return N(n,[{key:"process",value:function(){var t,e,n=(t=this.inputHandler,e=this.joyStick,t.isTouched()?(e.origin.set(ot.MAP_WIDTH/2,ot.MAP_HEIGHT/2),e.thumbPos.setVector(t.getTouchedWorldCoord()),e.direction.setVector(e.thumbPos).subVector(e.origin).nor()):e.direction.set(0,0),e.direction),r=this.bumpWorld.getRect("player");this.bumpWorld.move("player",r.x+n.x,r.y+n.y)}}]),n}(S.xP),Rt=X(Ct.prototype,"inputHandler",[At],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),It=X(Ct.prototype,"joyStick",[Pt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),St=X(Ct.prototype,"bumpWorld",[Lt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ct),Yt=(zt=(0,S.tB)("shapeRenderer"),Gt=(0,S.tB)("bumpWorld"),Nt=(0,S.tB)("currentMapData"),Vt=(0,S.tB)("port"),Bt=function(t){F(n,t);var e=U(n);function n(){var t;z(this,n);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return D(t=e.call.apply(e,[this].concat(i)),"shapeRenderer",Ft,V(t)),D(t,"bumpWorld",Wt,V(t)),D(t,"currentMapData",Ht,V(t)),D(t,"port",Ut,V(t)),t}return N(n,[{key:"process",value:function(){var t=this.bumpWorld.getRect("player");this.shapeRenderer.begin(),this.shapeRenderer.rect(!0,t.x,t.y,t.w,t.h,O.Color.GREEN),this.shapeRenderer.end()}}]),n}(S.xP),Ft=X(Bt.prototype,"shapeRenderer",[zt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Wt=X(Bt.prototype,"bumpWorld",[Gt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ht=X(Bt.prototype,"currentMapData",[Nt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ut=X(Bt.prototype,"port",[Vt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Bt),qt=function(){var t,n=(t=e().mark((function t(){var n,r,i,s,o,a,u,h,l,c,f,d,p,v,y,g,M,m,x,w,b;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=(0,O.createStage)(),r=n.getCanvas(),i=(0,O.createViewport)(r,ot.MAP_WIDTH,ot.MAP_HEIGHT+20),s=i.getContext(),o=new O.PolygonBatch(s),a=new O.ShapeRenderer(s),u=i.getCamera(),h=new S.q3,t.next=10,O.Texture.load(s,"./tiles_dungeon_v1.1.png");case 10:return l=t.sent,c=O.TextureRegion.splitTexture(l,20,24),s.clearColor(0,0,0,1),f=new O.ViewportInputHandler(i),d={mapNumber:1,changePreMap:!1,changeCurrentMap:!0,changeNextMap:!1},p={preMap:null,spawn:null,nextMap:null},v={map1:null,map2:null,map3:null},t.next=19,fetch("./01.tmj").then((function(t){return t.json()}));case 19:return v.map1=t.sent,p.spawn=v.map1.layers.find((function(t){return"data"===t.name})).objects.find((function(t){return"spawn"===t.name})),p.preMap=v.map1.layers.find((function(t){return"data"===t.name})).objects.find((function(t){return"previousMap"===t.name})),p.nextMap=v.map1.layers.find((function(t){return"data"===t.name})).objects.find((function(t){return"nextMap"===t.name})),t.next=25,fetch("./0".concat(d.mapNumber+1,".tmj")).then((function(t){return t.json()}));case 25:return v.map2=t.sent,t.next=28,fetch("./0".concat(d.mapNumber+2,".tmj")).then((function(t){return t.json()}));case 28:for(v.map3=t.sent,y={origin:new j.Vector2,direction:new j.Vector2,thumbPos:new j.Vector2,touched:!1,move:!1,dragging:!1},g={walls:v.map1.layers.find((function(t){return"walls"===t.name})).data,layer1:v.map1.layers.find((function(t){return"layer1"===t.name})).data,layer2:v.map1.layers.find((function(t){return"layer2"===t.name})).data,obstacle:v.map1.layers.find((function(t){return"obstacles"===t.name})).data},M=[],m=[],x=0;x<ot.MAP_GRID_COLS;x++)for(w=0;w<ot.MAP_GRID_ROWS;w++)m.push({x:ot.CELL_WIDTH*w,y:ot.CELL_HEIGHT*ot.MAP_GRID_ROWS-ot.CELL_HEIGHT*x,width:ot.CELL_WIDTH,height:ot.CELL_HEIGHT});(b=I.newWorld(ot.CELL_WIDTH)).add("player",p.spawn.x-5,ot.MAP_HEIGHT-p.spawn.y+10,10,10),h.register("bumpWorld",b),h.register("inputHandler",f),h.register("joyStick",y),h.register("shapeRenderer",a),h.register("batch",o),h.register("rects",M),h.register("obstacles",m),h.register("tileSetsRegions",c),h.register("gameConfig",d),h.register("port",p),h.register("layersMapRender",g),h.register("mapData",v),h.addSystem(new Xt,!0),h.addSystem(new Dt,!0),h.addSystem(new Ot,!0),h.addSystem(new jt,!1),h.addSystem(new Yt,!1),(0,O.createGameLoop)((function(t){s.clear(s.COLOR_BUFFER_BIT),o.setProjection(u.combined),a.setProjection(u.combined),h.setDelta(t),h.processActiveSystem(),h.processPassiveSystem()}));case 55:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(i,s){var o=t.apply(e,n);function a(t){r(o,i,s,a,u,"next",t)}function u(t){r(o,i,s,a,u,"throw",t)}a(void 0)}))});return function(){return n.apply(this,arguments)}}();qt()}()}();
//# sourceMappingURL=main.2538d0cb.js.map