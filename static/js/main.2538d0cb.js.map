{"version":3,"file":"static/js/main.2538d0cb.js","mappings":"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","sources":["../node_modules/events/events.js","../node_modules/fastbitset/FastBitSet.js","../node_modules/flat-ecs/lib/Archetype.js","../node_modules/flat-ecs/lib/Component.js","../node_modules/flat-ecs/lib/ComponentMapper.js","../node_modules/flat-ecs/lib/EntityIteratingSystem.js","../node_modules/flat-ecs/lib/EntitySystem.js","../node_modules/flat-ecs/lib/Inject.js","../node_modules/flat-ecs/lib/InjectMapper.js","../node_modules/flat-ecs/lib/System.js","../node_modules/flat-ecs/lib/World.js","../node_modules/flat-ecs/lib/index.js","../node_modules/gdxts/dist/lib/Animation.js","../node_modules/gdxts/dist/lib/AssetManager.js","../node_modules/gdxts/dist/lib/BitmapFont.js","../node_modules/gdxts/dist/lib/BitmapFontCache.js","../node_modules/gdxts/dist/lib/BitmapFontData.js","../node_modules/gdxts/dist/lib/BoundingBox.js","../node_modules/gdxts/dist/lib/Camera.js","../node_modules/gdxts/dist/lib/Game.js","../node_modules/gdxts/dist/lib/Glyph.js","../node_modules/gdxts/dist/lib/GlyphLayout.js","../node_modules/gdxts/dist/lib/GlyphRun.js","../node_modules/gdxts/dist/lib/InputHandler.js","../node_modules/gdxts/dist/lib/Matrix4.js","../node_modules/gdxts/dist/lib/Mesh.js","../node_modules/gdxts/dist/lib/NumberUtils.js","../node_modules/gdxts/dist/lib/PolygonBatcher.js","../node_modules/gdxts/dist/lib/Shader.js","../node_modules/gdxts/dist/lib/ShapeRenderer.js","../node_modules/gdxts/dist/lib/Sprite.js","../node_modules/gdxts/dist/lib/Texture.js","../node_modules/gdxts/dist/lib/TextureAtlas.js","../node_modules/gdxts/dist/lib/TextureRegion.js","../node_modules/gdxts/dist/lib/Utils.js","../node_modules/gdxts/dist/lib/Vector2.js","../node_modules/gdxts/dist/lib/Vector3.js","../node_modules/gdxts/dist/lib/Viewport.js","../node_modules/gdxts/dist/lib/ViewportInputHandler.js","../node_modules/gdxts/dist/lib/index.js","../node_modules/@babel/runtime/helpers/arrayLikeToArray.js","../node_modules/@babel/runtime/helpers/arrayWithHoles.js","../node_modules/@babel/runtime/helpers/arrayWithoutHoles.js","../node_modules/@babel/runtime/helpers/assertThisInitialized.js","../node_modules/@babel/runtime/helpers/classCallCheck.js","../node_modules/@babel/runtime/helpers/createClass.js","../node_modules/@babel/runtime/helpers/createForOfIteratorHelper.js","../node_modules/@babel/runtime/helpers/createSuper.js","../node_modules/@babel/runtime/helpers/get.js","../node_modules/@babel/runtime/helpers/getPrototypeOf.js","../node_modules/@babel/runtime/helpers/inherits.js","../node_modules/@babel/runtime/helpers/isNativeReflectConstruct.js","../node_modules/@babel/runtime/helpers/iterableToArray.js","../node_modules/@babel/runtime/helpers/iterableToArrayLimit.js","../node_modules/@babel/runtime/helpers/nonIterableRest.js","../node_modules/@babel/runtime/helpers/nonIterableSpread.js","../node_modules/@babel/runtime/helpers/possibleConstructorReturn.js","../node_modules/@babel/runtime/helpers/regeneratorRuntime.js","../node_modules/@babel/runtime/helpers/setPrototypeOf.js","../node_modules/@babel/runtime/helpers/slicedToArray.js","../node_modules/@babel/runtime/helpers/superPropBase.js","../node_modules/@babel/runtime/helpers/toConsumableArray.js","../node_modules/@babel/runtime/helpers/typeof.js","../node_modules/@babel/runtime/helpers/unsupportedIterableToArray.js","../webpack/bootstrap","../node_modules/@babel/runtime/helpers/esm/typeof.js","../node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js","../node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","../node_modules/bump-ts/src/helpers/generic/assertIsPositiveNumber.ts","../node_modules/bump-ts/src/constants.ts","../node_modules/bump-ts/src/helpers/generic/nearest.ts","../node_modules/bump-ts/src/rect.ts","../node_modules/bump-ts/src/grid.ts","../node_modules/bump-ts/src/helpers/generic/assertType.ts","../node_modules/bump-ts/src/helpers/generic/assertIsRect.ts","../node_modules/bump-ts/src/helpers/world/responses.ts","../node_modules/bump-ts/src/helpers/world/sortByTiAndDistance.ts","../node_modules/bump-ts/src/index.ts","../node_modules/@babel/runtime/helpers/esm/initializerDefineProperty.js","../node_modules/@babel/runtime/helpers/esm/classCallCheck.js","../node_modules/@babel/runtime/helpers/esm/createClass.js","../node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","../node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","../node_modules/@babel/runtime/helpers/esm/inherits.js","../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js","../node_modules/@babel/runtime/helpers/esm/createSuper.js","../node_modules/@babel/runtime/helpers/esm/isNativeReflectConstruct.js","../node_modules/@babel/runtime/helpers/esm/applyDecoratedDescriptor.js","Constant.ts","ChangeMapSystem.ts","MapRenderingSystem.ts","ObstaclesSystem.ts","PlayerMovementSystem.ts","PlayerRenderSystem.ts","index.ts"],"sourcesContent":["// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar R = typeof Reflect === 'object' ? Reflect : null\nvar ReflectApply = R && typeof R.apply === 'function'\n  ? R.apply\n  : function ReflectApply(target, receiver, args) {\n    return Function.prototype.apply.call(target, receiver, args);\n  }\n\nvar ReflectOwnKeys\nif (R && typeof R.ownKeys === 'function') {\n  ReflectOwnKeys = R.ownKeys\n} else if (Object.getOwnPropertySymbols) {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target)\n      .concat(Object.getOwnPropertySymbols(target));\n  };\n} else {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target);\n  };\n}\n\nfunction ProcessEmitWarning(warning) {\n  if (console && console.warn) console.warn(warning);\n}\n\nvar NumberIsNaN = Number.isNaN || function NumberIsNaN(value) {\n  return value !== value;\n}\n\nfunction EventEmitter() {\n  EventEmitter.init.call(this);\n}\nmodule.exports = EventEmitter;\nmodule.exports.once = once;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._eventsCount = 0;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nvar defaultMaxListeners = 10;\n\nfunction checkListener(listener) {\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n}\n\nObject.defineProperty(EventEmitter, 'defaultMaxListeners', {\n  enumerable: true,\n  get: function() {\n    return defaultMaxListeners;\n  },\n  set: function(arg) {\n    if (typeof arg !== 'number' || arg < 0 || NumberIsNaN(arg)) {\n      throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received ' + arg + '.');\n    }\n    defaultMaxListeners = arg;\n  }\n});\n\nEventEmitter.init = function() {\n\n  if (this._events === undefined ||\n      this._events === Object.getPrototypeOf(this)._events) {\n    this._events = Object.create(null);\n    this._eventsCount = 0;\n  }\n\n  this._maxListeners = this._maxListeners || undefined;\n};\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || NumberIsNaN(n)) {\n    throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received ' + n + '.');\n  }\n  this._maxListeners = n;\n  return this;\n};\n\nfunction _getMaxListeners(that) {\n  if (that._maxListeners === undefined)\n    return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\n\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return _getMaxListeners(this);\n};\n\nEventEmitter.prototype.emit = function emit(type) {\n  var args = [];\n  for (var i = 1; i < arguments.length; i++) args.push(arguments[i]);\n  var doError = (type === 'error');\n\n  var events = this._events;\n  if (events !== undefined)\n    doError = (doError && events.error === undefined);\n  else if (!doError)\n    return false;\n\n  // If there is no 'error' event listener then throw.\n  if (doError) {\n    var er;\n    if (args.length > 0)\n      er = args[0];\n    if (er instanceof Error) {\n      // Note: The comments on the `throw` lines are intentional, they show\n      // up in Node's output if this results in an unhandled exception.\n      throw er; // Unhandled 'error' event\n    }\n    // At least give some kind of context to the user\n    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));\n    err.context = er;\n    throw err; // Unhandled 'error' event\n  }\n\n  var handler = events[type];\n\n  if (handler === undefined)\n    return false;\n\n  if (typeof handler === 'function') {\n    ReflectApply(handler, this, args);\n  } else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      ReflectApply(listeners[i], this, args);\n  }\n\n  return true;\n};\n\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n\n  checkListener(listener);\n\n  events = target._events;\n  if (events === undefined) {\n    events = target._events = Object.create(null);\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener !== undefined) {\n      target.emit('newListener', type,\n                  listener.listener ? listener.listener : listener);\n\n      // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n      events = target._events;\n    }\n    existing = events[type];\n  }\n\n  if (existing === undefined) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] =\n        prepend ? [listener, existing] : [existing, listener];\n      // If we've already got an array, just append.\n    } else if (prepend) {\n      existing.unshift(listener);\n    } else {\n      existing.push(listener);\n    }\n\n    // Check for listener leak\n    m = _getMaxListeners(target);\n    if (m > 0 && existing.length > m && !existing.warned) {\n      existing.warned = true;\n      // No error code for this since it is a Warning\n      // eslint-disable-next-line no-restricted-syntax\n      var w = new Error('Possible EventEmitter memory leak detected. ' +\n                          existing.length + ' ' + String(type) + ' listeners ' +\n                          'added. Use emitter.setMaxListeners() to ' +\n                          'increase limit');\n      w.name = 'MaxListenersExceededWarning';\n      w.emitter = target;\n      w.type = type;\n      w.count = existing.length;\n      ProcessEmitWarning(w);\n    }\n  }\n\n  return target;\n}\n\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.prependListener =\n    function prependListener(type, listener) {\n      return _addListener(this, type, listener, true);\n    };\n\nfunction onceWrapper() {\n  if (!this.fired) {\n    this.target.removeListener(this.type, this.wrapFn);\n    this.fired = true;\n    if (arguments.length === 0)\n      return this.listener.call(this.target);\n    return this.listener.apply(this.target, arguments);\n  }\n}\n\nfunction _onceWrap(target, type, listener) {\n  var state = { fired: false, wrapFn: undefined, target: target, type: type, listener: listener };\n  var wrapped = onceWrapper.bind(state);\n  wrapped.listener = listener;\n  state.wrapFn = wrapped;\n  return wrapped;\n}\n\nEventEmitter.prototype.once = function once(type, listener) {\n  checkListener(listener);\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\n\nEventEmitter.prototype.prependOnceListener =\n    function prependOnceListener(type, listener) {\n      checkListener(listener);\n      this.prependListener(type, _onceWrap(this, type, listener));\n      return this;\n    };\n\n// Emits a 'removeListener' event if and only if the listener was removed.\nEventEmitter.prototype.removeListener =\n    function removeListener(type, listener) {\n      var list, events, position, i, originalListener;\n\n      checkListener(listener);\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      list = events[type];\n      if (list === undefined)\n        return this;\n\n      if (list === listener || list.listener === listener) {\n        if (--this._eventsCount === 0)\n          this._events = Object.create(null);\n        else {\n          delete events[type];\n          if (events.removeListener)\n            this.emit('removeListener', type, list.listener || listener);\n        }\n      } else if (typeof list !== 'function') {\n        position = -1;\n\n        for (i = list.length - 1; i >= 0; i--) {\n          if (list[i] === listener || list[i].listener === listener) {\n            originalListener = list[i].listener;\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0)\n          return this;\n\n        if (position === 0)\n          list.shift();\n        else {\n          spliceOne(list, position);\n        }\n\n        if (list.length === 1)\n          events[type] = list[0];\n\n        if (events.removeListener !== undefined)\n          this.emit('removeListener', type, originalListener || listener);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\n\nEventEmitter.prototype.removeAllListeners =\n    function removeAllListeners(type) {\n      var listeners, events, i;\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      // not listening for removeListener, no need to emit\n      if (events.removeListener === undefined) {\n        if (arguments.length === 0) {\n          this._events = Object.create(null);\n          this._eventsCount = 0;\n        } else if (events[type] !== undefined) {\n          if (--this._eventsCount === 0)\n            this._events = Object.create(null);\n          else\n            delete events[type];\n        }\n        return this;\n      }\n\n      // emit removeListener for all listeners on all events\n      if (arguments.length === 0) {\n        var keys = Object.keys(events);\n        var key;\n        for (i = 0; i < keys.length; ++i) {\n          key = keys[i];\n          if (key === 'removeListener') continue;\n          this.removeAllListeners(key);\n        }\n        this.removeAllListeners('removeListener');\n        this._events = Object.create(null);\n        this._eventsCount = 0;\n        return this;\n      }\n\n      listeners = events[type];\n\n      if (typeof listeners === 'function') {\n        this.removeListener(type, listeners);\n      } else if (listeners !== undefined) {\n        // LIFO order\n        for (i = listeners.length - 1; i >= 0; i--) {\n          this.removeListener(type, listeners[i]);\n        }\n      }\n\n      return this;\n    };\n\nfunction _listeners(target, type, unwrap) {\n  var events = target._events;\n\n  if (events === undefined)\n    return [];\n\n  var evlistener = events[type];\n  if (evlistener === undefined)\n    return [];\n\n  if (typeof evlistener === 'function')\n    return unwrap ? [evlistener.listener || evlistener] : [evlistener];\n\n  return unwrap ?\n    unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\n}\n\nEventEmitter.prototype.listeners = function listeners(type) {\n  return _listeners(this, type, true);\n};\n\nEventEmitter.prototype.rawListeners = function rawListeners(type) {\n  return _listeners(this, type, false);\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\n\nEventEmitter.prototype.listenerCount = listenerCount;\nfunction listenerCount(type) {\n  var events = this._events;\n\n  if (events !== undefined) {\n    var evlistener = events[type];\n\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener !== undefined) {\n      return evlistener.length;\n    }\n  }\n\n  return 0;\n}\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];\n};\n\nfunction arrayClone(arr, n) {\n  var copy = new Array(n);\n  for (var i = 0; i < n; ++i)\n    copy[i] = arr[i];\n  return copy;\n}\n\nfunction spliceOne(list, index) {\n  for (; index + 1 < list.length; index++)\n    list[index] = list[index + 1];\n  list.pop();\n}\n\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n  return ret;\n}\n\nfunction once(emitter, name) {\n  return new Promise(function (resolve, reject) {\n    function errorListener(err) {\n      emitter.removeListener(name, resolver);\n      reject(err);\n    }\n\n    function resolver() {\n      if (typeof emitter.removeListener === 'function') {\n        emitter.removeListener('error', errorListener);\n      }\n      resolve([].slice.call(arguments));\n    };\n\n    eventTargetAgnosticAddListener(emitter, name, resolver, { once: true });\n    if (name !== 'error') {\n      addErrorHandlerIfEventEmitter(emitter, errorListener, { once: true });\n    }\n  });\n}\n\nfunction addErrorHandlerIfEventEmitter(emitter, handler, flags) {\n  if (typeof emitter.on === 'function') {\n    eventTargetAgnosticAddListener(emitter, 'error', handler, flags);\n  }\n}\n\nfunction eventTargetAgnosticAddListener(emitter, name, listener, flags) {\n  if (typeof emitter.on === 'function') {\n    if (flags.once) {\n      emitter.once(name, listener);\n    } else {\n      emitter.on(name, listener);\n    }\n  } else if (typeof emitter.addEventListener === 'function') {\n    // EventTarget does not have `error` event semantics like Node\n    // EventEmitters, we do not listen for `error` events here.\n    emitter.addEventListener(name, function wrapListener(arg) {\n      // IE does not have builtin `{ once: true }` support so we\n      // have to do it manually.\n      if (flags.once) {\n        emitter.removeEventListener(name, wrapListener);\n      }\n      listener(arg);\n    });\n  } else {\n    throw new TypeError('The \"emitter\" argument must be of type EventEmitter. Received type ' + typeof emitter);\n  }\n}\n","/**\n * FastBitSet.js : a fast bit set implementation in JavaScript.\n * (c) the authors\n * Licensed under the Apache License, Version 2.0.\n *\n * Speed-optimized BitSet implementation for modern browsers and JavaScript engines.\n *\n * A BitSet is an ideal data structure to implement a Set when values being stored are\n * reasonably small integers. It can be orders of magnitude faster than a generic set implementation.\n * The FastBitSet implementation optimizes for speed, leveraging commonly available features\n * like typed arrays.\n *\n * Simple usage :\n *  // var FastBitSet = require(\"fastbitset\");// if you use node\n *  var b = new FastBitSet();// initially empty\n *  b.add(1);// add the value \"1\"\n *  b.has(1); // check that the value is present! (will return true)\n *  b.add(2);\n *  console.log(\"\"+b);// should display {1,2}\n *  b.add(10);\n *  b.array(); // would return [1,2,10]\n *\n *  var c = new FastBitSet([1,2,3,10]); // create bitset initialized with values 1,2,3,10\n *  c.difference(b); // from c, remove elements that are in b\n *  var su = c.union_size(b);// compute the size of the union (bitsets are unchanged)\n * c.union(b); // c will contain all elements that are in c and b\n * var s1 = c.intersection_size(b);// compute the size of the intersection (bitsets are unchanged)\n * c.intersection(b); // c will only contain elements that are in both c and b\n * c = b.clone(); // create a (deep) copy of b and assign it to c.\n * c.equals(b); // check whether c and b are equal\n *\n *   See README.md file for a more complete description.\n *\n * You can install the library under node with the command line\n *   npm install fastbitset\n */\n'use strict';\n\nfunction isIterable(obj) {\n  if (obj == null) {\n    return false;\n  }\n  return obj[Symbol.iterator] !== undefined;\n}\n\n// you can provide an iterable\nfunction FastBitSet(iterable) {\n  this.words = []\n  if (isIterable(iterable)) {\n    for (var key of iterable) {\n      this.add(key);\n    }\n  }\n}\n\n// Add the value (Set the bit at index to true)\nFastBitSet.prototype.add = function(index) {\n  this.resize(index);\n  this.words[index >>> 5] |= 1 << index ;\n};\n\n// If the value was not in the set, add it, otherwise remove it (flip bit at index)\nFastBitSet.prototype.flip = function(index) {\n  this.resize(index);\n  this.words[index >>> 5] ^= 1 << index ;\n};\n\n// Remove all values, reset memory usage\nFastBitSet.prototype.clear = function() {\n  this.words = []\n};\n\n// Set the bit at index to false\nFastBitSet.prototype.remove = function(index) {\n  this.resize(index);\n  this.words[index  >>> 5] &= ~(1 << index);\n};\n\n// Return true if no bit is set\nFastBitSet.prototype.isEmpty = function(index) {\n  var c = this.words.length;\n  for (var  i = 0; i < c; i++) {\n    if (this.words[i] !== 0) return false;\n  }\n  return true;\n};\n\n// Is the value contained in the set? Is the bit at index true or false? Returns a boolean\nFastBitSet.prototype.has = function(index) {\n  return (this.words[index  >>> 5] & (1 << index)) !== 0;\n};\n\n// Tries to add the value (Set the bit at index to true), return 1 if the\n// value was added, return 0 if the value was already present\nFastBitSet.prototype.checkedAdd = function(index) {\n  this.resize(index);\n  var word = this.words[index  >>> 5]\n  var newword = word | (1 << index)\n  this.words[index >>> 5] = newword\n  return (newword ^ word) >>> index\n};\n\n\n// Reduce the memory usage to a minimum\nFastBitSet.prototype.trim = function(index) {\n  var nl = this.words.length\n  while ((nl > 0) && (this.words[nl - 1] === 0)) {\n      nl--;\n  }\n  this.words = this.words.slice(0,nl);\n};\n\n\n// Resize the bitset so that we can write a value at index\nFastBitSet.prototype.resize = function(index) {\n  var count = (index + 32) >>> 5;// just what is needed\n  for(var i = this.words.length; i < count; i++) this.words[i] = 0;\n};\n\n// fast function to compute the Hamming weight of a 32-bit unsigned integer\nFastBitSet.prototype.hammingWeight = function(v) {\n  v -= ((v >>> 1) & 0x55555555);// works with signed or unsigned shifts\n  v = (v & 0x33333333) + ((v >>> 2) & 0x33333333);\n  return ((v + (v >>> 4) & 0xF0F0F0F) * 0x1010101) >>> 24;\n};\n\n\n// fast function to compute the Hamming weight of four 32-bit unsigned integers\nFastBitSet.prototype.hammingWeight4 = function(v1,v2,v3,v4) {\n  v1 -= ((v1 >>> 1) & 0x55555555);// works with signed or unsigned shifts\n  v2 -= ((v2 >>> 1) & 0x55555555);// works with signed or unsigned shifts\n  v3 -= ((v3 >>> 1) & 0x55555555);// works with signed or unsigned shifts\n  v4 -= ((v4 >>> 1) & 0x55555555);// works with signed or unsigned shifts\n\n  v1 = (v1 & 0x33333333) + ((v1 >>> 2) & 0x33333333);\n  v2 = (v2 & 0x33333333) + ((v2 >>> 2) & 0x33333333);\n  v3 = (v3 & 0x33333333) + ((v3 >>> 2) & 0x33333333);\n  v4 = (v4 & 0x33333333) + ((v4 >>> 2) & 0x33333333);\n\n  v1 = v1 + (v1 >>> 4) & 0xF0F0F0F;\n  v2 = v2 + (v2 >>> 4) & 0xF0F0F0F;\n  v3 = v3 + (v3 >>> 4) & 0xF0F0F0F;\n  v4 = v4 + (v4 >>> 4) & 0xF0F0F0F;\n  return (( (v1 + v2 + v3 + v4) * 0x1010101) >>> 24);\n};\n\n// How many values stored in the set? How many set bits?\nFastBitSet.prototype.size = function() {\n  var answer = 0;\n  var c = this.words.length;\n  var w = this.words;\n  var i = 0;\n  for (; i < c; i++) {\n    answer += this.hammingWeight(w[i]);\n  }\n  return answer;\n};\n\n// Return an array with the set bit locations (values)\nFastBitSet.prototype.array = function() {\n  var answer = new Array(this.size());\n  var pos = 0 | 0;\n  var c = this.words.length;\n  for (var k = 0; k < c; ++k) {\n    var w =  this.words[k];\n    while (w != 0) {\n      var t = w & -w;\n      answer[pos++] = (k << 5) + this.hammingWeight((t - 1) | 0);\n      w ^= t;\n    }\n  }\n  return answer;\n};\n\n\n// Return an array with the set bit locations (values)\nFastBitSet.prototype.forEach = function(fnc) {\n  var c = this.words.length;\n  for (var k = 0; k < c; ++k) {\n    var w =  this.words[k];\n    while (w != 0) {\n      var t = w & -w;\n      fnc((k << 5) + this.hammingWeight((t - 1) | 0));\n      w ^= t;\n    }\n  }\n};\n\n// Creates a copy of this bitmap\nFastBitSet.prototype.clone = function() {\n  var clone = Object.create(FastBitSet.prototype);\n  clone.words = this.words.slice();\n  return clone;\n};\n\n// Check if this bitset intersects with another one,\n// no bitmap is modified\nFastBitSet.prototype.intersects = function(otherbitmap) {\n  var newcount = Math.min(this.words.length,otherbitmap.words.length);\n  for (var k = 0 | 0; k < newcount; ++k) {\n    if ((this.words[k] & otherbitmap.words[k]) !== 0) return true;\n  }\n  return false;\n};\n\n// Computes the intersection between this bitset and another one,\n// the current bitmap is modified  (and returned by the function)\nFastBitSet.prototype.intersection = function(otherbitmap) {\n  var newcount = Math.min(this.words.length,otherbitmap.words.length);\n  var k = 0 | 0;\n  for (; k + 7 < newcount; k += 8) {\n    this.words[k] &= otherbitmap.words[k];\n    this.words[k + 1] &= otherbitmap.words[k + 1];\n    this.words[k + 2] &= otherbitmap.words[k + 2];\n    this.words[k + 3] &= otherbitmap.words[k + 3];\n    this.words[k + 4] &= otherbitmap.words[k + 4];\n    this.words[k + 5] &= otherbitmap.words[k + 5];\n    this.words[k + 6] &= otherbitmap.words[k + 6];\n    this.words[k + 7] &= otherbitmap.words[k + 7];\n  }\n  for (; k < newcount; ++k) {\n    this.words[k] &= otherbitmap.words[k];\n  }\n  var c = this.words.length;\n  for (var k = newcount; k < c; ++k) {\n    this.words[k] = 0;\n  }\n  return this;\n};\n\n// Computes the size of the intersection between this bitset and another one\nFastBitSet.prototype.intersection_size = function(otherbitmap) {\n  var newcount = Math.min(this.words.length,otherbitmap.words.length);\n  var answer = 0 | 0;\n  for (var k = 0 | 0; k < newcount; ++k) {\n    answer += this.hammingWeight(this.words[k] & otherbitmap.words[k]);\n  }\n\n  return answer;\n};\n\n// Computes the intersection between this bitset and another one,\n// a new bitmap is generated\nFastBitSet.prototype.new_intersection = function(otherbitmap) {\n  var answer = Object.create(FastBitSet.prototype);\n  var count = Math.min(this.words.length,otherbitmap.words.length);\n  answer.words = new Array(count);\n  var c = count;\n  var k = 0 | 0;\n  for (; k + 7  < c; k += 8) {\n      answer.words[k] = this.words[k] & otherbitmap.words[k];\n      answer.words[k+1] = this.words[k+1] & otherbitmap.words[k+1];\n      answer.words[k+2] = this.words[k+2] & otherbitmap.words[k+2];\n      answer.words[k+3] = this.words[k+3] & otherbitmap.words[k+3];\n      answer.words[k+4] = this.words[k+4] & otherbitmap.words[k+4];\n      answer.words[k+5] = this.words[k+5] & otherbitmap.words[k+5];\n      answer.words[k+6] = this.words[k+6] & otherbitmap.words[k+6];\n      answer.words[k+7] = this.words[k+7] & otherbitmap.words[k+7];\n  }\n  for (; k < c; ++k) {\n    answer.words[k] = this.words[k] & otherbitmap.words[k];\n  }\n  return answer;\n};\n\n// Computes the intersection between this bitset and another one,\n// the current bitmap is modified\nFastBitSet.prototype.equals = function(otherbitmap) {\n  var mcount = Math.min(this.words.length , otherbitmap.words.length);\n  for (var k = 0 | 0; k < mcount; ++k) {\n    if (this.words[k] != otherbitmap.words[k]) return false;\n  }\n  if (this.words.length < otherbitmap.words.length) {\n    var c = otherbitmap.words.length;\n    for (var k = this.words.length; k < c; ++k) {\n      if (otherbitmap.words[k] != 0) return false;\n    }\n  } else if (otherbitmap.words.length < this.words.length) {\n    var c = this.words.length;\n    for (var k = otherbitmap.words.length; k < c; ++k) {\n      if (this.words[k] != 0) return false;\n    }\n  }\n  return true;\n};\n\n// Computes the difference between this bitset and another one,\n// the current bitset is modified (and returned by the function)\nFastBitSet.prototype.difference = function(otherbitmap) {\n  var newcount = Math.min(this.words.length,otherbitmap.words.length);\n  var k = 0 | 0;\n  for (; k + 7 < newcount; k += 8) {\n    this.words[k] &= ~otherbitmap.words[k];\n    this.words[k + 1] &= ~otherbitmap.words[k + 1];\n    this.words[k + 2] &= ~otherbitmap.words[k + 2];\n    this.words[k + 3] &= ~otherbitmap.words[k + 3];\n    this.words[k + 4] &= ~otherbitmap.words[k + 4];\n    this.words[k + 5] &= ~otherbitmap.words[k + 5];\n    this.words[k + 6] &= ~otherbitmap.words[k + 6];\n    this.words[k + 7] &= ~otherbitmap.words[k + 7];\n  }\n  for (; k < newcount; ++k) {\n    this.words[k] &= ~otherbitmap.words[k];\n  }\n  return this;\n};\n\n// Computes the size of the difference between this bitset and another one\nFastBitSet.prototype.difference_size = function(otherbitmap) {\n  var newcount = Math.min(this.words.length,otherbitmap.words.length);\n  var answer = 0 | 0;\n  var k = 0 | 0;\n  for (; k < newcount; ++k) {\n    answer += this.hammingWeight(this.words[k] & (~otherbitmap.words[k]));\n  }\n  var c = this.words.length;\n  for (; k < c; ++k) {\n    answer += this.hammingWeight(this.words[k]);\n  }\n  return answer;\n};\n\n// Returns a string representation\nFastBitSet.prototype.toString = function() {\n  return '{' + this.array().join(',') + '}';\n};\n\n// Computes the union between this bitset and another one,\n// the current bitset is modified  (and returned by the function)\nFastBitSet.prototype.union = function(otherbitmap) {\n  var mcount = Math.min(this.words.length,otherbitmap.words.length);\n  var k = 0 | 0;\n  for (; k + 7  < mcount; k += 8) {\n    this.words[k] |= otherbitmap.words[k];\n    this.words[k + 1] |= otherbitmap.words[k + 1];\n    this.words[k + 2] |= otherbitmap.words[k + 2];\n    this.words[k + 3] |= otherbitmap.words[k + 3];\n    this.words[k + 4] |= otherbitmap.words[k + 4];\n    this.words[k + 5] |= otherbitmap.words[k + 5];\n    this.words[k + 6] |= otherbitmap.words[k + 6];\n    this.words[k + 7] |= otherbitmap.words[k + 7];\n  }\n  for (; k < mcount; ++k) {\n    this.words[k] |= otherbitmap.words[k];\n  }\n  if (this.words.length < otherbitmap.words.length) {\n    this.resize((otherbitmap.words.length  << 5) - 1);\n    var c = otherbitmap.words.length;\n    for (var k = mcount; k < c; ++k) {\n      this.words[k] = otherbitmap.words[k];\n    }\n  }\n  return this;\n};\n\nFastBitSet.prototype.new_union = function(otherbitmap) {\n  var answer = Object.create(FastBitSet.prototype);\n  var count = Math.max(this.words.length,otherbitmap.words.length);\n  answer.words = new Array(count);\n  var mcount = Math.min(this.words.length,otherbitmap.words.length)\n  var k = 0;\n  for (; k + 7  < mcount; k += 8) {\n      answer.words[k] = this.words[k] | otherbitmap.words[k];\n      answer.words[k+1] = this.words[k+1] | otherbitmap.words[k+1];\n      answer.words[k+2] = this.words[k+2] | otherbitmap.words[k+2];\n      answer.words[k+3] = this.words[k+3] | otherbitmap.words[k+3];\n      answer.words[k+4] = this.words[k+4] | otherbitmap.words[k+4];\n      answer.words[k+5] = this.words[k+5] | otherbitmap.words[k+5];\n      answer.words[k+6] = this.words[k+6] | otherbitmap.words[k+6];\n      answer.words[k+7] = this.words[k+7] | otherbitmap.words[k+7];\n  }\n  for (; k < mcount; ++k) {\n      answer.words[k] = this.words[k] | otherbitmap.words[k];\n  }\n  var c = this.words.length;\n  for (var k = mcount; k < c; ++k) {\n      answer.words[k] = this.words[k] ;\n  }\n  var c2 = otherbitmap.words.length;\n  for (var k = mcount; k < c2; ++k) {\n      answer.words[k] = otherbitmap.words[k] ;\n  }\n  return answer;\n};\n\n\n// Computes the difference between this bitset and another one,\n// a new bitmap is generated\nFastBitSet.prototype.new_difference = function(otherbitmap) {\n  return this.clone().difference(otherbitmap);// should be fast enough\n};\n\n// Computes the size union between this bitset and another one\nFastBitSet.prototype.union_size = function(otherbitmap) {\n  var mcount = Math.min(this.words.length,otherbitmap.words.length);\n  var answer = 0 | 0;\n  for (var k = 0 | 0; k < mcount; ++k) {\n    answer += this.hammingWeight(this.words[k] | otherbitmap.words[k]);\n  }\n  if (this.words.length < otherbitmap.words.length) {\n    var c = otherbitmap.words.length;\n    for (var k = this.words.length ; k < c; ++k) {\n      answer += this.hammingWeight(otherbitmap.words[k] | 0);\n    }\n  } else {\n    var c = this.words.length;\n    for (var k = otherbitmap.words.length ; k < c; ++k) {\n      answer += this.hammingWeight(this.words[k] | 0);\n    }\n  }\n  return answer;\n};\n\n\n\n\n///////////////\n\nmodule.exports = FastBitSet;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Archetype = void 0;\nconst fastbitset_1 = __importDefault(require(\"fastbitset\"));\nclass Archetype {\n    constructor(componentTypes) {\n        this.componentBits = new fastbitset_1.default();\n        this.componentBitsInitialized = false;\n        this.componentTypes = componentTypes;\n    }\n}\nexports.Archetype = Archetype;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Component = void 0;\nclass Component {\n}\nexports.Component = Component;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ComponentMapper = void 0;\nclass ComponentMapper {\n    constructor() {\n        this.data = [];\n    }\n    add(entityId, component) {\n        this.data[entityId] = component;\n    }\n    get(entityId) {\n        return this.data[entityId];\n    }\n    remove(entityId) {\n        delete this.data[entityId];\n    }\n}\nexports.ComponentMapper = ComponentMapper;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.EntityIteratingSystem = void 0;\nconst System_1 = require(\"./System\");\nconst fastbitset_1 = __importDefault(require(\"fastbitset\"));\nclass EntityIteratingSystem extends System_1.System {\n    constructor(types) {\n        super();\n        this.componentBits = new fastbitset_1.default();\n        this.types = types;\n    }\n    setWorld(world) {\n        super.setWorld(world);\n        for (let type of this.types) {\n            this.componentBits.add(world.getComponentIndex(type));\n        }\n    }\n    process() {\n        this.begin();\n        this.world.getEntities(this.componentBits, this.processEntity.bind(this));\n        this.end();\n    }\n    begin() { }\n    end() { }\n}\nexports.EntityIteratingSystem = EntityIteratingSystem;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.EntitySystem = void 0;\nconst EntityIteratingSystem_1 = require(\"./EntityIteratingSystem\");\nclass EntitySystem extends EntityIteratingSystem_1.EntityIteratingSystem {\n    constructor() {\n        super(...arguments);\n        this.entities = [];\n    }\n    process() {\n        this.entities.length = 0;\n        this.begin();\n        this.world.getEntities(this.componentBits, this.processEntity.bind(this));\n        this.processEntities(this.entities);\n        this.end();\n    }\n    processEntity(entityId) {\n        this.entities.push(entityId);\n    }\n}\nexports.EntitySystem = EntitySystem;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Inject = void 0;\nfunction Inject(name) {\n    return (target, propName) => {\n        const targetType = target.constructor;\n        if (!targetType.hasOwnProperty('__inject__')) {\n            targetType.__inject__ = {};\n        }\n        targetType.__inject__[propName] = name;\n    };\n}\nexports.Inject = Inject;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.InjectMapper = void 0;\nfunction InjectMapper(type) {\n    return (target, propName) => {\n        const targetType = target.constructor;\n        if (!targetType.hasOwnProperty('__injectMapper__')) {\n            targetType.__injectMapper__ = {};\n        }\n        targetType.__injectMapper__[propName] = type;\n    };\n}\nexports.InjectMapper = InjectMapper;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.System = void 0;\nclass System {\n    setWorld(world) {\n        this.world = world;\n    }\n    initialized() { }\n    dispose() { }\n}\nexports.System = System;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst fastbitset_1 = __importDefault(require(\"fastbitset\"));\nconst ComponentMapper_1 = require(\"./ComponentMapper\");\nclass World {\n    constructor() {\n        this.index = 0;\n        this.mappers = {};\n        this.componentBitsMap = [];\n        this.componentIndices = new Map();\n        this.currentComponentIndex = 0;\n        this.activeSystems = [];\n        this.passiveSystems = [];\n        this.injectionRegistry = {};\n        this.delta = 0;\n    }\n    getNewId() {\n        return this.index++;\n    }\n    createEntity() {\n        const id = this.getNewId();\n        return id;\n    }\n    getComponentBits(entityId) {\n        if (!this.componentBitsMap[entityId]) {\n            this.componentBitsMap[entityId] = new fastbitset_1.default();\n        }\n        return this.componentBitsMap[entityId];\n    }\n    getMapper(type) {\n        const typeIndex = this.getComponentIndex(type);\n        return this.getMapperByIndex(typeIndex);\n    }\n    getMapperByIndex(typeIndex) {\n        if (!this.mappers[typeIndex]) {\n            this.mappers[typeIndex] = new ComponentMapper_1.ComponentMapper();\n        }\n        return this.mappers[typeIndex];\n    }\n    getComponentIndex(type) {\n        let index = this.componentIndices.get(type);\n        if (index === undefined) {\n            index = this.currentComponentIndex++;\n            this.componentIndices.set(type, index);\n        }\n        return index;\n    }\n    createEntityByArchetype(archetype) {\n        const id = this.getNewId();\n        archetype.componentTypes.forEach(type => {\n            const component = new type();\n            if (!archetype.componentBitsInitialized) {\n                archetype.componentBits.add(this.getComponentIndex(type));\n            }\n            this.addComponent(id, component, false);\n        });\n        this.componentBitsMap[id] = archetype.componentBits;\n        return id;\n    }\n    addComponent(entityId, component, updateComponentBits = true) {\n        const typeIndex = this.getComponentIndex(component.constructor);\n        const mapper = this.getMapperByIndex(typeIndex);\n        mapper.add(entityId, component);\n        if (updateComponentBits)\n            this.getComponentBits(entityId).add(typeIndex);\n        return component;\n    }\n    getComponent(entityId, type) {\n        const mapper = this.getMapper(type);\n        return mapper.get(entityId);\n    }\n    getEntities(componentBits, iterator) {\n        for (let i = 0; i < this.componentBitsMap.length; i++) {\n            if (this.componentBitsMap[i]) {\n                const entityComponentBits = this.componentBitsMap[i];\n                if (componentBits.union_size(entityComponentBits) === entityComponentBits.size()) {\n                    iterator(i);\n                }\n            }\n        }\n    }\n    addSystem(system, active = true) {\n        active ? this.activeSystems.push(system) : this.passiveSystems.push(system);\n        system.setWorld(this);\n        this.injectMapper(system);\n        this.inject(system);\n        system.initialized();\n    }\n    injectMapper(system) {\n        const type = system.constructor;\n        const injectPoints = type.__injectMapper__ || {};\n        for (let injectKey in injectPoints) {\n            const componentType = injectPoints[injectKey];\n            system[injectKey] = this.getMapper(componentType);\n        }\n    }\n    register(name, value) {\n        this.injectionRegistry[name] = value;\n    }\n    inject(object) {\n        const type = object.constructor;\n        const injectPoints = type.__inject__ || {};\n        for (let injectKey in injectPoints) {\n            const injectName = injectPoints[injectKey];\n            object[injectKey] = this.injectionRegistry[injectName];\n        }\n    }\n    dispose() {\n        for (let system of this.activeSystems) {\n            system.dispose();\n        }\n        for (let system of this.passiveSystems) {\n            system.dispose();\n        }\n    }\n    setDelta(delta) {\n        this.delta = delta;\n    }\n    processActiveSystem() {\n        for (let system of this.activeSystems) {\n            system.process();\n        }\n    }\n    processPassiveSystem() {\n        for (let system of this.passiveSystems) {\n            system.process();\n        }\n    }\n    deleteEntity(entityId) {\n        for (let type in this.mappers) {\n            this.mappers[type].remove(entityId);\n        }\n        delete this.componentBitsMap[entityId];\n    }\n    isEntityActive(entityId) {\n        return !!this.componentBitsMap[entityId];\n    }\n}\nexports.default = World;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar World_1 = require(\"./World\");\nObject.defineProperty(exports, \"World\", { enumerable: true, get: function () { return World_1.default; } });\nvar Archetype_1 = require(\"./Archetype\");\nObject.defineProperty(exports, \"Archetype\", { enumerable: true, get: function () { return Archetype_1.Archetype; } });\nvar Component_1 = require(\"./Component\");\nObject.defineProperty(exports, \"Component\", { enumerable: true, get: function () { return Component_1.Component; } });\nvar ComponentMapper_1 = require(\"./ComponentMapper\");\nObject.defineProperty(exports, \"ComponentMapper\", { enumerable: true, get: function () { return ComponentMapper_1.ComponentMapper; } });\nvar EntityIteratingSystem_1 = require(\"./EntityIteratingSystem\");\nObject.defineProperty(exports, \"EntityIteratingSystem\", { enumerable: true, get: function () { return EntityIteratingSystem_1.EntityIteratingSystem; } });\nvar EntitySystem_1 = require(\"./EntitySystem\");\nObject.defineProperty(exports, \"EntitySystem\", { enumerable: true, get: function () { return EntitySystem_1.EntitySystem; } });\nvar System_1 = require(\"./System\");\nObject.defineProperty(exports, \"System\", { enumerable: true, get: function () { return System_1.System; } });\nvar InjectMapper_1 = require(\"./InjectMapper\");\nObject.defineProperty(exports, \"InjectMapper\", { enumerable: true, get: function () { return InjectMapper_1.InjectMapper; } });\nvar Inject_1 = require(\"./Inject\");\nObject.defineProperty(exports, \"Inject\", { enumerable: true, get: function () { return Inject_1.Inject; } });\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Animation = exports.PlayMode = void 0;\r\nvar PlayMode;\r\n(function (PlayMode) {\r\n    PlayMode[PlayMode[\"NORMAL\"] = 0] = \"NORMAL\";\r\n    PlayMode[PlayMode[\"LOOP\"] = 1] = \"LOOP\";\r\n    PlayMode[PlayMode[\"LOOP_PINGPONG\"] = 2] = \"LOOP_PINGPONG\";\r\n    PlayMode[PlayMode[\"REVERSED\"] = 3] = \"REVERSED\";\r\n    PlayMode[PlayMode[\"LOOP_REVERSED\"] = 4] = \"LOOP_REVERSED\";\r\n})(PlayMode = exports.PlayMode || (exports.PlayMode = {}));\r\nclass Animation {\r\n    constructor(keyFrames, frameDurations) {\r\n        this.totalDuration = 0;\r\n        this.keyFrames = keyFrames;\r\n        if (!Array.isArray(frameDurations)) {\r\n            frameDurations = [frameDurations];\r\n        }\r\n        const lastDuration = frameDurations[frameDurations.length - 1] || 0;\r\n        while (frameDurations.length < keyFrames.length) {\r\n            frameDurations.push(lastDuration);\r\n        }\r\n        for (let fD of frameDurations) {\r\n            this.totalDuration += fD;\r\n        }\r\n        this.frameDurations = frameDurations;\r\n    }\r\n    getFrameNumber(stateTimeRemainder, reverse = false) {\r\n        const { frameDurations } = this;\r\n        let fN = reverse ? frameDurations.length - 1 : 0;\r\n        while (true) {\r\n            stateTimeRemainder -= frameDurations[fN];\r\n            if (stateTimeRemainder < 0) {\r\n                break;\r\n            }\r\n            reverse ? fN-- : fN++;\r\n        }\r\n        return fN;\r\n    }\r\n    getKeyFrame(stateTime, mode) {\r\n        const { keyFrames, frameDurations, totalDuration } = this;\r\n        const runIndex = Math.floor(stateTime / totalDuration);\r\n        const stateTimeRemainder = stateTime % totalDuration;\r\n        let frameNumber = 0;\r\n        switch (mode) {\r\n            case PlayMode.NORMAL:\r\n                frameNumber = runIndex === 0 ? this.getFrameNumber(stateTimeRemainder) : frameDurations.length - 1;\r\n                break;\r\n            case PlayMode.LOOP:\r\n                frameNumber = this.getFrameNumber(stateTimeRemainder);\r\n                break;\r\n            case PlayMode.LOOP_PINGPONG:\r\n                frameNumber = this.getFrameNumber(stateTimeRemainder, runIndex % 2 === 1);\r\n                break;\r\n            case PlayMode.REVERSED:\r\n                frameNumber = runIndex === 0 ? this.getFrameNumber(stateTimeRemainder, true) : 0;\r\n                break;\r\n            case PlayMode.LOOP_REVERSED:\r\n                frameNumber = this.getFrameNumber(stateTimeRemainder, true);\r\n                break;\r\n            default:\r\n        }\r\n        return keyFrames[frameNumber];\r\n    }\r\n}\r\nexports.Animation = Animation;\r\n","\"use strict\";\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.AssetManager = void 0;\r\nconst BitmapFont_1 = require(\"./BitmapFont\");\r\nconst Texture_1 = require(\"./Texture\");\r\nconst TextureAtlas_1 = require(\"./TextureAtlas\");\r\nclass AssetManager {\r\n    constructor(gl) {\r\n        this.promises = [];\r\n        this.atlases = new Map();\r\n        this.textures = new Map();\r\n        this.jsonData = new Map();\r\n        this.binaryData = new Map();\r\n        this.done = 0;\r\n        this.listeners = [];\r\n        this.fonts = new Map();\r\n        this.gl = gl;\r\n    }\r\n    addListener(handler) {\r\n        this.listeners.push(handler);\r\n    }\r\n    reportDone() {\r\n        this.done++;\r\n        for (const handler of this.listeners) {\r\n            handler((this.done / this.getTotal()) * 100, this.done >= this.getTotal());\r\n        }\r\n    }\r\n    loadAtlas(path, name) {\r\n        const promise = TextureAtlas_1.TextureAtlas.load(this.gl, path, {}).then(atlas => {\r\n            this.atlases.set(name, atlas);\r\n            this.reportDone();\r\n            return atlas;\r\n        });\r\n        this.promises.push(promise);\r\n        return promise;\r\n    }\r\n    getAtlas(name) {\r\n        return this.atlases.get(name);\r\n    }\r\n    loadJsonData(path, name) {\r\n        const promise = fetch(path)\r\n            .then(res => res.json())\r\n            .then(json => {\r\n            this.jsonData.set(name, json);\r\n            this.reportDone();\r\n            return json;\r\n        });\r\n        this.promises.push(promise);\r\n        return promise;\r\n    }\r\n    getJsonData(name) {\r\n        return this.jsonData.get(name);\r\n    }\r\n    loadBinaryData(path, name) {\r\n        const promise = fetch(path)\r\n            .then(res => res.arrayBuffer())\r\n            .then(buffer => {\r\n            this.binaryData.set(name, buffer);\r\n            this.reportDone();\r\n            return buffer;\r\n        });\r\n        this.promises.push(promise);\r\n        return promise;\r\n    }\r\n    getBinaryData(name) {\r\n        return this.binaryData.get(name);\r\n    }\r\n    loadFont(path, name, flip = false) {\r\n        const promise = BitmapFont_1.BitmapFont.load(this.gl, path, flip).then(font => {\r\n            this.fonts.set(name, font);\r\n            this.reportDone();\r\n            return font;\r\n        });\r\n        this.promises.push(promise);\r\n        return promise;\r\n    }\r\n    getFont(name) {\r\n        return this.fonts.get(name);\r\n    }\r\n    loadTexture(path, name) {\r\n        const promise = Texture_1.Texture.load(this.gl, path).then(texture => {\r\n            this.textures.set(name, texture);\r\n            this.reportDone();\r\n            return texture;\r\n        });\r\n        this.promises.push(promise);\r\n        return promise;\r\n    }\r\n    getTexture(name) {\r\n        return this.textures.get(name);\r\n    }\r\n    finishLoading() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            yield Promise.all(this.promises);\r\n        });\r\n    }\r\n    getDone() {\r\n        return this.done;\r\n    }\r\n    getTotal() {\r\n        return this.promises.length;\r\n    }\r\n    disposeAll() {\r\n        const atlasKeys = [...this.atlases.keys()];\r\n        atlasKeys.forEach(key => {\r\n            var _a;\r\n            const textureRegions = ((_a = this.atlases.get(key)) === null || _a === void 0 ? void 0 : _a.getRegions()) || [];\r\n            textureRegions.forEach(texture => {\r\n                var _a;\r\n                (_a = texture.texture) === null || _a === void 0 ? void 0 : _a.destroy();\r\n            });\r\n            this.atlases.delete(key);\r\n        });\r\n        const localTextureKeys = [...this.textures.keys()];\r\n        localTextureKeys.forEach(key => {\r\n            var _a;\r\n            (_a = this.textures.get(key)) === null || _a === void 0 ? void 0 : _a.destroy();\r\n            this.textures.delete(key);\r\n        });\r\n        const fontMapKeys = [...this.fonts.keys()];\r\n        fontMapKeys.forEach(key => {\r\n            var _a;\r\n            const textureRegions = ((_a = this.fonts.get(key)) === null || _a === void 0 ? void 0 : _a.getRegions()) || [];\r\n            textureRegions.forEach(texture => {\r\n                var _a;\r\n                (_a = texture.texture) === null || _a === void 0 ? void 0 : _a.destroy();\r\n            });\r\n            this.fonts.delete(key);\r\n        });\r\n    }\r\n}\r\nexports.AssetManager = AssetManager;\r\nexports.default = AssetManager;\r\n","\"use strict\";\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar _a;\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.BitmapFont = void 0;\r\nconst BitmapFontCache_1 = require(\"./BitmapFontCache\");\r\nconst BitmapFontData_1 = require(\"./BitmapFontData\");\r\nconst Utils_1 = require(\"./Utils\");\r\nclass BitmapFont {\r\n    /** Constructs a new BitmapFont from the given {@link BitmapFontData} and array of {@link TextureRegion}. If the TextureRegion\r\n     * is null or empty, the image path(s) will be read from the BitmapFontData. The dispose() method will not dispose the texture\r\n     * of the region(s) if the regions array is != null and not empty.\r\n     * @param integer If true, rendering positions will be at integer values to avoid filtering artifacts. */\r\n    constructor(data, regions, integer) {\r\n        this.load = (data) => {\r\n            const glyphValues = Object.values(data.glyphs);\r\n            for (let i = 0; i < glyphValues.length; i++) {\r\n                const page = glyphValues[i];\r\n                if (!page)\r\n                    continue;\r\n                for (let j = 0; j < page.length; j++) {\r\n                    const glyph = page[j];\r\n                    if (glyph) {\r\n                        data.setGlyphRegion(glyph, this.regions[glyph.page]);\r\n                    }\r\n                }\r\n            }\r\n            if (data.missingGlyph != null)\r\n                data.setGlyphRegion(data.missingGlyph, this.regions[data.missingGlyph.page]);\r\n        };\r\n        /** Draws text at the specified position.\r\n         * @see BitmapFontCache#addText(CharSequence, float, float, int, int, float, int, boolean, String) */\r\n        this.draw = (batch, str, x, y, targetWidth, halign = Utils_1.Align.left, wrap = true, start = 0, end = str.length, truncate) => {\r\n            this.cache.clear();\r\n            this.cache.addText(str, x, y, start, end, targetWidth, halign, wrap, truncate);\r\n            this.cache.draw(batch);\r\n        };\r\n        /** Returns the color of text drawn with this font. */\r\n        this.getColor = () => {\r\n            return this.cache.getColor();\r\n        };\r\n        /** A convenience method for setting the font color. The color can also be set by modifying {@link #getColor()}. */\r\n        // setColor = (r: number, g: number, b: number, a: number) => {\r\n        //    this.cache.getColor().set(r, g, b, a);\r\n        // };\r\n        this.getScaleX = () => {\r\n            return this.data.scaleX;\r\n        };\r\n        this.getScaleY = () => {\r\n            return this.data.scaleY;\r\n        };\r\n        /** Returns the array of TextureRegions that represents each texture page of glyphs.\r\n         * @return the array of texture regions; modifying it may produce undesirable results */\r\n        this.getRegions = () => {\r\n            return this.regions;\r\n        };\r\n        /** Returns the texture page at the given index.\r\n         * @return the texture page at the given index */\r\n        this.getRegion = (index) => {\r\n            return this.regions[index];\r\n        };\r\n        /** Returns the line height, which is the distance from one line of text to the next. */\r\n        this.getLineHeight = () => {\r\n            return this.data.lineHeight;\r\n        };\r\n        /** Returns the x-advance of the space character. */\r\n        this.getSpaceXadvance = () => {\r\n            return this.data.spaceXadvance;\r\n        };\r\n        /** Returns the x-height, which is the distance from the top of most lowercase characters to the baseline. */\r\n        this.getXHeight = () => {\r\n            return this.data.xHeight;\r\n        };\r\n        /** Returns the cap height, which is the distance from the top of most uppercase characters to the baseline. Since the drawing\r\n         * position is the cap height of the first line, the cap height can be used to get the location of the baseline. */\r\n        this.getCapHeight = () => {\r\n            return this.data.capHeight;\r\n        };\r\n        /** Returns the ascent, which is the distance from the cap height to the top of the tallest glyph. */\r\n        this.getAscent = () => {\r\n            return this.data.ascent;\r\n        };\r\n        /** Returns the descent, which is the distance from the bottom of the glyph that extends the lowest to the baseline. This\r\n         * number is negative. */\r\n        this.getDescent = () => {\r\n            return this.data.descent;\r\n        };\r\n        /** Returns true if this BitmapFont has been flipped for use with a y-down coordinate system. */\r\n        this.isFlipped = () => {\r\n            return this.flipped;\r\n        };\r\n        /** Disposes the texture used by this BitmapFont's region IF this BitmapFont created the texture. */\r\n        this.dispose = () => {\r\n            if (this.ownsTexture) {\r\n                for (let i = 0; i < this.regions.length; i++) {\r\n                    this.regions[i].texture.dispose();\r\n                }\r\n            }\r\n        };\r\n        /** Makes the specified glyphs fixed width. This can be useful to make the numbers in a font fixed width. Eg, when horizontally\r\n         * centering a score or loading percentage text, it will not jump around as different numbers are shown. */\r\n        this.setFixedWidthGlyphs = (glyphs) => {\r\n            const data = this.data;\r\n            let maxAdvance = 0;\r\n            for (let index = 0, end = glyphs.length; index < end; index++) {\r\n                const g = data.getGlyph(glyphs.charAt(index));\r\n                if (g != null && g.xadvance > maxAdvance)\r\n                    maxAdvance = g.xadvance;\r\n            }\r\n            for (let index = 0, end = glyphs.length; index < end; index++) {\r\n                const g = data.getGlyph(glyphs.charAt(index));\r\n                if (!g)\r\n                    continue;\r\n                g.xoffset += (maxAdvance - g.xadvance) / 2;\r\n                g.xadvance = maxAdvance;\r\n                g.kerning = [];\r\n                g.kerning = null;\r\n                g.fixedWidth = true;\r\n            }\r\n        };\r\n        /** Specifies whether to use integer positions. Default is to use them so filtering doesn't kick in as badly. */\r\n        this.setUseIntegerPositions = (integer) => {\r\n            this.integer = integer;\r\n            this.cache.setUseIntegerPositions(integer);\r\n        };\r\n        /** Checks whether this font uses integer positions for drawing. */\r\n        this.usesIntegerPositions = () => {\r\n            return this.integer;\r\n        };\r\n        /** For expert usage -- returns the BitmapFontCache used by this font, for rendering to a sprite batch. This can be used, for\r\n         * example, to manipulate glyph colors within a specific index.\r\n         * @return the bitmap font cache used by this font */\r\n        this.getCache = () => {\r\n            return this.cache;\r\n        };\r\n        /** Gets the underlying {@link BitmapFontData} for this BitmapFont. */\r\n        this.getData = () => {\r\n            return this.data;\r\n        };\r\n        /** @return whether the texture is owned by the font, font disposes the texture itself if true */\r\n        this.getOwnsTexture = () => {\r\n            return this.ownsTexture;\r\n        };\r\n        /** Sets whether the font owns the texture. In case it does, the font will also dispose of the texture when {@link #dispose()}\r\n         * is called. Use with care!\r\n         * @param ownsTexture whether the font owns the texture */\r\n        this.setOwnsTexture = (ownsTexture) => {\r\n            this.ownsTexture = ownsTexture;\r\n        };\r\n        /** Creates a new BitmapFontCache for this font. Using this method allows the font to provide the BitmapFontCache\r\n         * implementation to customize rendering.\r\n         * <p>\r\n         * Note this method is called by the BitmapFont constructors. If a subclass overrides this method, it will be called before the\r\n         * subclass constructors. */\r\n        this.newFontCache = () => {\r\n            return new BitmapFontCache_1.BitmapFontCache(this, this.integer);\r\n        };\r\n        this.regions = regions;\r\n        this.flipped = data.flipped;\r\n        this.data = data;\r\n        this.integer = integer;\r\n        if (this.regions.length === 0) {\r\n            console.log('No texture region were found');\r\n            return;\r\n        }\r\n        else {\r\n            this.ownsTexture = false;\r\n        }\r\n        this.cache = this.newFontCache();\r\n        this.load(data);\r\n    }\r\n}\r\nexports.BitmapFont = BitmapFont;\r\n_a = BitmapFont;\r\nBitmapFont.load = (gl, fontFile, flip = false, interger = false) => __awaiter(void 0, void 0, void 0, function* () {\r\n    const fontData = new BitmapFontData_1.BitmapFontData(fontFile, flip);\r\n    yield fontData.loadFont(gl);\r\n    return new BitmapFont(fontData, fontData.regions, interger);\r\n});\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.BitmapFontCache = void 0;\r\nconst GlyphLayout_1 = require(\"./GlyphLayout\");\r\nconst NumberUtils_1 = require(\"./NumberUtils\");\r\nconst Utils_1 = require(\"./Utils\");\r\nclass BitmapFontCache {\r\n    /** @param integer If true, rendering positions will be at integer values to avoid filtering artifacts. */\r\n    constructor(font, integer) {\r\n        this.tempColor = new Utils_1.Color(1, 1, 1, 1);\r\n        this.drawingTexts = [];\r\n        this.layouts = [];\r\n        this.pooledLayouts = [];\r\n        this.color = new Utils_1.Color(1, 1, 1, 1);\r\n        /** Sets the position of the text, relative to the position when the cached text was created.\r\n         * @param x The x coordinate\r\n         * @param y The y coordinate */\r\n        this.setPosition = (x, y) => {\r\n            this.translate(x - this.x, y - this.y);\r\n        };\r\n        /** Sets the position of the text, relative to its current position.\r\n         * @param xAmount The amount in x to move the text\r\n         * @param yAmount The amount in y to move the text */\r\n        this.translate = (xAmount, yAmount) => {\r\n            if (xAmount === 0 && yAmount === 0)\r\n                return;\r\n            if (this.integer) {\r\n                xAmount = Math.round(xAmount);\r\n                yAmount = Math.round(yAmount);\r\n            }\r\n            this.x += xAmount;\r\n            this.y += yAmount;\r\n            const pageVertices = this.pageVertices;\r\n            for (let i = 0, n = pageVertices.length; i < n; i++) {\r\n                const vertices = pageVertices[i];\r\n                for (let ii = 0, nn = this.idx[i]; ii < nn; ii += 5) {\r\n                    vertices[ii] += xAmount;\r\n                    vertices[ii + 1] += yAmount;\r\n                }\r\n            }\r\n        };\r\n        /** Tints all text currently in the cache. Does not affect subsequently added text. */\r\n        // public tint = (tint: Color) => {\r\n        //    const newTint: number = tint.toFloatBits();\r\n        //    if (this.currentTint == newTint) return;\r\n        //    this.currentTint = newTint;\r\n        //    const pageVertices: number[][] = this.pageVertices;\r\n        //    const tempColor: Color = this.tempColor;\r\n        //    const tempGlyphCount: number[] = this.tempGlyphCount;\r\n        //    for (let i = 0; i < tempGlyphCount.length; i++) {\r\n        //       tempGlyphCount[i] = 0;\r\n        //    }\r\n        //    for (let i = 0, n = this.layouts.length; i < n; i++) {\r\n        //       const layout: GlyphLayout = this.layouts[i];\r\n        //       const colors: number[] = layout.colors;\r\n        //       let colorsIndex = 0,\r\n        //          nextColorGlyphIndex = 0,\r\n        //          glyphIndex = 0;\r\n        //       let lastColorFloatBits = 0;\r\n        //       for (let ii = 0, nn = layout.runs.length; ii < nn; ii++) {\r\n        //          const run: GlyphRun = layout.runs[ii];\r\n        //          const glyphs: Glyph[] = run.glyphs;\r\n        //          for (let iii = 0, nnn = run.glyphs.length; iii < nnn; iii++) {\r\n        //             if (glyphIndex++ === nextColorGlyphIndex) {\r\n        //                Color.abgr8888ToColor(tempColor, colors[++colorsIndex]);\r\n        //                lastColorFloatBits = tempColor.mul(tint).toFloatBits();\r\n        //                nextColorGlyphIndex = ++colorsIndex < colors.length ? colors[colorsIndex] : -1;\r\n        //             }\r\n        //             const page: number = glyphs[iii].page;\r\n        //             const offset = tempGlyphCount[page] * 20 + 2;\r\n        //             tempGlyphCount[page]++;\r\n        //             const vertices: number[] = pageVertices[page];\r\n        //             vertices[offset] = lastColorFloatBits;\r\n        //             vertices[offset + 5] = lastColorFloatBits;\r\n        //             vertices[offset + 10] = lastColorFloatBits;\r\n        //             vertices[offset + 15] = lastColorFloatBits;\r\n        //          }\r\n        //       }\r\n        //    }\r\n        // };\r\n        /** Sets the alpha component of all text currently in the cache. Does not affect subsequently added text. */\r\n        // public setAlphas = (alpha: number) => {\r\n        //    const alphaBits: number = (254 * alpha) << 24;\r\n        //    let prev = 0,\r\n        //       newColor = 0;\r\n        //    for (let j = 0, length = this.pageVertices.length; j < length; j++) {\r\n        //       const vertices: number[] = this.pageVertices[j];\r\n        //       for (let i = 2, n = this.idx[j]; i < n; i += 5) {\r\n        //          const c: number = vertices[i];\r\n        //          if (c == prev && i != 2) {\r\n        //             vertices[i] = newColor;\r\n        //          } else {\r\n        //             prev = c;\r\n        //             let rgba = NumberUtils.floatToIntColor(c);\r\n        //             rgba = (rgba & 0x00ffffff) | alphaBits;\r\n        //             newColor = NumberUtils.intToFloatColor(rgba);\r\n        //             vertices[i] = newColor;\r\n        //          }\r\n        //       }\r\n        //    }\r\n        // };\r\n        this.setColors = (r, g, b, a) => {\r\n            const intBits = (255 << 24) | ((255 * b) << 16) | ((255 * g) << 8) | (255 * r);\r\n            const value = NumberUtils_1.NumberUtil.intToFloatColor(intBits);\r\n            for (let j = 0, length = this.pageVertices.length; j < length; j++) {\r\n                const vertices = this.pageVertices[j];\r\n                for (let i = 2, n = this.idx[j]; i < n; i += 5)\r\n                    vertices[i] = value;\r\n            }\r\n        };\r\n        /** Returns the color used for subsequently added text. Modifying the color affects text subsequently added to the cache, but\r\n         * does not affect existing text currently in the cache. */\r\n        this.getColor = () => {\r\n            return this.color;\r\n        };\r\n        /** A convenience method for setting the cache color. The color can also be set by modifying {@link #getColor()}. */\r\n        this.setColor = (r, g, b, a) => {\r\n            this.color.set(r, g, b, a);\r\n        };\r\n        /** Removes all glyphs in the cache. */\r\n        this.clear = () => {\r\n            this.x = 0;\r\n            this.y = 0;\r\n            Utils_1.Pools.freeAll('GlyphLayout', this.pooledLayouts);\r\n            this.pooledLayouts.length = 0;\r\n            this.layouts.length = 0;\r\n            for (let i = 0, n = this.idx.length; i < n; i++) {\r\n                if (this.pageGlyphIndices != null)\r\n                    this.pageGlyphIndices[i].length = 0;\r\n                this.idx[i] = 0;\r\n            }\r\n        };\r\n        this.requireGlyphs = (layout) => {\r\n            if (this.pageVertices.length === 1) {\r\n                // Simple if we just have one page.\r\n                this.requirePageGlyphs(0, layout.glyphCount);\r\n            }\r\n            else {\r\n                const tempGlyphCount = this.tempGlyphCount;\r\n                for (let i = 0; i < tempGlyphCount.length; i++) {\r\n                    tempGlyphCount[i] = 0;\r\n                }\r\n                // Determine # of glyphs in each page.\r\n                for (let i = 0, n = layout.runs.length; i < n; i++) {\r\n                    const glyphs = layout.runs[i].glyphs;\r\n                    const glyphItems = glyphs;\r\n                    for (let ii = 0, nn = glyphs.length; ii < nn; ii++)\r\n                        tempGlyphCount[glyphItems[ii].page]++;\r\n                }\r\n                // Require that many for each page.\r\n                for (let i = 0, n = tempGlyphCount.length; i < n; i++)\r\n                    this.requirePageGlyphs(i, tempGlyphCount[i]);\r\n            }\r\n        };\r\n        this.requirePageGlyphs = (page, glyphCount) => {\r\n            // if (this.pageGlyphIndices != null) {\r\n            //    if (glyphCount > this.pageGlyphIndices[page].length)\r\n            //       this.pageGlyphIndices[page].ensureCapacity(glyphCount - this.pageGlyphIndices[page].length);\r\n            // }\r\n            const vertexCount = this.idx[page] + glyphCount * 20;\r\n            const vertices = this.pageVertices[page];\r\n            if (!vertices) {\r\n                this.pageVertices[page] = new Array(vertexCount);\r\n            }\r\n            else if (vertices.length < vertexCount) {\r\n                const newVertices = new Array(vertexCount);\r\n                Utils_1.Utils.arrayCopy(vertices, 0, newVertices, 0, this.idx[page]);\r\n                this.pageVertices[page] = newVertices;\r\n            }\r\n        };\r\n        this.setPageCount = (pageCount) => {\r\n            const newPageVertices = new Array(pageCount).fill([]);\r\n            Utils_1.Utils.arrayCopy(this.pageVertices, 0, newPageVertices, 0, this.pageVertices.length);\r\n            this.pageVertices = [...newPageVertices];\r\n            const newIdx = new Array(pageCount);\r\n            Utils_1.Utils.arrayCopy(this.idx, 0, newIdx, 0, this.idx.length);\r\n            this.idx = newIdx;\r\n            const newPageGlyphIndices = new Array(pageCount);\r\n            let pageGlyphIndicesLength = 0;\r\n            if (this.pageGlyphIndices != null) {\r\n                pageGlyphIndicesLength = this.pageGlyphIndices.length;\r\n                Utils_1.Utils.arrayCopy(this.pageGlyphIndices, 0, newPageGlyphIndices, 0, this.pageGlyphIndices.length);\r\n            }\r\n            for (let i = pageGlyphIndicesLength; i < pageCount; i++)\r\n                newPageGlyphIndices[i] = [];\r\n            this.pageGlyphIndices = newPageGlyphIndices;\r\n            this.tempGlyphCount = new Array(pageCount);\r\n        };\r\n        this.addToCache = (layout, x, y) => {\r\n            const runCount = layout.runs.length;\r\n            if (runCount === 0)\r\n                return;\r\n            // Check if the number of font pages has changed.\r\n            if (this.pageVertices.length < this.font.regions.length)\r\n                this.setPageCount(this.font.regions.length);\r\n            this.layouts.push(layout);\r\n            this.requireGlyphs(layout);\r\n            const colors = layout.colors;\r\n            let colorsIndex = 0, nextColorGlyphIndex = 0, glyphIndex = 0;\r\n            let lastColorFloatBits = 0;\r\n            this.drawingTexts.length = 0;\r\n            for (let i = 0; i < runCount; i++) {\r\n                const run = layout.runs[i];\r\n                const glyphs = run.glyphs;\r\n                const xAdvances = run.xAdvances;\r\n                let gx = x + run.x, gy = y + run.y;\r\n                for (let ii = 0, nn = run.glyphs.length; ii < nn; ii++) {\r\n                    if (glyphIndex++ === nextColorGlyphIndex) {\r\n                        lastColorFloatBits = NumberUtils_1.NumberUtil.intToFloatColor(colors[++colorsIndex]);\r\n                        nextColorGlyphIndex = ++colorsIndex < colors.length ? colors[colorsIndex] : -1;\r\n                    }\r\n                    gx += xAdvances[ii];\r\n                    this.drawingTexts.push(glyphs[ii].id);\r\n                    this.addGlyph(glyphs[ii], gx, gy, lastColorFloatBits);\r\n                }\r\n            }\r\n            const whiteIntBits = (255 << 24) | (255 << 16) | (255 << 8) | 255;\r\n            this.currentTint = NumberUtils_1.NumberUtil.intToFloatColor(whiteIntBits); // Cached glyphs have changed, reset the current tint.\r\n        };\r\n        this.addGlyph = (glyph, x, y, color) => {\r\n            let scaleX = this.font.data.scaleX, scaleY = this.font.data.scaleY;\r\n            x += glyph.xoffset * scaleX;\r\n            y += glyph.yoffset * scaleY;\r\n            let width = glyph.width * scaleX, height = glyph.height * scaleY;\r\n            let u = glyph.u, u2 = glyph.u2, v = glyph.v, v2 = glyph.v2;\r\n            if (this.integer) {\r\n                x = Math.round(x);\r\n                y = Math.round(y);\r\n                width = Math.round(width);\r\n                height = Math.round(height);\r\n            }\r\n            let x2 = x + width, y2 = y + height;\r\n            const page = glyph.page;\r\n            let idx = this.idx[page];\r\n            this.idx[page] += 20;\r\n            if (this.pageGlyphIndices != null)\r\n                this.pageGlyphIndices[page].push(this.glyphCount++);\r\n            const vertices = this.pageVertices[page];\r\n            vertices[idx++] = x;\r\n            vertices[idx++] = y;\r\n            vertices[idx++] = color;\r\n            vertices[idx++] = u;\r\n            vertices[idx++] = v;\r\n            vertices[idx++] = x;\r\n            vertices[idx++] = y2;\r\n            vertices[idx++] = color;\r\n            vertices[idx++] = u;\r\n            vertices[idx++] = v2;\r\n            vertices[idx++] = x2;\r\n            vertices[idx++] = y2;\r\n            vertices[idx++] = color;\r\n            vertices[idx++] = u2;\r\n            vertices[idx++] = v2;\r\n            vertices[idx++] = x2;\r\n            vertices[idx++] = y;\r\n            vertices[idx++] = color;\r\n            vertices[idx++] = u2;\r\n            vertices[idx] = v;\r\n        };\r\n        // public GlyphLayout setText (CharSequence str, float x, float y) {\r\n        // \tclear();\r\n        // \treturn addText(str, x, y, 0, str.length(), 0, Align.left, false);\r\n        // }\r\n        // public GlyphLayout setText (CharSequence str, float x, float y, float targetWidth, int halign, boolean wrap) {\r\n        // \tclear();\r\n        // \treturn addText(str, x, y, 0, str.length(), targetWidth, halign, wrap);\r\n        // }\r\n        // public GlyphLayout setText (CharSequence str, float x, float y, int start, int end, float targetWidth, int halign,\r\n        // \tboolean wrap) {\r\n        // \tclear();\r\n        // \treturn addText(str, x, y, start, end, targetWidth, halign, wrap);\r\n        // }\r\n        this.setText = (str, x, y, start, end, targetWidth, halign, wrap, truncate) => {\r\n            this.clear();\r\n            return this.addText(str, x, y, start, end, targetWidth, halign, wrap, truncate);\r\n        };\r\n        this.setTextToCache = (layout, x, y) => {\r\n            this.clear();\r\n            this.addTextToCache(layout, x, y);\r\n        };\r\n        // public GlyphLayout addText (CharSequence str, float x, float y) {\r\n        // \treturn addText(str, x, y, 0, str.length(), 0, Align.left, false, null);\r\n        // }\r\n        // public GlyphLayout addText (CharSequence str, float x, float y, float targetWidth, int halign, boolean wrap) {\r\n        // \treturn addText(str, x, y, 0, str.length(), targetWidth, halign, wrap, null);\r\n        // }\r\n        // public GlyphLayout addText (CharSequence str, float x, float y, int start, int end, float targetWidth, int halign,\r\n        // \tboolean wrap) {\r\n        // \treturn addText(str, x, y, start, end, targetWidth, halign, wrap, null);\r\n        // }\r\n        this.addText = (str, x, y, start, end, targetWidth, halign, wrap, truncate) => {\r\n            const layout = Utils_1.Pools.obtain('GlyphLayout');\r\n            this.pooledLayouts.push(layout);\r\n            layout.setText(this.font, str, start, end, this.color, targetWidth, halign, wrap, truncate);\r\n            this.addTextToCache(layout, x, y);\r\n            return layout;\r\n        };\r\n        this.addTextToCache = (layout, x, y) => {\r\n            this.addToCache(layout, x, y + this.font.data.ascent);\r\n        };\r\n        /** Returns the x position of the cached string, relative to the position when the string was cached. */\r\n        this.getX = () => {\r\n            return this.x;\r\n        };\r\n        /** Returns the y position of the cached string, relative to the position when the string was cached. */\r\n        this.getY = () => {\r\n            return this.y;\r\n        };\r\n        this.getFont = () => {\r\n            return this.font;\r\n        };\r\n        this.setUseIntegerPositions = (use) => {\r\n            this.integer = use;\r\n        };\r\n        /** @return whether this font uses integer positions for drawing. */\r\n        this.usesIntegerPositions = () => {\r\n            return this.integer;\r\n        };\r\n        this.getVertices = (page) => {\r\n            return this.pageVertices[page];\r\n        };\r\n        this.getVertexCount = (page) => {\r\n            return this.idx[page];\r\n        };\r\n        this.getLayouts = () => {\r\n            return this.layouts;\r\n        };\r\n        this.font = font;\r\n        this.integer = integer;\r\n        const pageCount = font.regions.length;\r\n        if (pageCount === 0)\r\n            console.log('The specified font must contain at least one texture page.');\r\n        this.pageVertices = new Array(pageCount).fill([]);\r\n        this.idx = new Array(pageCount);\r\n        if (pageCount > 1) {\r\n            // Contains the indices of the glyph in the cache as they are added.\r\n            this.pageGlyphIndices = new Array(pageCount);\r\n            for (let i = 0, n = this.pageGlyphIndices.length; i < n; i++)\r\n                this.pageGlyphIndices[i] = [];\r\n        }\r\n        this.tempGlyphCount = new Array(pageCount);\r\n        Utils_1.Pools.get('GlyphLayout', () => new GlyphLayout_1.GlyphLayout(font, '', 0, 0, Utils_1.Color.WHITE, 0, Utils_1.Align.left, false));\r\n    }\r\n    draw(batch) {\r\n        const regions = this.font.getRegions();\r\n        for (let i = 0; i < this.pageVertices.length; i++) {\r\n            if (this.idx[i] > 0) {\r\n                const vertices = this.pageVertices[i];\r\n                for (let j = 0; j < this.idx[i] / 20; j++) {\r\n                    const offset = 20 * j;\r\n                    const region = regions.find(item => { var _a; return item.id === ((_a = this.drawingTexts) === null || _a === void 0 ? void 0 : _a[j]); });\r\n                    if (region) {\r\n                        region.draw(batch, vertices[0 + offset], vertices[1 + offset], vertices[10 + offset] - vertices[0 + offset], vertices[11 + offset] - vertices[1 + offset]);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\nexports.BitmapFontCache = BitmapFontCache;\r\n","\"use strict\";\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.BitmapFontData = void 0;\r\nconst Glyph_1 = require(\"./Glyph\");\r\nconst Texture_1 = require(\"./Texture\");\r\nconst TextureRegion_1 = require(\"./TextureRegion\");\r\nfunction concatAndResolveUrl(url, concat) {\r\n    let url1 = url.split('/');\r\n    let url2 = concat.split('/');\r\n    let url3 = [];\r\n    for (let i = 0, l = url1.length; i < l; i++) {\r\n        if (url1[i] === '..') {\r\n            url3.pop();\r\n        }\r\n        else if (url1[i] === '.') {\r\n            continue;\r\n        }\r\n        else {\r\n            url3.push(url1[i]);\r\n        }\r\n    }\r\n    for (let i = 0, l = url2.length; i < l; i++) {\r\n        if (url2[i] === '..') {\r\n            url3.pop();\r\n        }\r\n        else if (url2[i] === '.') {\r\n            continue;\r\n        }\r\n        else {\r\n            url3.push(url2[i]);\r\n        }\r\n    }\r\n    return url3.join('/');\r\n}\r\nconst CHARACTER_MAX_VALUE = 65535;\r\nclass BitmapFontData {\r\n    /** Creates an empty BitmapFontData for configuration before calling {@link #load(FileHandle, boolean)}, to subclass, or to\r\n     * populate yourself, e.g. using stb-truetype or FreeType. */\r\n    constructor(fontFile, flip) {\r\n        /** The distance from the top of most uppercase characters to the baseline. Since the drawing position is the cap height of\r\n         * the first line, the cap height can be used to get the location of the baseline. */\r\n        this.capHeight = 1;\r\n        /** Multiplier for the line height of blank lines. down * blankLineHeight is used as the distance to move down for a blank\r\n         * line. */\r\n        this.blankLineScale = 1;\r\n        this.scaleX = 1;\r\n        this.scaleY = 1;\r\n        this.glyphs = {};\r\n        /** The x-height, which is the distance from the top of most lowercase characters to the baseline. */\r\n        this.xHeight = 1;\r\n        this.xChars = ['x', 'e', 'a', 'o', 'n', 's', 'r', 'c', 'u', 'm', 'v', 'w', 'z'];\r\n        this.capChars = [\r\n            'M',\r\n            'N',\r\n            'B',\r\n            'D',\r\n            'C',\r\n            'E',\r\n            'F',\r\n            'K',\r\n            'A',\r\n            'G',\r\n            'H',\r\n            'I',\r\n            'J',\r\n            'L',\r\n            'O',\r\n            'P',\r\n            'Q',\r\n            'R',\r\n            'S',\r\n            'T',\r\n            'U',\r\n            'V',\r\n            'W',\r\n            'X',\r\n            'Y',\r\n            'Z'\r\n        ];\r\n        this.loadFont = (gl) => __awaiter(this, void 0, void 0, function* () {\r\n            if (this.imagePaths != null)\r\n                return;\r\n            let i = 0;\r\n            let fileContent;\r\n            const res = yield fetch(this.fontFile);\r\n            fileContent = yield res.text();\r\n            const lines = fileContent.split(/\\r?\\n/).map((s) => s.trim());\r\n            try {\r\n                let line = lines[i];\r\n                if (typeof line !== 'string')\r\n                    throw new Error('File is empty.');\r\n                line = line.substring(line.indexOf('padding=') + 8);\r\n                const padding = line.substring(0, line.indexOf(' ')).split(',', 4);\r\n                if (padding.length !== 4)\r\n                    throw new Error('Invalid padding.');\r\n                this.padTop = parseInt(padding[0]);\r\n                this.padRight = parseInt(padding[1]);\r\n                this.padBottom = parseInt(padding[2]);\r\n                this.padLeft = parseInt(padding[3]);\r\n                const padY = this.padTop + this.padBottom;\r\n                i++;\r\n                line = lines[i];\r\n                if (typeof line !== 'string')\r\n                    throw new Error('Missing common header.');\r\n                const common = line.split(' ', 9); // At most we want the 6th element; i.e. \"page=N\"\r\n                // At least lineHeight and base are required.\r\n                if (common.length < 3)\r\n                    throw new Error('Invalid common header.');\r\n                if (!common[1].startsWith('lineHeight='))\r\n                    throw new Error('Missing: lineHeight');\r\n                this.lineHeight = parseInt(common[1].substring(11));\r\n                if (!common[2].startsWith('base='))\r\n                    throw new Error('Missing: base');\r\n                const baseLine = parseInt(common[2].substring(5));\r\n                let pageCount = 1;\r\n                if (common.length >= 6 && common[5] != null && common[5].startsWith('pages=')) {\r\n                    try {\r\n                        pageCount = Math.max(1, parseInt(common[5].substring(6)));\r\n                    }\r\n                    catch (_a) {\r\n                        // Use one page.\r\n                    }\r\n                }\r\n                this.imagePaths = new Array(pageCount);\r\n                const imagePaths = [];\r\n                // Read each page definition.\r\n                for (let p = 0; p < pageCount; p++) {\r\n                    // Read each \"page\" info line.\r\n                    i++;\r\n                    line = lines[i];\r\n                    if (typeof line !== 'string')\r\n                        throw new Error('Missing additional page definitions.');\r\n                    // Expect ID to mean \"index\".\r\n                    const idMatches = line.match(new RegExp('.*id=(\\\\d+)'));\r\n                    if (idMatches && idMatches.length > 1) {\r\n                        const id = idMatches[1];\r\n                        try {\r\n                            const pageID = parseInt(id);\r\n                            if (pageID !== p)\r\n                                throw new Error('Page IDs must be indices starting at 0: ' + id);\r\n                        }\r\n                        catch (_b) { }\r\n                    }\r\n                    const fileMatches = line.match(new RegExp('.*file=\"?([^\"]+)\"?'));\r\n                    if (!fileMatches || fileMatches.length <= 1)\r\n                        throw new Error('Missing: file');\r\n                    const fileName = fileMatches[1];\r\n                    imagePaths[p] = fileName;\r\n                    // this.imagePaths[p] = fontFile.parent().child(fileName).path().replaceAll(\"\\\\\\\\\", \"/\");\r\n                }\r\n                this.descent = 0;\r\n                while (true) {\r\n                    i++;\r\n                    line = lines[i];\r\n                    if (!line)\r\n                        break; // EOF\r\n                    if (line.startsWith('kernings '))\r\n                        break; // Starting kernings block.\r\n                    if (line.startsWith('metrics '))\r\n                        break; // Starting metrics block.\r\n                    if (!line.startsWith('char '))\r\n                        continue;\r\n                    const glyph = new Glyph_1.Glyph();\r\n                    const tokens = new StringTokenizer(line, '=');\r\n                    tokens.nextToken();\r\n                    tokens.nextToken();\r\n                    const ch = parseInt(tokens.nextToken());\r\n                    if (ch > 0 && ch > CHARACTER_MAX_VALUE)\r\n                        continue;\r\n                    glyph.id = ch + '';\r\n                    tokens.nextToken();\r\n                    glyph.srcX = parseInt(tokens.nextToken());\r\n                    tokens.nextToken();\r\n                    glyph.srcY = parseInt(tokens.nextToken());\r\n                    tokens.nextToken();\r\n                    glyph.width = parseInt(tokens.nextToken());\r\n                    tokens.nextToken();\r\n                    glyph.height = parseInt(tokens.nextToken());\r\n                    tokens.nextToken();\r\n                    glyph.xoffset = parseInt(tokens.nextToken());\r\n                    tokens.nextToken();\r\n                    if (this.flipped)\r\n                        glyph.yoffset = parseInt(tokens.nextToken());\r\n                    else\r\n                        glyph.yoffset = -(glyph.height + parseInt(tokens.nextToken()));\r\n                    tokens.nextToken();\r\n                    glyph.xadvance = parseInt(tokens.nextToken());\r\n                    // Check for page safely, it could be omitted or invalid.\r\n                    if (tokens.hasMoreTokens())\r\n                        tokens.nextToken();\r\n                    if (tokens.hasMoreTokens()) {\r\n                        try {\r\n                            glyph.page = parseInt(tokens.nextToken());\r\n                        }\r\n                        catch (_c) { }\r\n                    }\r\n                    if (glyph.width > 0 && glyph.height > 0)\r\n                        this.descent = Math.min(baseLine + glyph.yoffset, this.descent);\r\n                    if (ch <= 0) {\r\n                        this.missingGlyph = glyph;\r\n                    }\r\n                    else if (ch <= CHARACTER_MAX_VALUE) {\r\n                        this.setGlyph(ch, glyph);\r\n                    }\r\n                }\r\n                this.descent += this.padBottom;\r\n                while (true) {\r\n                    i++;\r\n                    line = lines[i];\r\n                    if (typeof line !== 'string')\r\n                        break;\r\n                    if (!line.startsWith('kerning '))\r\n                        break;\r\n                    const tokens = new StringTokenizer(line, '=');\r\n                    tokens.nextToken();\r\n                    tokens.nextToken();\r\n                    let first = parseInt(tokens.nextToken());\r\n                    tokens.nextToken();\r\n                    let second = parseInt(tokens.nextToken());\r\n                    if (first < 0 || first > CHARACTER_MAX_VALUE || second < 0 || second > CHARACTER_MAX_VALUE)\r\n                        continue;\r\n                    const glyph = this.getGlyph(first + '');\r\n                    tokens.nextToken();\r\n                    const amount = parseInt(tokens.nextToken());\r\n                    if (glyph) {\r\n                        // Kernings may exist for glyph pairs not contained in the font.\r\n                        glyph.setKerning(second, amount);\r\n                    }\r\n                }\r\n                let hasMetricsOverride = false;\r\n                let overrideAscent = 0;\r\n                let overrideDescent = 0;\r\n                let overrideDown = 0;\r\n                let overrideCapHeight = 0;\r\n                let overrideLineHeight = 0;\r\n                let overrideSpaceXAdvance = 0;\r\n                let overrideXHeight = 0;\r\n                // Metrics override\r\n                if (line != null && line.startsWith('metrics ')) {\r\n                    hasMetricsOverride = true;\r\n                    const tokens = new StringTokenizer(line, '=');\r\n                    tokens.nextToken();\r\n                    tokens.nextToken();\r\n                    overrideAscent = parseFloat(tokens.nextToken());\r\n                    tokens.nextToken();\r\n                    overrideDescent = parseFloat(tokens.nextToken());\r\n                    tokens.nextToken();\r\n                    overrideDown = parseFloat(tokens.nextToken());\r\n                    tokens.nextToken();\r\n                    overrideCapHeight = parseFloat(tokens.nextToken());\r\n                    tokens.nextToken();\r\n                    overrideLineHeight = parseFloat(tokens.nextToken());\r\n                    tokens.nextToken();\r\n                    overrideSpaceXAdvance = parseFloat(tokens.nextToken());\r\n                    tokens.nextToken();\r\n                    overrideXHeight = parseFloat(tokens.nextToken());\r\n                }\r\n                let spaceGlyph = this.getGlyph('32');\r\n                if (!spaceGlyph) {\r\n                    spaceGlyph = new Glyph_1.Glyph();\r\n                    spaceGlyph.id = '32';\r\n                    let xadvanceGlyph = this.getGlyph('l');\r\n                    if (!xadvanceGlyph)\r\n                        xadvanceGlyph = this.getFirstGlyph();\r\n                    spaceGlyph.xadvance = xadvanceGlyph.xadvance;\r\n                    this.setGlyph(32, spaceGlyph); // space character ascii code\r\n                }\r\n                if (spaceGlyph.width === 0) {\r\n                    spaceGlyph.width = this.padLeft + spaceGlyph.xadvance + this.padRight;\r\n                    spaceGlyph.xoffset = -this.padLeft;\r\n                }\r\n                this.spaceXadvance = spaceGlyph.xadvance;\r\n                let xGlyph;\r\n                for (let i = 0; i < this.xChars.length; i++) {\r\n                    xGlyph = this.getGlyph(this.xChars[i]);\r\n                    if (xGlyph)\r\n                        break;\r\n                }\r\n                if (!xGlyph)\r\n                    xGlyph = this.getFirstGlyph();\r\n                this.xHeight = xGlyph.height - padY;\r\n                let capGlyph;\r\n                for (let i = 0; i < this.capChars.length; i++) {\r\n                    capGlyph = this.getGlyph(this.capChars[i]);\r\n                    if (capGlyph)\r\n                        break;\r\n                }\r\n                if (!capGlyph) {\r\n                    const glyphValues = Object.values(this.glyphs);\r\n                    for (let i = 0; i < glyphValues.length; i++) {\r\n                        const page = glyphValues[i];\r\n                        if (!page)\r\n                            continue;\r\n                        for (let j = 0; j < page.length; j++) {\r\n                            if (!page[j] || page[j].height === 0 || page[j].width === 0)\r\n                                continue;\r\n                            this.capHeight = Math.max(this.capHeight, page[j].height);\r\n                        }\r\n                    }\r\n                }\r\n                else\r\n                    this.capHeight = capGlyph.height;\r\n                this.capHeight -= padY;\r\n                this.ascent = baseLine - this.capHeight;\r\n                this.down = -this.lineHeight;\r\n                if (this.flipped) {\r\n                    this.ascent = -this.ascent;\r\n                    this.down = -this.down;\r\n                }\r\n                if (hasMetricsOverride) {\r\n                    this.ascent = overrideAscent;\r\n                    this.descent = overrideDescent;\r\n                    this.down = overrideDown;\r\n                    this.capHeight = overrideCapHeight;\r\n                    this.lineHeight = overrideLineHeight;\r\n                    this.spaceXadvance = overrideSpaceXAdvance;\r\n                    this.xHeight = overrideXHeight;\r\n                }\r\n                // Generate texture regions\r\n                const regionsData = [];\r\n                const glyphValues = Object.values(this.glyphs);\r\n                for (let i = 0; i < glyphValues.length; i++) {\r\n                    const values = Object.values(glyphValues[i]);\r\n                    for (let j = 0; j < values.length; j++) {\r\n                        const region = {\r\n                            id: values[j].id,\r\n                            left: values[j].srcX,\r\n                            top: values[j].srcY,\r\n                            width: values[j].width,\r\n                            height: values[j].height,\r\n                            xoffset: values[j].xoffset,\r\n                            yoffset: values[j].yoffset,\r\n                            xadvance: values[j].xadvance,\r\n                            page: imagePaths[values[j].page],\r\n                            pageId: values[j].page\r\n                        };\r\n                        regionsData.push(region);\r\n                    }\r\n                }\r\n                const pages = [];\r\n                for (let i = 0; i < pageCount; i++) {\r\n                    const texture = yield Texture_1.Texture.load(gl, concatAndResolveUrl(this.fontFile, `../${imagePaths[i]}`));\r\n                    const invTexWidth = 1 / texture.width;\r\n                    const invTexHeight = 1 / texture.height;\r\n                    pages.push({\r\n                        texture,\r\n                        invTexWidth,\r\n                        invTexHeight\r\n                    });\r\n                }\r\n                this.regions = [];\r\n                for (let regionData of regionsData) {\r\n                    const left = regionData.left;\r\n                    const top = regionData.top;\r\n                    const width = regionData.width;\r\n                    const height = regionData.height;\r\n                    const { texture, invTexWidth, invTexHeight } = pages[regionData.pageId];\r\n                    const region = new TextureRegion_1.TextureRegion(texture, left, top, width, height, regionData, invTexWidth, invTexHeight);\r\n                    region.originalWidth = width;\r\n                    region.originalHeight = height;\r\n                    region.offsetX = 0;\r\n                    region.offsetY = 0;\r\n                    this.regions.push(region);\r\n                }\r\n            }\r\n            catch (ex) {\r\n                console.error(ex);\r\n            }\r\n        });\r\n        this.setGlyphRegion = (glyph, region) => {\r\n            const texture = region.texture;\r\n            const invTexWidth = 1 / texture.width;\r\n            const invTexHeight = 1 / texture.height;\r\n            let offsetX = 0, offsetY = 0;\r\n            const u = region.u;\r\n            const v = region.v;\r\n            const regionWidth = region.originalWidth;\r\n            const regionHeight = region.originalHeight;\r\n            // if (region instanceof AtlasRegion) {\r\n            //    // Compensate for whitespace stripped from left and top edges.\r\n            //    AtlasRegion atlasRegion = (AtlasRegion)region;\r\n            //    offsetX = atlasRegion.offsetX;\r\n            //    offsetY = atlasRegion.originalHeight - atlasRegion.packedHeight - atlasRegion.offsetY;\r\n            // }\r\n            let x = glyph.srcX;\r\n            let x2 = glyph.srcX + glyph.width;\r\n            let y = glyph.srcY;\r\n            let y2 = glyph.srcY + glyph.height;\r\n            // Shift glyph for left and top edge stripped whitespace. Clip glyph for right and bottom edge stripped whitespace.\r\n            // Note if the font region has padding, whitespace stripping must not be used.\r\n            if (offsetX > 0) {\r\n                x -= offsetX;\r\n                if (x < 0) {\r\n                    glyph.width += x;\r\n                    glyph.xoffset -= x;\r\n                    x = 0;\r\n                }\r\n                x2 -= offsetX;\r\n                if (x2 > regionWidth) {\r\n                    glyph.width -= x2 - regionWidth;\r\n                    x2 = regionWidth;\r\n                }\r\n            }\r\n            if (offsetY > 0) {\r\n                y -= offsetY;\r\n                if (y < 0) {\r\n                    glyph.height += y;\r\n                    if (glyph.height < 0)\r\n                        glyph.height = 0;\r\n                    y = 0;\r\n                }\r\n                y2 -= offsetY;\r\n                if (y2 > regionHeight) {\r\n                    const amount = y2 - regionHeight;\r\n                    glyph.height -= amount;\r\n                    glyph.yoffset += amount;\r\n                    y2 = regionHeight;\r\n                }\r\n            }\r\n            glyph.u = u + x * invTexWidth;\r\n            glyph.u2 = u + x2 * invTexWidth;\r\n            if (this.flipped) {\r\n                glyph.v = v + y * invTexHeight;\r\n                glyph.v2 = v + y2 * invTexHeight;\r\n            }\r\n            else {\r\n                glyph.v2 = v + y * invTexHeight;\r\n                glyph.v = v + y2 * invTexHeight;\r\n            }\r\n        };\r\n        /** Sets the line height, which is the distance from one line of text to the next. */\r\n        this.setLineHeight = (height) => {\r\n            this.lineHeight = height * this.scaleY;\r\n            this.down = this.flipped ? this.lineHeight : -this.lineHeight;\r\n        };\r\n        this.setGlyph = (ch, glyph) => {\r\n            let page = this.glyphs[ch / Glyph_1.PAGE_SIZE];\r\n            if (!page) {\r\n                page = new Array(Glyph_1.PAGE_SIZE);\r\n                this.glyphs[ch / Glyph_1.PAGE_SIZE] = page;\r\n                // this.glyphs[ch / PAGE_SIZE] = page = new Glyph[PAGE_SIZE];\r\n            }\r\n            page[ch & (Glyph_1.PAGE_SIZE - 1)] = glyph;\r\n        };\r\n        this.getFirstGlyph = () => {\r\n            const glyphValues = Object.values(this.glyphs);\r\n            for (let i = 0; i < glyphValues.length; i++) {\r\n                const page = glyphValues[i];\r\n                if (!page)\r\n                    continue;\r\n                for (let j = 0; j < page.length; j++) {\r\n                    const glyph = page[j];\r\n                    if (!glyph || glyph.height === 0 || glyph.width === 0)\r\n                        continue;\r\n                    return glyph;\r\n                }\r\n            }\r\n        };\r\n        /** Returns true if the font has the glyph, or if the font has a {@link #missingGlyph}. */\r\n        this.hasGlyph = (ch) => {\r\n            if (this.missingGlyph)\r\n                return true;\r\n            return this.getGlyph(ch) != null;\r\n        };\r\n        /** Returns the glyph for the specified character, or null if no such glyph exists. Note that\r\n         * {@link #getGlyphs(GlyphRun, CharSequence, int, int, Glyph)} should be be used to shape a string of characters into a list\r\n         * of glyphs. */\r\n        this.getGlyph = (ch) => {\r\n            const page = this.glyphs[ch.charCodeAt(0) / Glyph_1.PAGE_SIZE];\r\n            if (page != null)\r\n                return page[ch.charCodeAt(0) & (Glyph_1.PAGE_SIZE - 1)];\r\n            return undefined;\r\n        };\r\n        /** Using the specified string, populates the glyphs and positions of the specified glyph run.\r\n         * @param str Characters to convert to glyphs. Will not contain newline or color tags. May contain \"[[\" for an escaped left\r\n         *           square bracket.\r\n         * @param lastGlyph The glyph immediately before this run, or null if this is run is the first on a line of text. Used tp\r\n         *           apply kerning between the specified glyph and the first glyph in this run. */\r\n        this.getGlyphs = (run, str, start, end, lastGlyph) => {\r\n            const max = end - start;\r\n            if (max === 0)\r\n                return;\r\n            let markupEnabled = this.markupEnabled;\r\n            const scaleX = this.scaleX;\r\n            const glyphs = run.glyphs;\r\n            const xAdvances = run.xAdvances;\r\n            // Guess at number of glyphs needed.\r\n            // glyphs.ensureCapacity(max);\r\n            // run.xAdvances.ensureCapacity(max + 1);\r\n            do {\r\n                const ch = str.charAt(start++);\r\n                if (ch === '\\r')\r\n                    continue; // Ignore.\r\n                let glyph = this.getGlyph(ch);\r\n                if (!glyph) {\r\n                    if (!this.missingGlyph)\r\n                        continue;\r\n                    glyph = this.missingGlyph;\r\n                }\r\n                glyphs.push(glyph);\r\n                xAdvances.push(!lastGlyph // First glyph on line, adjust the position so it isn't drawn left of 0.\r\n                    ? glyph.fixedWidth\r\n                        ? 0\r\n                        : -glyph.xoffset * scaleX - this.padLeft\r\n                    : (lastGlyph.xadvance + lastGlyph.getKerning(ch)) * scaleX);\r\n                lastGlyph = glyph;\r\n                // \"[[\" is an escaped left square bracket, skip second character.\r\n                if (markupEnabled && ch === '[' && start < end && str.charAt(start) === '[')\r\n                    start++;\r\n            } while (start < end);\r\n            if (lastGlyph) {\r\n                const lastGlyphWidth = lastGlyph.fixedWidth\r\n                    ? lastGlyph.xadvance * scaleX\r\n                    : (lastGlyph.width + lastGlyph.xoffset) * scaleX - this.padRight;\r\n                xAdvances.push(lastGlyphWidth);\r\n            }\r\n        };\r\n        /** Returns the first valid glyph index to use to wrap to the next line, starting at the specified start index and\r\n         * (typically) moving toward the beginning of the glyphs array. */\r\n        this.getWrapIndex = (glyphs, start) => {\r\n            let i = start - 1;\r\n            const glyphsItems = glyphs;\r\n            let ch = glyphsItems[i].id;\r\n            if (this.isWhitespace(ch + ''))\r\n                return i;\r\n            if (this.isBreakChar(ch + ''))\r\n                i--;\r\n            for (; i > 0; i--) {\r\n                ch = glyphsItems[i].id;\r\n                if (this.isWhitespace(ch + '') || this.isBreakChar(ch + '')) {\r\n                    return i + 1;\r\n                }\r\n            }\r\n            return 0;\r\n        };\r\n        this.isBreakChar = (c) => {\r\n            if (!this.breakChars)\r\n                return false;\r\n            const character = String.fromCharCode(parseInt(c));\r\n            for (let i = 0; i < this.breakChars.length; i++) {\r\n                if (character === this.breakChars[i])\r\n                    return true;\r\n            }\r\n            return false;\r\n        };\r\n        this.isWhitespace = (c) => {\r\n            const character = String.fromCharCode(parseInt(c));\r\n            switch (character) {\r\n                case '\\n':\r\n                case '\\r':\r\n                case '\\t':\r\n                case ' ':\r\n                    return true;\r\n                default:\r\n                    return false;\r\n            }\r\n        };\r\n        /** Returns the image path for the texture page at the given index (the \"id\" in the BMFont file). */\r\n        this.getImagePath = (index) => {\r\n            return this.imagePaths[index];\r\n        };\r\n        this.getImagePaths = () => {\r\n            return this.imagePaths;\r\n        };\r\n        /** Scales the font by the specified amounts on both axes\r\n         * <p>\r\n         * Note that smoother scaling can be achieved if the texture backing the BitmapFont is using {@link TextureFilter#Linear}.\r\n         * The default is Nearest, so use a BitmapFont constructor that takes a {@link TextureRegion}.\r\n         * @throws IllegalArgumentException if scaleX or scaleY is zero. */\r\n        this.setScale = (scaleX, scaleY) => {\r\n            if (scaleX === 0 || scaleY === 0)\r\n                return;\r\n            const x = scaleX / this.scaleX;\r\n            const y = scaleY / this.scaleY;\r\n            this.lineHeight *= y;\r\n            this.spaceXadvance *= x;\r\n            this.xHeight *= y;\r\n            this.capHeight *= y;\r\n            this.ascent *= y;\r\n            this.descent *= y;\r\n            this.down *= y;\r\n            this.padLeft *= x;\r\n            this.padRight *= x;\r\n            this.padTop *= y;\r\n            this.padBottom *= y;\r\n            this.scaleX = scaleX;\r\n            this.scaleY = scaleY;\r\n        };\r\n        /** Sets the font's scale relative to the current scale.\r\n         * @see #setScale(float, float)\r\n         * @throws IllegalArgumentException if the resulting scale is zero. */\r\n        this.scale = (amount) => {\r\n            this.setScale(this.scaleX + amount, this.scaleY + amount);\r\n        };\r\n        this.fontFile = fontFile;\r\n        this.flipped = flip;\r\n    }\r\n    /** Scales the font by the specified amount in both directions.\r\n     * @see #setScale(float, float)\r\n     * @throws IllegalArgumentException if scaleX or scaleY is zero. */\r\n    setXYScale(scaleXY) {\r\n        this.setScale(scaleXY, scaleXY);\r\n    }\r\n}\r\nexports.BitmapFontData = BitmapFontData;\r\nclass StringTokenizer {\r\n    constructor(str, delimitter) {\r\n        this.strArray = [];\r\n        this.currentIndex = 0;\r\n        const strings = str.split(/\\s+/);\r\n        for (let i = 0; i < strings.length; i++) {\r\n            const st = strings[i];\r\n            this.strArray.push(...st.split(delimitter));\r\n        }\r\n    }\r\n    hasMoreTokens() {\r\n        return this.currentIndex >= this.strArray.length;\r\n    }\r\n    nextToken() {\r\n        return this.strArray[this.currentIndex++];\r\n    }\r\n}\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.BoundingBox = void 0;\r\nconst Vector3_1 = require(\"./Vector3\");\r\nclass BoundingBox {\r\n    /** Constructs a new bounding box with the minimum and maximum vector set to zeros. */\r\n    constructor() {\r\n        this.min = new Vector3_1.Vector3();\r\n        this.max = new Vector3_1.Vector3();\r\n        this.cnt = new Vector3_1.Vector3();\r\n        this.dim = new Vector3_1.Vector3();\r\n        this.clr();\r\n    }\r\n    getCenter(out) {\r\n        return out.setFrom(this.cnt);\r\n    }\r\n    getCenterX() {\r\n        return this.cnt.x;\r\n    }\r\n    getCenterY() {\r\n        return this.cnt.y;\r\n    }\r\n    getCenterZ() {\r\n        return this.cnt.z;\r\n    }\r\n    getCorner000(out) {\r\n        return out.set(this.min.x, this.min.y, this.min.z);\r\n    }\r\n    getCorner001(out) {\r\n        return out.set(this.min.x, this.min.y, this.max.z);\r\n    }\r\n    getCorner010(out) {\r\n        return out.set(this.min.x, this.max.y, this.min.z);\r\n    }\r\n    getCorner011(out) {\r\n        return out.set(this.min.x, this.max.y, this.max.z);\r\n    }\r\n    getCorner100(out) {\r\n        return out.set(this.max.x, this.min.y, this.min.z);\r\n    }\r\n    getCorner101(out) {\r\n        return out.set(this.max.x, this.min.y, this.max.z);\r\n    }\r\n    getCorner110(out) {\r\n        return out.set(this.max.x, this.max.y, this.min.z);\r\n    }\r\n    getCorner111(out) {\r\n        return out.set(this.max.x, this.max.y, this.max.z);\r\n    }\r\n    /** @param out The {@link Vector3} to receive the dimensions of this bounding box on all three axis.\r\n     * @return The vector specified with the out argument */\r\n    getDimensions(out) {\r\n        return out.setFrom(this.dim);\r\n    }\r\n    getWidth() {\r\n        return this.dim.x;\r\n    }\r\n    getHeight() {\r\n        return this.dim.y;\r\n    }\r\n    getDepth() {\r\n        return this.dim.z;\r\n    }\r\n    /** @param out The {@link Vector3} to receive the minimum values.\r\n     * @return The vector specified with the out argument */\r\n    getMin(out) {\r\n        return out.setFrom(this.min);\r\n    }\r\n    /** @param out The {@link Vector3} to receive the maximum values.\r\n     * @return The vector specified with the out argument */\r\n    getMax(out) {\r\n        return out.setFrom(this.max);\r\n    }\r\n    /** Sets the given bounding box.\r\n     *\r\n     * @param bounds The bounds.\r\n     * @return This bounding box for chaining. */\r\n    setFromBounds(bounds) {\r\n        return this.set(bounds.min, bounds.max);\r\n    }\r\n    /** Sets the given minimum and maximum vector.\r\n     *\r\n     * @param minimum The minimum vector\r\n     * @param maximum The maximum vector\r\n     * @return This bounding box for chaining. */\r\n    set(minimum, maximum) {\r\n        this.min.set(minimum.x < maximum.x ? minimum.x : maximum.x, minimum.y < maximum.y ? minimum.y : maximum.y, minimum.z < maximum.z ? minimum.z : maximum.z);\r\n        this.max.set(minimum.x > maximum.x ? minimum.x : maximum.x, minimum.y > maximum.y ? minimum.y : maximum.y, minimum.z > maximum.z ? minimum.z : maximum.z);\r\n        this.update();\r\n        return this;\r\n    }\r\n    update() {\r\n        this.cnt.setFrom(this.min).add(this.max).scale(0.5);\r\n        this.dim.setFrom(this.max).sub(this.min);\r\n    }\r\n    /** Sets the bounding box minimum and maximum vector from the given points.\r\n     *\r\n     * @param points The points.\r\n     * @return This bounding box for chaining. */\r\n    setFromPoints(points) {\r\n        this.inf();\r\n        for (let l_point of points)\r\n            this.extPoint(l_point);\r\n        return this;\r\n    }\r\n    /** Sets the minimum and maximum vector to positive and negative infinity.\r\n     *\r\n     * @return This bounding box for chaining. */\r\n    inf() {\r\n        this.min.set(Infinity, Infinity, Infinity);\r\n        this.max.set(-Infinity, -Infinity, -Infinity);\r\n        this.cnt.set(0, 0, 0);\r\n        this.dim.set(0, 0, 0);\r\n        return this;\r\n    }\r\n    /** Extends the bounding box to incorporate the given {@link Vector3}.\r\n     * @param point The vector\r\n     * @return This bounding box for chaining. */\r\n    extPoint(point) {\r\n        return this.set(this.min.set(Math.min(this.min.x, point.x), Math.min(this.min.y, point.y), Math.min(this.min.z, point.z)), this.max.set(Math.max(this.max.x, point.x), Math.max(this.max.y, point.y), Math.max(this.max.z, point.z)));\r\n    }\r\n    /** Sets the minimum and maximum vector to zeros.\r\n     * @return This bounding box for chaining. */\r\n    clr() {\r\n        return this.set(this.min.set(0, 0, 0), this.max.set(0, 0, 0));\r\n    }\r\n    /** Returns whether this bounding box is valid. This means that {@link #max} is greater than or equal to {@link #min}.\r\n     * @return True in case the bounding box is valid, false otherwise */\r\n    isValid() {\r\n        return this.min.x <= this.max.x && this.min.y <= this.max.y && this.min.z <= this.max.z;\r\n    }\r\n    /** Extends this bounding box by the given bounding box.\r\n     *\r\n     * @param a_bounds The bounding box\r\n     * @return This bounding box for chaining. */\r\n    extBounds(a_bounds) {\r\n        return this.set(this.min.set(Math.min(this.min.x, a_bounds.min.x), Math.min(this.min.y, a_bounds.min.y), Math.min(this.min.z, a_bounds.min.z)), this.max.set(Math.max(this.max.x, a_bounds.max.x), Math.max(this.max.y, a_bounds.max.y), Math.max(this.max.z, a_bounds.max.z)));\r\n    }\r\n    /** Extends this bounding box by the given sphere.\r\n     *\r\n     * @param center Sphere center\r\n     * @param radius Sphere radius\r\n     * @return This bounding box for chaining. */\r\n    extSphere(center, radius) {\r\n        return this.set(this.min.set(Math.min(this.min.x, center.x - radius), Math.min(this.min.y, center.y - radius), Math.min(this.min.z, center.z - radius)), this.max.set(Math.max(this.max.x, center.x + radius), Math.max(this.max.y, center.y + radius), Math.max(this.max.z, center.z + radius)));\r\n    }\r\n    /** Extends this bounding box by the given transformed bounding box.\r\n     *\r\n     * @param bounds The bounding box\r\n     * @param transform The transformation matrix to apply to bounds, before using it to extend this bounding box.\r\n     * @return This bounding box for chaining. */\r\n    extTransformedBox(bounds, transform) {\r\n        this.extPoint(BoundingBox.tmpVector.set(bounds.min.x, bounds.min.y, bounds.min.z).multiply(transform));\r\n        this.extPoint(BoundingBox.tmpVector.set(bounds.min.x, bounds.min.y, bounds.max.z).multiply(transform));\r\n        this.extPoint(BoundingBox.tmpVector.set(bounds.min.x, bounds.max.y, bounds.min.z).multiply(transform));\r\n        this.extPoint(BoundingBox.tmpVector.set(bounds.min.x, bounds.max.y, bounds.max.z).multiply(transform));\r\n        this.extPoint(BoundingBox.tmpVector.set(bounds.max.x, bounds.min.y, bounds.min.z).multiply(transform));\r\n        this.extPoint(BoundingBox.tmpVector.set(bounds.max.x, bounds.min.y, bounds.max.z).multiply(transform));\r\n        this.extPoint(BoundingBox.tmpVector.set(bounds.max.x, bounds.max.y, bounds.min.z).multiply(transform));\r\n        this.extPoint(BoundingBox.tmpVector.set(bounds.max.x, bounds.max.y, bounds.max.z).multiply(transform));\r\n        return this;\r\n    }\r\n    /** Multiplies the bounding box by the given matrix. This is achieved by multiplying the 8 corner points and then calculating\r\n     * the minimum and maximum vectors from the transformed points.\r\n     *\r\n     * @param transform The matrix\r\n     * @return This bounding box for chaining. */\r\n    mul(transform) {\r\n        let x0 = this.min.x, y0 = this.min.y, z0 = this.min.z, x1 = this.max.x, y1 = this.max.y, z1 = this.max.z;\r\n        this.inf();\r\n        this.extPoint(BoundingBox.tmpVector.set(x0, y0, z0).multiply(transform));\r\n        this.extPoint(BoundingBox.tmpVector.set(x0, y0, z1).multiply(transform));\r\n        this.extPoint(BoundingBox.tmpVector.set(x0, y1, z0).multiply(transform));\r\n        this.extPoint(BoundingBox.tmpVector.set(x0, y1, z1).multiply(transform));\r\n        this.extPoint(BoundingBox.tmpVector.set(x1, y0, z0).multiply(transform));\r\n        this.extPoint(BoundingBox.tmpVector.set(x1, y0, z1).multiply(transform));\r\n        this.extPoint(BoundingBox.tmpVector.set(x1, y1, z0).multiply(transform));\r\n        this.extPoint(BoundingBox.tmpVector.set(x1, y1, z1).multiply(transform));\r\n        return this;\r\n    }\r\n    /** Returns whether the given bounding box is contained in this bounding box.\r\n     * @param b The bounding box\r\n     * @return Whether the given bounding box is contained */\r\n    containsBounds(b) {\r\n        return (!this.isValid() ||\r\n            (this.min.x <= b.min.x &&\r\n                this.min.y <= b.min.y &&\r\n                this.min.z <= b.min.z &&\r\n                this.max.x >= b.max.x &&\r\n                this.max.y >= b.max.y &&\r\n                this.max.z >= b.max.z));\r\n    }\r\n    /** Returns whether the given bounding box is intersecting this bounding box (at least one point in).\r\n     * @param b The bounding box\r\n     * @return Whether the given bounding box is intersected */\r\n    intersects(b) {\r\n        if (!this.isValid())\r\n            return false;\r\n        // test using SAT (separating axis theorem)\r\n        const lx = Math.abs(this.cnt.x - b.cnt.x);\r\n        const sumx = this.dim.x / 2.0 + b.dim.x / 2.0;\r\n        const ly = Math.abs(this.cnt.y - b.cnt.y);\r\n        const sumy = this.dim.y / 2.0 + b.dim.y / 2.0;\r\n        const lz = Math.abs(this.cnt.z - b.cnt.z);\r\n        const sumz = this.dim.z / 2.0 + b.dim.z / 2.0;\r\n        return lx <= sumx && ly <= sumy && lz <= sumz;\r\n    }\r\n    /** Returns whether the given vector is contained in this bounding box.\r\n     * @param v The vector\r\n     * @return Whether the vector is contained or not. */\r\n    containsPoint(v) {\r\n        return (this.min.x <= v.x &&\r\n            this.max.x >= v.x &&\r\n            this.min.y <= v.y &&\r\n            this.max.y >= v.y &&\r\n            this.min.z <= v.z &&\r\n            this.max.z >= v.z);\r\n    }\r\n    /** Extends the bounding box by the given vector.\r\n     *\r\n     * @param x The x-coordinate\r\n     * @param y The y-coordinate\r\n     * @param z The z-coordinate\r\n     * @return This bounding box for chaining. */\r\n    ext(x, y, z) {\r\n        return this.set(this.min.set(Math.min(this.min.x, x), Math.min(this.min.y, y), Math.min(this.min.z, z)), this.max.set(Math.max(this.max.x, x), Math.max(this.max.y, y), Math.max(this.max.z, z)));\r\n    }\r\n}\r\nexports.BoundingBox = BoundingBox;\r\nBoundingBox.tmpVector = new Vector3_1.Vector3();\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.OrthoCamera = void 0;\r\nconst Matrix4_1 = require(\"./Matrix4\");\r\nconst Vector3_1 = require(\"./Vector3\");\r\nclass OrthoCamera {\r\n    constructor(viewportWidth, viewportHeight, screenWidth, screenHeight) {\r\n        this.position = new Vector3_1.Vector3(0, 0, 0);\r\n        this.direction = new Vector3_1.Vector3(0, 0, -1);\r\n        this.up = new Vector3_1.Vector3(0, 1, 0);\r\n        this.near = 0;\r\n        this.far = 100;\r\n        this.zoom = 1;\r\n        this.viewportWidth = 0;\r\n        this.viewportHeight = 0;\r\n        this.projectionView = new Matrix4_1.Matrix4();\r\n        this.inverseProjectionView = new Matrix4_1.Matrix4();\r\n        this.projection = new Matrix4_1.Matrix4();\r\n        this.view = new Matrix4_1.Matrix4();\r\n        this.tmp3 = new Vector3_1.Vector3();\r\n        this.resize(viewportWidth, viewportHeight, screenWidth, screenHeight);\r\n    }\r\n    setYDown(yDown) {\r\n        if (yDown) {\r\n            this.up.set(0, -1, 0);\r\n            this.direction.set(0, 0, 1);\r\n        }\r\n        else {\r\n            this.up.set(0, 1, 0);\r\n            this.direction.set(0, 0, -1);\r\n        }\r\n        this.update();\r\n    }\r\n    resize(viewportWidth, viewportHeight, screenWidth, screenHeight) {\r\n        this.viewportWidth = viewportWidth;\r\n        this.viewportHeight = viewportHeight;\r\n        this.screenWidth = screenWidth;\r\n        this.screenHeight = screenHeight;\r\n        this.update();\r\n    }\r\n    setPosition(cameraX, cameraY) {\r\n        this.position.set(cameraX, cameraY, this.position.z);\r\n    }\r\n    update() {\r\n        let projection = this.projection;\r\n        let view = this.view;\r\n        let projectionView = this.projectionView;\r\n        let inverseProjectionView = this.inverseProjectionView;\r\n        let zoom = this.zoom, viewportWidth = this.viewportWidth, viewportHeight = this.viewportHeight;\r\n        projection.ortho(zoom * (-viewportWidth / 2), zoom * (viewportWidth / 2), zoom * (-viewportHeight / 2), zoom * (viewportHeight / 2), this.near, this.far);\r\n        view.lookAt(this.position, this.direction, this.up);\r\n        projectionView.set(projection.values);\r\n        projectionView.multiply(view);\r\n        inverseProjectionView.set(projectionView.values).invert();\r\n        this.combined = projectionView.values;\r\n    }\r\n    screenToWorld(screenCoords, screenWidth, screenHeight) {\r\n        screenWidth = screenWidth || this.screenWidth;\r\n        screenHeight = screenHeight || this.screenHeight;\r\n        let x = screenCoords.x, y = screenHeight - screenCoords.y - 1;\r\n        screenCoords.x = (2 * x) / screenWidth - 1;\r\n        screenCoords.y = (2 * y) / screenHeight - 1;\r\n        screenCoords.z = 2 * screenCoords.z - 1;\r\n        screenCoords.project(this.inverseProjectionView);\r\n        return screenCoords;\r\n    }\r\n    worldToScreen(worldCoords, screenWidth, screenHeight) {\r\n        screenWidth = screenWidth || this.screenWidth;\r\n        screenHeight = screenHeight || this.screenHeight;\r\n        worldCoords.project(this.projectionView);\r\n        worldCoords.x = (screenWidth * (worldCoords.x + 1)) / 2;\r\n        worldCoords.y = (screenHeight * (worldCoords.y + 1)) / 2;\r\n        worldCoords.z = (worldCoords.z + 1) / 2;\r\n        return worldCoords;\r\n    }\r\n    unprojectVector2(worldCoord, screenCoord) {\r\n        this.tmp3.set(screenCoord.x, screenCoord.y, 0);\r\n        this.screenToWorld(this.tmp3);\r\n        worldCoord.set(this.tmp3.x, this.tmp3.y);\r\n    }\r\n    setViewport(viewportWidth, viewportHeight) {\r\n        this.viewportWidth = viewportWidth;\r\n        this.viewportHeight = viewportHeight;\r\n    }\r\n}\r\nexports.OrthoCamera = OrthoCamera;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Game = void 0;\r\nclass Game {\r\n    setScreen(screen) {\r\n        if (this.currentScreen && this.currentScreen.dispose) {\r\n            this.currentScreen.dispose();\r\n        }\r\n        this.currentScreen = screen;\r\n        if (this.currentScreen && this.currentScreen.init) {\r\n            this.currentScreen.init(this);\r\n        }\r\n    }\r\n    update(delta) {\r\n        if (this.currentScreen && this.currentScreen.update) {\r\n            this.currentScreen.update(delta, this);\r\n        }\r\n    }\r\n}\r\nexports.Game = Game;\r\nGame.shared = new Game();\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Glyph = exports.PAGES = exports.PAGE_SIZE = exports.LOG2_PAGE_SIZE = void 0;\r\nexports.LOG2_PAGE_SIZE = 9;\r\nexports.PAGE_SIZE = 1 << exports.LOG2_PAGE_SIZE;\r\nexports.PAGES = 0x10000 / exports.PAGE_SIZE;\r\nclass Glyph {\r\n    constructor() {\r\n        /** The index to the texture page that holds this glyph. */\r\n        this.page = 0;\r\n    }\r\n    getKerning(ch) {\r\n        if (this.kerning) {\r\n            const page = this.kerning[ch.charCodeAt(0) >>> exports.LOG2_PAGE_SIZE];\r\n            if (page != null)\r\n                return page[ch.charCodeAt(0) & (exports.PAGE_SIZE - 1)];\r\n        }\r\n        return 0;\r\n    }\r\n    setKerning(ch, value) {\r\n        if (!this.kerning) {\r\n            this.kerning = [];\r\n        }\r\n        let page = this.kerning[ch >>> exports.LOG2_PAGE_SIZE];\r\n        if (!page) {\r\n            this.kerning[ch >>> exports.LOG2_PAGE_SIZE] = page = new Uint32Array(new ArrayBuffer(exports.PAGE_SIZE));\r\n        }\r\n        page[ch & (exports.PAGE_SIZE - 1)] = value;\r\n    }\r\n}\r\nexports.Glyph = Glyph;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.GlyphLayout = void 0;\r\nconst GlyphRun_1 = require(\"./GlyphRun\");\r\nconst Utils_1 = require(\"./Utils\");\r\nclass GlyphLayout {\r\n    constructor(font, str, start, end, color, targetWidth, hAlign, wrap, truncate) {\r\n        this.epsilon = 0.0001;\r\n        this.glyphRunPool = Utils_1.Pools.get('GlyphRun', () => new GlyphRun_1.GlyphRun());\r\n        this.colorStack = new Array(4);\r\n        this.runs = [];\r\n        this.colors = [];\r\n        this.setText = (font, str, start, end, color, targetWidth, hAlign, wrap, truncate) => {\r\n            this.reset();\r\n            const fontData = font.data;\r\n            if (start === end) {\r\n                // Empty string.\r\n                this.height = fontData.capHeight;\r\n                return;\r\n            }\r\n            // Avoid wrapping one line per character, which is very inefficient.\r\n            if (wrap)\r\n                targetWidth = Math.max(targetWidth, fontData.spaceXadvance * 3);\r\n            const wrapOrTruncate = wrap || truncate != null;\r\n            let currentColor = color.toIntBits();\r\n            let nextColor = currentColor;\r\n            this.colors.shift();\r\n            const markupEnabled = fontData.markupEnabled;\r\n            if (markupEnabled)\r\n                this.colorStack.push(currentColor);\r\n            let isLastRun = false;\r\n            let y = 0;\r\n            let down = fontData.down;\r\n            let lineRun = null; // Collects glyphs for the current line.\r\n            let lastGlyph = null; // Last glyph of the previous run on the same line, used for kerning between runs.\r\n            let runStart = start;\r\n            while (true) {\r\n                let runEnd;\r\n                let newline = false;\r\n                if (start === end) {\r\n                    // End of text.\r\n                    if (runStart === end)\r\n                        break; // No run to process, we're done.\r\n                    runEnd = end; // Process the final run.\r\n                    isLastRun = true;\r\n                }\r\n                else {\r\n                    // Each run is delimited by newline or left square bracket.\r\n                    switch (str.charAt(start++)) {\r\n                        case '\\n': // End of line.\r\n                            runEnd = start - 1;\r\n                            newline = true;\r\n                            break;\r\n                        // Fall through.\r\n                        default:\r\n                            continue;\r\n                    }\r\n                }\r\n                // eslint-disable-next-line no-labels\r\n                runEnded: {\r\n                    // Store the run that has ended.\r\n                    const run = this.glyphRunPool.obtain();\r\n                    run.x = 0;\r\n                    run.y = y;\r\n                    fontData.getGlyphs(run, str, runStart, runEnd, lastGlyph);\r\n                    this.glyphCount += run.glyphs.length;\r\n                    if (nextColor !== currentColor) {\r\n                        // Can only be different if markupEnabled.\r\n                        if (this.colors[this.colors.length - 2] === this.glyphCount) {\r\n                            // Consecutive color changes, or after an empty run, or at the beginning of the string.\r\n                            this.colors[this.colors.length - 1] = nextColor;\r\n                        }\r\n                        else {\r\n                            this.colors.push(this.glyphCount);\r\n                            this.colors.push(nextColor);\r\n                        }\r\n                        currentColor = nextColor;\r\n                    }\r\n                    if (run.glyphs.length === 0) {\r\n                        this.glyphRunPool.free(run);\r\n                        if (!lineRun)\r\n                            break; // Otherwise wrap and truncate must still be processed for lineRun.\r\n                    }\r\n                    else if (!lineRun) {\r\n                        lineRun = run;\r\n                        this.runs.push(lineRun);\r\n                    }\r\n                    else {\r\n                        lineRun.appendRun(run);\r\n                        this.glyphRunPool.free(run);\r\n                    }\r\n                    if (newline || isLastRun) {\r\n                        this.setLastGlyphXAdvance(fontData, lineRun);\r\n                        lastGlyph = null;\r\n                    }\r\n                    else\r\n                        lastGlyph = lineRun.glyphs[lineRun.glyphs.length - 1];\r\n                    if (!wrapOrTruncate || lineRun.glyphs.length === 0) {\r\n                        // eslint-disable-next-line no-labels\r\n                        break runEnded; // No wrap or truncate, or no glyphs.\r\n                    }\r\n                    if (newline || isLastRun) {\r\n                        // Wrap or truncate. First xadvance is the first glyph's X offset relative to the drawing position.\r\n                        let runWidth = lineRun.xAdvances[0] + lineRun.xAdvances[1]; // At least the first glyph will fit.\r\n                        for (let i = 2; i < lineRun.xAdvances.length; i++) {\r\n                            const glyph = lineRun.glyphs[i - 1];\r\n                            let glyphWidth = this.getGlyphWidth(glyph, fontData);\r\n                            if (runWidth + glyphWidth - this.epsilon <= targetWidth) {\r\n                                // Glyph fits.\r\n                                runWidth += lineRun.xAdvances[i];\r\n                                continue;\r\n                            }\r\n                            if (truncate != null) {\r\n                                // Truncate.\r\n                                this.truncate(fontData, lineRun, targetWidth, truncate);\r\n                                break;\r\n                            }\r\n                            // Wrap.\r\n                            let wrapIndex = fontData.getWrapIndex(lineRun.glyphs, i);\r\n                            if ((wrapIndex === 0 && lineRun.x === 0) || // Require at least one glyph per line.\r\n                                wrapIndex >= lineRun.glyphs.length) {\r\n                                // Wrap at least the glyph that didn't fit.\r\n                                wrapIndex = i - 1;\r\n                            }\r\n                            lineRun = this.wrap(fontData, lineRun, wrapIndex);\r\n                            // eslint-disable-next-line no-labels\r\n                            if (!lineRun)\r\n                                break runEnded; // All wrapped glyphs were whitespace.\r\n                            this.runs.push(lineRun);\r\n                            y += down;\r\n                            lineRun.x = 0;\r\n                            lineRun.y = y;\r\n                            // Start the wrap loop again, another wrap might be necessary.\r\n                            runWidth = lineRun.xAdvances[0] + lineRun.xAdvances[1]; // At least the first glyph will fit.\r\n                            i = 1;\r\n                        }\r\n                    }\r\n                }\r\n                if (newline) {\r\n                    lineRun = null;\r\n                    lastGlyph = null;\r\n                    // Next run will be on the next line.\r\n                    if (runEnd === runStart)\r\n                        // Blank line.\r\n                        y += down * fontData.blankLineScale;\r\n                    else\r\n                        y += down;\r\n                }\r\n                runStart = start;\r\n            }\r\n            this.height = fontData.capHeight + Math.abs(y);\r\n            this.calculateWidths(fontData);\r\n            this.alignRuns(targetWidth, hAlign);\r\n            // Clear the color stack.\r\n            if (markupEnabled)\r\n                this.colorStack.length = 0;\r\n        };\r\n        this.calculateWidths = (fontData) => {\r\n            var _a;\r\n            let width = 0;\r\n            const runsItems = [...this.runs];\r\n            for (let i = 0, n = this.runs.length; i < n; i++) {\r\n                const run = runsItems[i];\r\n                const xAdvances = run.xAdvances;\r\n                let runWidth = run.x + xAdvances[0];\r\n                let max = 0; // run.x is needed to ensure floats are rounded same as above.\r\n                const glyphs = run.glyphs;\r\n                for (let ii = 0; ii < run.glyphs.length;) {\r\n                    const glyph = glyphs[ii];\r\n                    const glyphWidth = this.getGlyphWidth(glyph, fontData);\r\n                    max = Math.max(max, runWidth + glyphWidth); // A glyph can extend past the right edge of subsequent glyphs.\r\n                    ii++;\r\n                    runWidth += (_a = xAdvances[ii]) !== null && _a !== void 0 ? _a : 0;\r\n                }\r\n                run.width = Math.max(runWidth, max) - run.x;\r\n                width = Math.max(width, run.x + (isNaN(run.width) ? runWidth : run.width));\r\n            }\r\n            this.width = width;\r\n        };\r\n        this.alignRuns = (targetWidth, halign) => {\r\n            if ((halign & Utils_1.Align.left) === 0) {\r\n                // Not left aligned, so must be center or right aligned.\r\n                const center = (halign & Utils_1.Align.center) !== 0;\r\n                const runsItems = [...this.runs];\r\n                for (let i = 0, n = this.runs.length; i < n; i++) {\r\n                    const run = runsItems[i];\r\n                    run.x += center ? 0.5 * (targetWidth - run.width) : targetWidth - run.width;\r\n                }\r\n            }\r\n        };\r\n        /** @param truncate May be empty string. */\r\n        this.truncate = (fontData, run, targetWidth, truncate) => {\r\n            let glyphCount = run.glyphs.length;\r\n            // Determine truncate string size.\r\n            const truncateRun = this.glyphRunPool.obtain();\r\n            fontData.getGlyphs(truncateRun, truncate, 0, truncate.length, null);\r\n            let truncateWidth = 0;\r\n            if (truncateRun.xAdvances.length > 0) {\r\n                this.setLastGlyphXAdvance(fontData, truncateRun);\r\n                const xAdvances = truncateRun.xAdvances;\r\n                // Skip first for tight bounds.\r\n                for (let i = 1; i < truncateRun.xAdvances.length; i++) {\r\n                    truncateWidth += xAdvances[i];\r\n                }\r\n            }\r\n            targetWidth -= truncateWidth;\r\n            // Determine visible glyphs.\r\n            let count = 0;\r\n            let width = run.x;\r\n            const xAdvances = run.xAdvances;\r\n            while (count < run.xAdvances.length) {\r\n                const xAdvance = xAdvances[count];\r\n                width += xAdvance;\r\n                if (width > targetWidth)\r\n                    break;\r\n                count++;\r\n            }\r\n            if (count > 1) {\r\n                // Some run glyphs fit, append truncate glyphs.\r\n                if (count - 1 >= 0 && run.glyphs.length > count - 1) {\r\n                    for (let i = count - 1; i < run.glyphs.length; i++) {\r\n                        run.glyphs.splice(i, 1);\r\n                    }\r\n                }\r\n                if (count >= 0 && run.xAdvances.length > count) {\r\n                    for (let i = count; i < run.xAdvances.length; i++) {\r\n                        run.xAdvances.splice(i, 1);\r\n                    }\r\n                }\r\n                this.setLastGlyphXAdvance(fontData, run);\r\n                if (truncateRun.xAdvances.length > 0) {\r\n                    Utils_1.Utils.arrayCopy(truncateRun.xAdvances, 1, run.xAdvances, run.xAdvances.length, truncateRun.xAdvances.length - 1);\r\n                }\r\n            }\r\n            else {\r\n                // No run glyphs fit, use only truncate glyphs.\r\n                run.glyphs.length = 0;\r\n                run.xAdvances.length = 0;\r\n                // run.xAdvances.addAll(truncateRun.xAdvances);\r\n                Utils_1.Utils.arrayCopy(truncateRun.xAdvances, 0, run.xAdvances, run.xAdvances.length, truncateRun.xAdvances.length);\r\n            }\r\n            const droppedGlyphCount = glyphCount - run.glyphs.length;\r\n            if (droppedGlyphCount > 0) {\r\n                this.glyphCount -= droppedGlyphCount;\r\n                if (fontData.markupEnabled) {\r\n                    while (this.colors.length > 2 && this.colors[this.colors.length - 2] >= this.glyphCount)\r\n                        this.colors.length -= 2;\r\n                }\r\n            }\r\n            Utils_1.Utils.arrayCopy(truncateRun.glyphs, 0, run.glyphs, run.glyphs.length, truncateRun.glyphs.length);\r\n            this.glyphCount += truncate.length;\r\n            this.glyphRunPool.free(truncateRun);\r\n        };\r\n        /** Sets the xadvance of the last glyph to use its width instead of xadvance. */\r\n        this.setLastGlyphXAdvance = (fontData, run) => {\r\n            const last = run.glyphs[run.glyphs.length - 1];\r\n            if (!last.fixedWidth)\r\n                run.xAdvances[run.xAdvances.length - 1] = this.getGlyphWidth(last, fontData);\r\n        };\r\n        /** Returns the distance from the glyph's drawing position to the right edge of the glyph. */\r\n        this.getGlyphWidth = (glyph, fontData) => {\r\n            return (glyph.width + glyph.xoffset) * fontData.scaleX - fontData.padRight;\r\n        };\r\n        /** Returns an X offset for the first glyph so when drawn, none of it is left of the line's drawing position. */\r\n        this.getLineOffset = (glyphs, fontData) => {\r\n            return -glyphs[0].xoffset * fontData.scaleX - fontData.padLeft;\r\n        };\r\n        this.reset = () => {\r\n            this.glyphRunPool.freeAll(this.runs);\r\n            this.runs.length = 0;\r\n            this.colors.length = 0;\r\n            this.glyphCount = 0;\r\n            this.width = 0;\r\n            this.height = 0;\r\n        };\r\n        this.setText(font, str, start, end, color, targetWidth, hAlign, wrap, truncate);\r\n    }\r\n    /** Breaks a run into two runs at the specified wrapIndex.\r\n     * @return May be null if second run is all whitespace. */\r\n    wrap(fontData, first, wrapIndex) {\r\n        const glyphCount = first.glyphs.length;\r\n        let glyphs2 = first.glyphs; // Starts with all the glyphs.\r\n        let xAdvances2 = first.xAdvances; // Starts with all the xadvances.\r\n        // Skip whitespace before the wrap index.\r\n        let firstEnd = wrapIndex;\r\n        for (; firstEnd > 0; firstEnd--)\r\n            if (!fontData.isWhitespace(glyphs2[firstEnd - 1].id))\r\n                break;\r\n        // Skip whitespace after the wrap index.\r\n        let secondStart = wrapIndex;\r\n        for (; secondStart < glyphCount; secondStart++)\r\n            if (!fontData.isWhitespace(glyphs2[secondStart].id))\r\n                break;\r\n        // Copy wrapped glyphs and xadvances to second run.\r\n        // The second run will contain the remaining glyph data, so swap instances rather than copying.\r\n        let second;\r\n        if (secondStart < glyphCount) {\r\n            second = this.glyphRunPool.obtain();\r\n            const glyphs1 = second.glyphs; // Starts empty.\r\n            Utils_1.Utils.arrayCopy(glyphs2, 0, glyphs1, glyphs1.length, firstEnd);\r\n            // glyphs2.removeRange(0, secondStart - 1);\r\n            glyphs2.splice(0, secondStart - 1 + 1);\r\n            first.glyphs = glyphs1;\r\n            second.glyphs = glyphs2;\r\n            const xAdvances1 = second.xAdvances; // Starts empty.\r\n            Utils_1.Utils.arrayCopy(xAdvances2, 0, xAdvances1, xAdvances1.length, firstEnd + 1);\r\n            // xAdvances2.removeRange(1, secondStart); // Leave first entry to be overwritten by next line.\r\n            xAdvances2.splice(1, secondStart); // Leave first entry to be overwritten by next line.\r\n            xAdvances2[0] = this.getLineOffset(glyphs2, fontData);\r\n            first.xAdvances = xAdvances1;\r\n            second.xAdvances = xAdvances2;\r\n            const firstGlyphCount = first.glyphs.length; // After wrapping it.\r\n            const secondGlyphCount = second.glyphs.length;\r\n            const droppedGlyphCount = glyphCount - firstGlyphCount - secondGlyphCount;\r\n            this.glyphCount -= droppedGlyphCount;\r\n            if (fontData.markupEnabled && droppedGlyphCount > 0) {\r\n                const reductionThreshold = this.glyphCount - secondGlyphCount;\r\n                for (let i = this.colors.length - 2; i >= 2; i -= 2) {\r\n                    // i >= 1 because first 2 values always determine the base color.\r\n                    const colorChangeIndex = this.colors[i];\r\n                    if (colorChangeIndex <= reductionThreshold)\r\n                        break;\r\n                    this.colors[i] = colorChangeIndex - droppedGlyphCount;\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            // Second run is empty, just trim whitespace glyphs from end of first run.\r\n            glyphs2 = glyphs2.slice(0, firstEnd);\r\n            xAdvances2 = xAdvances2.slice(0, firstEnd + 1);\r\n            const droppedGlyphCount = secondStart - firstEnd;\r\n            if (droppedGlyphCount > 0) {\r\n                this.glyphCount -= droppedGlyphCount;\r\n                if (fontData.markupEnabled && this.colors[this.colors.length - 2] > this.glyphCount) {\r\n                    // Many color changes can be hidden in the dropped whitespace, so keep only the very last color entry.\r\n                    const lastColor = this.colors[this.colors.length - 1];\r\n                    while (this.colors[this.colors.length - 2] > this.glyphCount)\r\n                        this.colors.length -= 2;\r\n                    this.colors[this.colors.length - 2] = this.glyphCount; // Update color change index.\r\n                    this.colors[this.colors.length - 1] = lastColor; // Update color entry.\r\n                }\r\n            }\r\n        }\r\n        if (firstEnd === 0) {\r\n            // If the first run is now empty, remove it.\r\n            this.glyphRunPool.free(first);\r\n            this.runs.pop();\r\n        }\r\n        else\r\n            this.setLastGlyphXAdvance(fontData, first);\r\n        return second;\r\n    }\r\n}\r\nexports.GlyphLayout = GlyphLayout;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.GlyphRun = void 0;\r\nclass GlyphRun {\r\n    constructor() {\r\n        this.glyphs = [];\r\n        this.xAdvances = [];\r\n        this.appendRun = (run) => {\r\n            this.glyphs.concat(run.glyphs);\r\n            // Remove the width of the last glyph. The first xadvance of the appended run has kerning for the last glyph of this run.\r\n            if (!this.xAdvances.length)\r\n                this.xAdvances.length--;\r\n            this.xAdvances.concat(run.xAdvances);\r\n        };\r\n        this.reset = () => {\r\n            this.glyphs.length = 0;\r\n            this.xAdvances.length = 0;\r\n        };\r\n    }\r\n}\r\nexports.GlyphRun = GlyphRun;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.InputHandler = exports.InputEvent = void 0;\r\nconst events_1 = require(\"events\");\r\nconst Vector2_1 = require(\"./Vector2\");\r\nvar InputEvent;\r\n(function (InputEvent) {\r\n    InputEvent[\"TouchStart\"] = \"touchStart\";\r\n    InputEvent[\"TouchEnd\"] = \"touchEnd\";\r\n    InputEvent[\"TouchMove\"] = \"touchMove\";\r\n})(InputEvent = exports.InputEvent || (exports.InputEvent = {}));\r\nclass InputHandler {\r\n    constructor(canvas) {\r\n        this.screenCoord = new Vector2_1.Vector2();\r\n        this.worldCoord = new Vector2_1.Vector2();\r\n        this.canvas = canvas;\r\n        this.lastX = 0;\r\n        this.lastY = 0;\r\n        this.touched = false;\r\n        const emitter = (this.emitter = new events_1.EventEmitter());\r\n        this.mouseDownHandler = evt => {\r\n            this.touched = true;\r\n            this.handleMove(evt);\r\n            emitter.emit('touchStart', this.getX(), this.getY());\r\n        };\r\n        this.mouseUpHandler = evt => {\r\n            this.touched = false;\r\n            emitter.emit('touchEnd', this.getX(), this.getY());\r\n        };\r\n        this.mouseMoveHandler = evt => {\r\n            this.handleMove(evt);\r\n            emitter.emit('touchMove', this.getX(), this.getY());\r\n        };\r\n        this.touchStartHandler = evt => {\r\n            evt.preventDefault();\r\n            // TODO: handle multi touch\r\n            let touch = evt.touches[0];\r\n            this.canvas.dispatchEvent(new MouseEvent('mousedown', {\r\n                clientX: touch.clientX,\r\n                clientY: touch.clientY\r\n            }));\r\n        };\r\n        this.touchEndHandler = evt => {\r\n            evt.preventDefault();\r\n            this.canvas.dispatchEvent(new MouseEvent('mouseup'));\r\n        };\r\n        this.touchMoveHandler = evt => {\r\n            evt.preventDefault();\r\n            let touch = evt.touches[0];\r\n            this.canvas.dispatchEvent(new MouseEvent('mousemove', {\r\n                clientX: touch.clientX,\r\n                clientY: touch.clientY\r\n            }));\r\n        };\r\n        this.canvas.addEventListener('mousedown', this.mouseDownHandler, false);\r\n        this.canvas.addEventListener('mouseup', this.mouseUpHandler, false);\r\n        this.canvas.addEventListener('mousemove', this.mouseMoveHandler, false);\r\n        this.canvas.addEventListener('touchstart', this.touchStartHandler, false);\r\n        this.canvas.addEventListener('touchend', this.touchEndHandler, false);\r\n        this.canvas.addEventListener('touchmove', this.touchMoveHandler, false);\r\n    }\r\n    cleanup() {\r\n        this.canvas.removeEventListener('mousedown', this.mouseDownHandler);\r\n        this.canvas.removeEventListener('mouseup', this.mouseUpHandler);\r\n        this.canvas.removeEventListener('mousemove', this.mouseMoveHandler);\r\n        this.canvas.removeEventListener('touchstart', this.touchStartHandler);\r\n        this.canvas.removeEventListener('touchend', this.touchEndHandler);\r\n        this.canvas.removeEventListener('touchmove', this.touchMoveHandler);\r\n    }\r\n    addEventListener(event, listener) {\r\n        this.emitter.addListener(event, listener);\r\n    }\r\n    handleMove(evt) {\r\n        const rect = this.canvas.getBoundingClientRect();\r\n        const x = evt.clientX - rect.left;\r\n        const y = evt.clientY - rect.top;\r\n        this.lastX = x;\r\n        this.lastY = y;\r\n    }\r\n    getX() {\r\n        return this.lastX;\r\n    }\r\n    getY() {\r\n        return this.lastY;\r\n    }\r\n    isTouched() {\r\n        return this.touched;\r\n    }\r\n    getTouchedWorldCoord(camera) {\r\n        this.screenCoord.set(this.getX(), this.getY());\r\n        camera.unprojectVector2(this.worldCoord, this.screenCoord);\r\n        return this.worldCoord;\r\n    }\r\n}\r\nexports.InputHandler = InputHandler;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Matrix4 = exports.M33 = exports.M32 = exports.M31 = exports.M30 = exports.M23 = exports.M22 = exports.M21 = exports.M20 = exports.M13 = exports.M12 = exports.M11 = exports.M10 = exports.M03 = exports.M02 = exports.M01 = exports.M00 = void 0;\r\nconst Vector3_1 = require(\"./Vector3\");\r\nexports.M00 = 0;\r\nexports.M01 = 4;\r\nexports.M02 = 8;\r\nexports.M03 = 12;\r\nexports.M10 = 1;\r\nexports.M11 = 5;\r\nexports.M12 = 9;\r\nexports.M13 = 13;\r\nexports.M20 = 2;\r\nexports.M21 = 6;\r\nexports.M22 = 10;\r\nexports.M23 = 14;\r\nexports.M30 = 3;\r\nexports.M31 = 7;\r\nexports.M32 = 11;\r\nexports.M33 = 15;\r\nclass Matrix4 {\r\n    constructor() {\r\n        this.temp = new Float32Array(16);\r\n        this.values = new Float32Array(16);\r\n        let v = this.values;\r\n        v[exports.M00] = 1;\r\n        v[exports.M11] = 1;\r\n        v[exports.M22] = 1;\r\n        v[exports.M33] = 1;\r\n    }\r\n    set(values) {\r\n        this.values.set(values);\r\n        return this;\r\n    }\r\n    transpose() {\r\n        let t = this.temp;\r\n        let v = this.values;\r\n        t[exports.M00] = v[exports.M00];\r\n        t[exports.M01] = v[exports.M10];\r\n        t[exports.M02] = v[exports.M20];\r\n        t[exports.M03] = v[exports.M30];\r\n        t[exports.M10] = v[exports.M01];\r\n        t[exports.M11] = v[exports.M11];\r\n        t[exports.M12] = v[exports.M21];\r\n        t[exports.M13] = v[exports.M31];\r\n        t[exports.M20] = v[exports.M02];\r\n        t[exports.M21] = v[exports.M12];\r\n        t[exports.M22] = v[exports.M22];\r\n        t[exports.M23] = v[exports.M32];\r\n        t[exports.M30] = v[exports.M03];\r\n        t[exports.M31] = v[exports.M13];\r\n        t[exports.M32] = v[exports.M23];\r\n        t[exports.M33] = v[exports.M33];\r\n        return this.set(t);\r\n    }\r\n    identity() {\r\n        let v = this.values;\r\n        v[exports.M00] = 1;\r\n        v[exports.M01] = 0;\r\n        v[exports.M02] = 0;\r\n        v[exports.M03] = 0;\r\n        v[exports.M10] = 0;\r\n        v[exports.M11] = 1;\r\n        v[exports.M12] = 0;\r\n        v[exports.M13] = 0;\r\n        v[exports.M20] = 0;\r\n        v[exports.M21] = 0;\r\n        v[exports.M22] = 1;\r\n        v[exports.M23] = 0;\r\n        v[exports.M30] = 0;\r\n        v[exports.M31] = 0;\r\n        v[exports.M32] = 0;\r\n        v[exports.M33] = 1;\r\n        return this;\r\n    }\r\n    invert() {\r\n        let v = this.values;\r\n        let t = this.temp;\r\n        let l_det = v[exports.M30] * v[exports.M21] * v[exports.M12] * v[exports.M03] -\r\n            v[exports.M20] * v[exports.M31] * v[exports.M12] * v[exports.M03] -\r\n            v[exports.M30] * v[exports.M11] * v[exports.M22] * v[exports.M03] +\r\n            v[exports.M10] * v[exports.M31] * v[exports.M22] * v[exports.M03] +\r\n            v[exports.M20] * v[exports.M11] * v[exports.M32] * v[exports.M03] -\r\n            v[exports.M10] * v[exports.M21] * v[exports.M32] * v[exports.M03] -\r\n            v[exports.M30] * v[exports.M21] * v[exports.M02] * v[exports.M13] +\r\n            v[exports.M20] * v[exports.M31] * v[exports.M02] * v[exports.M13] +\r\n            v[exports.M30] * v[exports.M01] * v[exports.M22] * v[exports.M13] -\r\n            v[exports.M00] * v[exports.M31] * v[exports.M22] * v[exports.M13] -\r\n            v[exports.M20] * v[exports.M01] * v[exports.M32] * v[exports.M13] +\r\n            v[exports.M00] * v[exports.M21] * v[exports.M32] * v[exports.M13] +\r\n            v[exports.M30] * v[exports.M11] * v[exports.M02] * v[exports.M23] -\r\n            v[exports.M10] * v[exports.M31] * v[exports.M02] * v[exports.M23] -\r\n            v[exports.M30] * v[exports.M01] * v[exports.M12] * v[exports.M23] +\r\n            v[exports.M00] * v[exports.M31] * v[exports.M12] * v[exports.M23] +\r\n            v[exports.M10] * v[exports.M01] * v[exports.M32] * v[exports.M23] -\r\n            v[exports.M00] * v[exports.M11] * v[exports.M32] * v[exports.M23] -\r\n            v[exports.M20] * v[exports.M11] * v[exports.M02] * v[exports.M33] +\r\n            v[exports.M10] * v[exports.M21] * v[exports.M02] * v[exports.M33] +\r\n            v[exports.M20] * v[exports.M01] * v[exports.M12] * v[exports.M33] -\r\n            v[exports.M00] * v[exports.M21] * v[exports.M12] * v[exports.M33] -\r\n            v[exports.M10] * v[exports.M01] * v[exports.M22] * v[exports.M33] +\r\n            v[exports.M00] * v[exports.M11] * v[exports.M22] * v[exports.M33];\r\n        if (l_det === 0)\r\n            throw new Error('non-invertible matrix');\r\n        let inv_det = 1.0 / l_det;\r\n        t[exports.M00] =\r\n            v[exports.M12] * v[exports.M23] * v[exports.M31] -\r\n                v[exports.M13] * v[exports.M22] * v[exports.M31] +\r\n                v[exports.M13] * v[exports.M21] * v[exports.M32] -\r\n                v[exports.M11] * v[exports.M23] * v[exports.M32] -\r\n                v[exports.M12] * v[exports.M21] * v[exports.M33] +\r\n                v[exports.M11] * v[exports.M22] * v[exports.M33];\r\n        t[exports.M01] =\r\n            v[exports.M03] * v[exports.M22] * v[exports.M31] -\r\n                v[exports.M02] * v[exports.M23] * v[exports.M31] -\r\n                v[exports.M03] * v[exports.M21] * v[exports.M32] +\r\n                v[exports.M01] * v[exports.M23] * v[exports.M32] +\r\n                v[exports.M02] * v[exports.M21] * v[exports.M33] -\r\n                v[exports.M01] * v[exports.M22] * v[exports.M33];\r\n        t[exports.M02] =\r\n            v[exports.M02] * v[exports.M13] * v[exports.M31] -\r\n                v[exports.M03] * v[exports.M12] * v[exports.M31] +\r\n                v[exports.M03] * v[exports.M11] * v[exports.M32] -\r\n                v[exports.M01] * v[exports.M13] * v[exports.M32] -\r\n                v[exports.M02] * v[exports.M11] * v[exports.M33] +\r\n                v[exports.M01] * v[exports.M12] * v[exports.M33];\r\n        t[exports.M03] =\r\n            v[exports.M03] * v[exports.M12] * v[exports.M21] -\r\n                v[exports.M02] * v[exports.M13] * v[exports.M21] -\r\n                v[exports.M03] * v[exports.M11] * v[exports.M22] +\r\n                v[exports.M01] * v[exports.M13] * v[exports.M22] +\r\n                v[exports.M02] * v[exports.M11] * v[exports.M23] -\r\n                v[exports.M01] * v[exports.M12] * v[exports.M23];\r\n        t[exports.M10] =\r\n            v[exports.M13] * v[exports.M22] * v[exports.M30] -\r\n                v[exports.M12] * v[exports.M23] * v[exports.M30] -\r\n                v[exports.M13] * v[exports.M20] * v[exports.M32] +\r\n                v[exports.M10] * v[exports.M23] * v[exports.M32] +\r\n                v[exports.M12] * v[exports.M20] * v[exports.M33] -\r\n                v[exports.M10] * v[exports.M22] * v[exports.M33];\r\n        t[exports.M11] =\r\n            v[exports.M02] * v[exports.M23] * v[exports.M30] -\r\n                v[exports.M03] * v[exports.M22] * v[exports.M30] +\r\n                v[exports.M03] * v[exports.M20] * v[exports.M32] -\r\n                v[exports.M00] * v[exports.M23] * v[exports.M32] -\r\n                v[exports.M02] * v[exports.M20] * v[exports.M33] +\r\n                v[exports.M00] * v[exports.M22] * v[exports.M33];\r\n        t[exports.M12] =\r\n            v[exports.M03] * v[exports.M12] * v[exports.M30] -\r\n                v[exports.M02] * v[exports.M13] * v[exports.M30] -\r\n                v[exports.M03] * v[exports.M10] * v[exports.M32] +\r\n                v[exports.M00] * v[exports.M13] * v[exports.M32] +\r\n                v[exports.M02] * v[exports.M10] * v[exports.M33] -\r\n                v[exports.M00] * v[exports.M12] * v[exports.M33];\r\n        t[exports.M13] =\r\n            v[exports.M02] * v[exports.M13] * v[exports.M20] -\r\n                v[exports.M03] * v[exports.M12] * v[exports.M20] +\r\n                v[exports.M03] * v[exports.M10] * v[exports.M22] -\r\n                v[exports.M00] * v[exports.M13] * v[exports.M22] -\r\n                v[exports.M02] * v[exports.M10] * v[exports.M23] +\r\n                v[exports.M00] * v[exports.M12] * v[exports.M23];\r\n        t[exports.M20] =\r\n            v[exports.M11] * v[exports.M23] * v[exports.M30] -\r\n                v[exports.M13] * v[exports.M21] * v[exports.M30] +\r\n                v[exports.M13] * v[exports.M20] * v[exports.M31] -\r\n                v[exports.M10] * v[exports.M23] * v[exports.M31] -\r\n                v[exports.M11] * v[exports.M20] * v[exports.M33] +\r\n                v[exports.M10] * v[exports.M21] * v[exports.M33];\r\n        t[exports.M21] =\r\n            v[exports.M03] * v[exports.M21] * v[exports.M30] -\r\n                v[exports.M01] * v[exports.M23] * v[exports.M30] -\r\n                v[exports.M03] * v[exports.M20] * v[exports.M31] +\r\n                v[exports.M00] * v[exports.M23] * v[exports.M31] +\r\n                v[exports.M01] * v[exports.M20] * v[exports.M33] -\r\n                v[exports.M00] * v[exports.M21] * v[exports.M33];\r\n        t[exports.M22] =\r\n            v[exports.M01] * v[exports.M13] * v[exports.M30] -\r\n                v[exports.M03] * v[exports.M11] * v[exports.M30] +\r\n                v[exports.M03] * v[exports.M10] * v[exports.M31] -\r\n                v[exports.M00] * v[exports.M13] * v[exports.M31] -\r\n                v[exports.M01] * v[exports.M10] * v[exports.M33] +\r\n                v[exports.M00] * v[exports.M11] * v[exports.M33];\r\n        t[exports.M23] =\r\n            v[exports.M03] * v[exports.M11] * v[exports.M20] -\r\n                v[exports.M01] * v[exports.M13] * v[exports.M20] -\r\n                v[exports.M03] * v[exports.M10] * v[exports.M21] +\r\n                v[exports.M00] * v[exports.M13] * v[exports.M21] +\r\n                v[exports.M01] * v[exports.M10] * v[exports.M23] -\r\n                v[exports.M00] * v[exports.M11] * v[exports.M23];\r\n        t[exports.M30] =\r\n            v[exports.M12] * v[exports.M21] * v[exports.M30] -\r\n                v[exports.M11] * v[exports.M22] * v[exports.M30] -\r\n                v[exports.M12] * v[exports.M20] * v[exports.M31] +\r\n                v[exports.M10] * v[exports.M22] * v[exports.M31] +\r\n                v[exports.M11] * v[exports.M20] * v[exports.M32] -\r\n                v[exports.M10] * v[exports.M21] * v[exports.M32];\r\n        t[exports.M31] =\r\n            v[exports.M01] * v[exports.M22] * v[exports.M30] -\r\n                v[exports.M02] * v[exports.M21] * v[exports.M30] +\r\n                v[exports.M02] * v[exports.M20] * v[exports.M31] -\r\n                v[exports.M00] * v[exports.M22] * v[exports.M31] -\r\n                v[exports.M01] * v[exports.M20] * v[exports.M32] +\r\n                v[exports.M00] * v[exports.M21] * v[exports.M32];\r\n        t[exports.M32] =\r\n            v[exports.M02] * v[exports.M11] * v[exports.M30] -\r\n                v[exports.M01] * v[exports.M12] * v[exports.M30] -\r\n                v[exports.M02] * v[exports.M10] * v[exports.M31] +\r\n                v[exports.M00] * v[exports.M12] * v[exports.M31] +\r\n                v[exports.M01] * v[exports.M10] * v[exports.M32] -\r\n                v[exports.M00] * v[exports.M11] * v[exports.M32];\r\n        t[exports.M33] =\r\n            v[exports.M01] * v[exports.M12] * v[exports.M20] -\r\n                v[exports.M02] * v[exports.M11] * v[exports.M20] +\r\n                v[exports.M02] * v[exports.M10] * v[exports.M21] -\r\n                v[exports.M00] * v[exports.M12] * v[exports.M21] -\r\n                v[exports.M01] * v[exports.M10] * v[exports.M22] +\r\n                v[exports.M00] * v[exports.M11] * v[exports.M22];\r\n        v[exports.M00] = t[exports.M00] * inv_det;\r\n        v[exports.M01] = t[exports.M01] * inv_det;\r\n        v[exports.M02] = t[exports.M02] * inv_det;\r\n        v[exports.M03] = t[exports.M03] * inv_det;\r\n        v[exports.M10] = t[exports.M10] * inv_det;\r\n        v[exports.M11] = t[exports.M11] * inv_det;\r\n        v[exports.M12] = t[exports.M12] * inv_det;\r\n        v[exports.M13] = t[exports.M13] * inv_det;\r\n        v[exports.M20] = t[exports.M20] * inv_det;\r\n        v[exports.M21] = t[exports.M21] * inv_det;\r\n        v[exports.M22] = t[exports.M22] * inv_det;\r\n        v[exports.M23] = t[exports.M23] * inv_det;\r\n        v[exports.M30] = t[exports.M30] * inv_det;\r\n        v[exports.M31] = t[exports.M31] * inv_det;\r\n        v[exports.M32] = t[exports.M32] * inv_det;\r\n        v[exports.M33] = t[exports.M33] * inv_det;\r\n        return this;\r\n    }\r\n    determinant() {\r\n        let v = this.values;\r\n        return (v[exports.M30] * v[exports.M21] * v[exports.M12] * v[exports.M03] -\r\n            v[exports.M20] * v[exports.M31] * v[exports.M12] * v[exports.M03] -\r\n            v[exports.M30] * v[exports.M11] * v[exports.M22] * v[exports.M03] +\r\n            v[exports.M10] * v[exports.M31] * v[exports.M22] * v[exports.M03] +\r\n            v[exports.M20] * v[exports.M11] * v[exports.M32] * v[exports.M03] -\r\n            v[exports.M10] * v[exports.M21] * v[exports.M32] * v[exports.M03] -\r\n            v[exports.M30] * v[exports.M21] * v[exports.M02] * v[exports.M13] +\r\n            v[exports.M20] * v[exports.M31] * v[exports.M02] * v[exports.M13] +\r\n            v[exports.M30] * v[exports.M01] * v[exports.M22] * v[exports.M13] -\r\n            v[exports.M00] * v[exports.M31] * v[exports.M22] * v[exports.M13] -\r\n            v[exports.M20] * v[exports.M01] * v[exports.M32] * v[exports.M13] +\r\n            v[exports.M00] * v[exports.M21] * v[exports.M32] * v[exports.M13] +\r\n            v[exports.M30] * v[exports.M11] * v[exports.M02] * v[exports.M23] -\r\n            v[exports.M10] * v[exports.M31] * v[exports.M02] * v[exports.M23] -\r\n            v[exports.M30] * v[exports.M01] * v[exports.M12] * v[exports.M23] +\r\n            v[exports.M00] * v[exports.M31] * v[exports.M12] * v[exports.M23] +\r\n            v[exports.M10] * v[exports.M01] * v[exports.M32] * v[exports.M23] -\r\n            v[exports.M00] * v[exports.M11] * v[exports.M32] * v[exports.M23] -\r\n            v[exports.M20] * v[exports.M11] * v[exports.M02] * v[exports.M33] +\r\n            v[exports.M10] * v[exports.M21] * v[exports.M02] * v[exports.M33] +\r\n            v[exports.M20] * v[exports.M01] * v[exports.M12] * v[exports.M33] -\r\n            v[exports.M00] * v[exports.M21] * v[exports.M12] * v[exports.M33] -\r\n            v[exports.M10] * v[exports.M01] * v[exports.M22] * v[exports.M33] +\r\n            v[exports.M00] * v[exports.M11] * v[exports.M22] * v[exports.M33]);\r\n    }\r\n    translate(x, y, z) {\r\n        let v = this.values;\r\n        v[exports.M03] += x;\r\n        v[exports.M13] += y;\r\n        v[exports.M23] += z;\r\n        return this;\r\n    }\r\n    copy() {\r\n        return new Matrix4().set(this.values);\r\n    }\r\n    projection(near, far, fovy, aspectRatio) {\r\n        this.identity();\r\n        let l_fd = 1.0 / Math.tan((fovy * (Math.PI / 180)) / 2.0);\r\n        let l_a1 = (far + near) / (near - far);\r\n        let l_a2 = (2 * far * near) / (near - far);\r\n        let v = this.values;\r\n        v[exports.M00] = l_fd / aspectRatio;\r\n        v[exports.M10] = 0;\r\n        v[exports.M20] = 0;\r\n        v[exports.M30] = 0;\r\n        v[exports.M01] = 0;\r\n        v[exports.M11] = l_fd;\r\n        v[exports.M21] = 0;\r\n        v[exports.M31] = 0;\r\n        v[exports.M02] = 0;\r\n        v[exports.M12] = 0;\r\n        v[exports.M22] = l_a1;\r\n        v[exports.M32] = -1;\r\n        v[exports.M03] = 0;\r\n        v[exports.M13] = 0;\r\n        v[exports.M23] = l_a2;\r\n        v[exports.M33] = 0;\r\n        return this;\r\n    }\r\n    ortho2d(x, y, width, height) {\r\n        return this.ortho(x, x + width, y, y + height, 0, 1);\r\n    }\r\n    ortho(left, right, bottom, top, near, far) {\r\n        this.identity();\r\n        let x_orth = 2 / (right - left);\r\n        let y_orth = 2 / (top - bottom);\r\n        let z_orth = -2 / (far - near);\r\n        let tx = -(right + left) / (right - left);\r\n        let ty = -(top + bottom) / (top - bottom);\r\n        let tz = -(far + near) / (far - near);\r\n        let v = this.values;\r\n        v[exports.M00] = x_orth;\r\n        v[exports.M10] = 0;\r\n        v[exports.M20] = 0;\r\n        v[exports.M30] = 0;\r\n        v[exports.M01] = 0;\r\n        v[exports.M11] = y_orth;\r\n        v[exports.M21] = 0;\r\n        v[exports.M31] = 0;\r\n        v[exports.M02] = 0;\r\n        v[exports.M12] = 0;\r\n        v[exports.M22] = z_orth;\r\n        v[exports.M32] = 0;\r\n        v[exports.M03] = tx;\r\n        v[exports.M13] = ty;\r\n        v[exports.M23] = tz;\r\n        v[exports.M33] = 1;\r\n        return this;\r\n    }\r\n    multiply(matrix) {\r\n        let t = this.temp;\r\n        let v = this.values;\r\n        let m = matrix.values;\r\n        t[exports.M00] = v[exports.M00] * m[exports.M00] + v[exports.M01] * m[exports.M10] + v[exports.M02] * m[exports.M20] + v[exports.M03] * m[exports.M30];\r\n        t[exports.M01] = v[exports.M00] * m[exports.M01] + v[exports.M01] * m[exports.M11] + v[exports.M02] * m[exports.M21] + v[exports.M03] * m[exports.M31];\r\n        t[exports.M02] = v[exports.M00] * m[exports.M02] + v[exports.M01] * m[exports.M12] + v[exports.M02] * m[exports.M22] + v[exports.M03] * m[exports.M32];\r\n        t[exports.M03] = v[exports.M00] * m[exports.M03] + v[exports.M01] * m[exports.M13] + v[exports.M02] * m[exports.M23] + v[exports.M03] * m[exports.M33];\r\n        t[exports.M10] = v[exports.M10] * m[exports.M00] + v[exports.M11] * m[exports.M10] + v[exports.M12] * m[exports.M20] + v[exports.M13] * m[exports.M30];\r\n        t[exports.M11] = v[exports.M10] * m[exports.M01] + v[exports.M11] * m[exports.M11] + v[exports.M12] * m[exports.M21] + v[exports.M13] * m[exports.M31];\r\n        t[exports.M12] = v[exports.M10] * m[exports.M02] + v[exports.M11] * m[exports.M12] + v[exports.M12] * m[exports.M22] + v[exports.M13] * m[exports.M32];\r\n        t[exports.M13] = v[exports.M10] * m[exports.M03] + v[exports.M11] * m[exports.M13] + v[exports.M12] * m[exports.M23] + v[exports.M13] * m[exports.M33];\r\n        t[exports.M20] = v[exports.M20] * m[exports.M00] + v[exports.M21] * m[exports.M10] + v[exports.M22] * m[exports.M20] + v[exports.M23] * m[exports.M30];\r\n        t[exports.M21] = v[exports.M20] * m[exports.M01] + v[exports.M21] * m[exports.M11] + v[exports.M22] * m[exports.M21] + v[exports.M23] * m[exports.M31];\r\n        t[exports.M22] = v[exports.M20] * m[exports.M02] + v[exports.M21] * m[exports.M12] + v[exports.M22] * m[exports.M22] + v[exports.M23] * m[exports.M32];\r\n        t[exports.M23] = v[exports.M20] * m[exports.M03] + v[exports.M21] * m[exports.M13] + v[exports.M22] * m[exports.M23] + v[exports.M23] * m[exports.M33];\r\n        t[exports.M30] = v[exports.M30] * m[exports.M00] + v[exports.M31] * m[exports.M10] + v[exports.M32] * m[exports.M20] + v[exports.M33] * m[exports.M30];\r\n        t[exports.M31] = v[exports.M30] * m[exports.M01] + v[exports.M31] * m[exports.M11] + v[exports.M32] * m[exports.M21] + v[exports.M33] * m[exports.M31];\r\n        t[exports.M32] = v[exports.M30] * m[exports.M02] + v[exports.M31] * m[exports.M12] + v[exports.M32] * m[exports.M22] + v[exports.M33] * m[exports.M32];\r\n        t[exports.M33] = v[exports.M30] * m[exports.M03] + v[exports.M31] * m[exports.M13] + v[exports.M32] * m[exports.M23] + v[exports.M33] * m[exports.M33];\r\n        return this.set(this.temp);\r\n    }\r\n    multiplyLeft(matrix) {\r\n        let t = this.temp;\r\n        let v = this.values;\r\n        let m = matrix.values;\r\n        t[exports.M00] = m[exports.M00] * v[exports.M00] + m[exports.M01] * v[exports.M10] + m[exports.M02] * v[exports.M20] + m[exports.M03] * v[exports.M30];\r\n        t[exports.M01] = m[exports.M00] * v[exports.M01] + m[exports.M01] * v[exports.M11] + m[exports.M02] * v[exports.M21] + m[exports.M03] * v[exports.M31];\r\n        t[exports.M02] = m[exports.M00] * v[exports.M02] + m[exports.M01] * v[exports.M12] + m[exports.M02] * v[exports.M22] + m[exports.M03] * v[exports.M32];\r\n        t[exports.M03] = m[exports.M00] * v[exports.M03] + m[exports.M01] * v[exports.M13] + m[exports.M02] * v[exports.M23] + m[exports.M03] * v[exports.M33];\r\n        t[exports.M10] = m[exports.M10] * v[exports.M00] + m[exports.M11] * v[exports.M10] + m[exports.M12] * v[exports.M20] + m[exports.M13] * v[exports.M30];\r\n        t[exports.M11] = m[exports.M10] * v[exports.M01] + m[exports.M11] * v[exports.M11] + m[exports.M12] * v[exports.M21] + m[exports.M13] * v[exports.M31];\r\n        t[exports.M12] = m[exports.M10] * v[exports.M02] + m[exports.M11] * v[exports.M12] + m[exports.M12] * v[exports.M22] + m[exports.M13] * v[exports.M32];\r\n        t[exports.M13] = m[exports.M10] * v[exports.M03] + m[exports.M11] * v[exports.M13] + m[exports.M12] * v[exports.M23] + m[exports.M13] * v[exports.M33];\r\n        t[exports.M20] = m[exports.M20] * v[exports.M00] + m[exports.M21] * v[exports.M10] + m[exports.M22] * v[exports.M20] + m[exports.M23] * v[exports.M30];\r\n        t[exports.M21] = m[exports.M20] * v[exports.M01] + m[exports.M21] * v[exports.M11] + m[exports.M22] * v[exports.M21] + m[exports.M23] * v[exports.M31];\r\n        t[exports.M22] = m[exports.M20] * v[exports.M02] + m[exports.M21] * v[exports.M12] + m[exports.M22] * v[exports.M22] + m[exports.M23] * v[exports.M32];\r\n        t[exports.M23] = m[exports.M20] * v[exports.M03] + m[exports.M21] * v[exports.M13] + m[exports.M22] * v[exports.M23] + m[exports.M23] * v[exports.M33];\r\n        t[exports.M30] = m[exports.M30] * v[exports.M00] + m[exports.M31] * v[exports.M10] + m[exports.M32] * v[exports.M20] + m[exports.M33] * v[exports.M30];\r\n        t[exports.M31] = m[exports.M30] * v[exports.M01] + m[exports.M31] * v[exports.M11] + m[exports.M32] * v[exports.M21] + m[exports.M33] * v[exports.M31];\r\n        t[exports.M32] = m[exports.M30] * v[exports.M02] + m[exports.M31] * v[exports.M12] + m[exports.M32] * v[exports.M22] + m[exports.M33] * v[exports.M32];\r\n        t[exports.M33] = m[exports.M30] * v[exports.M03] + m[exports.M31] * v[exports.M13] + m[exports.M32] * v[exports.M23] + m[exports.M33] * v[exports.M33];\r\n        return this.set(this.temp);\r\n    }\r\n    lookAt(position, direction, up) {\r\n        Matrix4.initTemps();\r\n        let xAxis = Matrix4.xAxis, yAxis = Matrix4.yAxis, zAxis = Matrix4.zAxis;\r\n        zAxis.setFrom(direction).normalize();\r\n        xAxis.setFrom(direction).normalize();\r\n        xAxis.cross(up).normalize();\r\n        yAxis.setFrom(xAxis).cross(zAxis).normalize();\r\n        this.identity();\r\n        let val = this.values;\r\n        val[exports.M00] = xAxis.x;\r\n        val[exports.M01] = xAxis.y;\r\n        val[exports.M02] = xAxis.z;\r\n        val[exports.M10] = yAxis.x;\r\n        val[exports.M11] = yAxis.y;\r\n        val[exports.M12] = yAxis.z;\r\n        val[exports.M20] = -zAxis.x;\r\n        val[exports.M21] = -zAxis.y;\r\n        val[exports.M22] = -zAxis.z;\r\n        Matrix4.tmpMatrix.identity();\r\n        Matrix4.tmpMatrix.values[exports.M03] = -position.x;\r\n        Matrix4.tmpMatrix.values[exports.M13] = -position.y;\r\n        Matrix4.tmpMatrix.values[exports.M23] = -position.z;\r\n        this.multiply(Matrix4.tmpMatrix);\r\n        return this;\r\n    }\r\n    static initTemps() {\r\n        if (Matrix4.xAxis === null)\r\n            Matrix4.xAxis = new Vector3_1.Vector3();\r\n        if (Matrix4.yAxis === null)\r\n            Matrix4.yAxis = new Vector3_1.Vector3();\r\n        if (Matrix4.zAxis === null)\r\n            Matrix4.zAxis = new Vector3_1.Vector3();\r\n    }\r\n}\r\nexports.Matrix4 = Matrix4;\r\nMatrix4.xAxis = null;\r\nMatrix4.yAxis = null;\r\nMatrix4.zAxis = null;\r\nMatrix4.tmpMatrix = new Matrix4();\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Color2Attribute = exports.ColorAttribute = exports.TexCoordAttribute = exports.Position3Attribute = exports.Position2Attribute = exports.VertexAttribute = exports.VertexAttributeType = exports.Mesh = void 0;\r\nconst Shader_1 = require(\"./Shader\");\r\nclass Mesh {\r\n    constructor(context, attributes, maxVertices, maxIndices) {\r\n        this.attributes = attributes;\r\n        this.verticesLength = 0;\r\n        this.dirtyVertices = false;\r\n        this.indicesLength = 0;\r\n        this.dirtyIndices = false;\r\n        this.elementsPerVertex = 0;\r\n        this.context = context;\r\n        this.elementsPerVertex = 0;\r\n        for (let i = 0; i < attributes.length; i++) {\r\n            this.elementsPerVertex += attributes[i].numElements;\r\n        }\r\n        this.vertices = new Float32Array(maxVertices * this.elementsPerVertex);\r\n        this.indices = new Uint16Array(maxIndices);\r\n    }\r\n    getAttributes() {\r\n        return this.attributes;\r\n    }\r\n    maxVertices() {\r\n        return this.vertices.length / this.elementsPerVertex;\r\n    }\r\n    numVertices() {\r\n        return this.verticesLength / this.elementsPerVertex;\r\n    }\r\n    setVerticesLength(length) {\r\n        this.dirtyVertices = true;\r\n        this.verticesLength = length;\r\n    }\r\n    getVertices() {\r\n        return this.vertices;\r\n    }\r\n    maxIndices() {\r\n        return this.indices.length;\r\n    }\r\n    numIndices() {\r\n        return this.indicesLength;\r\n    }\r\n    setIndicesLength(length) {\r\n        this.dirtyIndices = true;\r\n        this.indicesLength = length;\r\n    }\r\n    getIndices() {\r\n        return this.indices;\r\n    }\r\n    getVertexSizeInFloats() {\r\n        let size = 0;\r\n        for (var i = 0; i < this.attributes.length; i++) {\r\n            let attribute = this.attributes[i];\r\n            size += attribute.numElements;\r\n        }\r\n        return size;\r\n    }\r\n    setVertices(vertices) {\r\n        this.dirtyVertices = true;\r\n        if (vertices.length > this.vertices.length)\r\n            throw Error(\"Mesh can't store more than \" + this.maxVertices() + ' vertices');\r\n        this.vertices.set(vertices, 0);\r\n        this.verticesLength = vertices.length;\r\n    }\r\n    setIndices(indices) {\r\n        this.dirtyIndices = true;\r\n        if (indices.length > this.indices.length)\r\n            throw Error(\"Mesh can't store more than \" + this.maxIndices() + ' indices');\r\n        this.indices.set(indices, 0);\r\n        this.indicesLength = indices.length;\r\n    }\r\n    draw(shader, primitiveType) {\r\n        this.drawWithOffset(shader, primitiveType, 0, this.indicesLength > 0 ? this.indicesLength : this.verticesLength / this.elementsPerVertex);\r\n    }\r\n    drawWithOffset(shader, primitiveType, offset, count) {\r\n        let gl = this.context;\r\n        if (this.dirtyVertices || this.dirtyIndices)\r\n            this.update();\r\n        this.bind(shader);\r\n        if (this.indicesLength > 0) {\r\n            gl.drawElements(primitiveType, count, gl.UNSIGNED_SHORT, offset * 2);\r\n        }\r\n        else {\r\n            gl.drawArrays(primitiveType, offset, count);\r\n        }\r\n        this.unbind(shader);\r\n    }\r\n    bind(shader) {\r\n        let gl = this.context;\r\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.verticesBuffer);\r\n        let offset = 0;\r\n        for (let i = 0; i < this.attributes.length; i++) {\r\n            let attrib = this.attributes[i];\r\n            let location = shader.getAttributeLocation(attrib.name);\r\n            gl.enableVertexAttribArray(location);\r\n            gl.vertexAttribPointer(location, attrib.numElements, gl.FLOAT, false, this.elementsPerVertex * 4, offset * 4);\r\n            offset += attrib.numElements;\r\n        }\r\n        if (this.indicesLength > 0)\r\n            gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.indicesBuffer);\r\n    }\r\n    unbind(shader) {\r\n        let gl = this.context;\r\n        for (let i = 0; i < this.attributes.length; i++) {\r\n            let attrib = this.attributes[i];\r\n            let location = shader.getAttributeLocation(attrib.name);\r\n            gl.disableVertexAttribArray(location);\r\n        }\r\n        gl.bindBuffer(gl.ARRAY_BUFFER, null);\r\n        if (this.indicesLength > 0)\r\n            gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, null);\r\n    }\r\n    update() {\r\n        let gl = this.context;\r\n        if (this.dirtyVertices) {\r\n            if (!this.verticesBuffer) {\r\n                this.verticesBuffer = gl.createBuffer();\r\n            }\r\n            gl.bindBuffer(gl.ARRAY_BUFFER, this.verticesBuffer);\r\n            gl.bufferData(gl.ARRAY_BUFFER, this.vertices.subarray(0, this.verticesLength), gl.DYNAMIC_DRAW);\r\n            this.dirtyVertices = false;\r\n        }\r\n        if (this.dirtyIndices) {\r\n            if (!this.indicesBuffer) {\r\n                this.indicesBuffer = gl.createBuffer();\r\n            }\r\n            gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.indicesBuffer);\r\n            gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, this.indices.subarray(0, this.indicesLength), gl.DYNAMIC_DRAW);\r\n            this.dirtyIndices = false;\r\n        }\r\n    }\r\n    restore() {\r\n        this.verticesBuffer = null;\r\n        this.indicesBuffer = null;\r\n        this.update();\r\n    }\r\n    dispose() {\r\n        let gl = this.context;\r\n        gl.deleteBuffer(this.verticesBuffer);\r\n        gl.deleteBuffer(this.indicesBuffer);\r\n    }\r\n}\r\nexports.Mesh = Mesh;\r\nvar VertexAttributeType;\r\n(function (VertexAttributeType) {\r\n    VertexAttributeType[VertexAttributeType[\"Float\"] = 0] = \"Float\";\r\n})(VertexAttributeType = exports.VertexAttributeType || (exports.VertexAttributeType = {}));\r\nclass VertexAttribute {\r\n    constructor(name, type, numElements) {\r\n        this.name = name;\r\n        this.type = type;\r\n        this.numElements = numElements;\r\n    }\r\n}\r\nexports.VertexAttribute = VertexAttribute;\r\nclass Position2Attribute extends VertexAttribute {\r\n    constructor() {\r\n        super(Shader_1.Shader.POSITION, VertexAttributeType.Float, 2);\r\n    }\r\n}\r\nexports.Position2Attribute = Position2Attribute;\r\nclass Position3Attribute extends VertexAttribute {\r\n    constructor() {\r\n        super(Shader_1.Shader.POSITION, VertexAttributeType.Float, 3);\r\n    }\r\n}\r\nexports.Position3Attribute = Position3Attribute;\r\nclass TexCoordAttribute extends VertexAttribute {\r\n    constructor(unit = 0) {\r\n        super(Shader_1.Shader.TEXCOORDS + (unit === 0 ? '' : unit), VertexAttributeType.Float, 2);\r\n    }\r\n}\r\nexports.TexCoordAttribute = TexCoordAttribute;\r\nclass ColorAttribute extends VertexAttribute {\r\n    constructor() {\r\n        super(Shader_1.Shader.COLOR, VertexAttributeType.Float, 4);\r\n    }\r\n}\r\nexports.ColorAttribute = ColorAttribute;\r\nclass Color2Attribute extends VertexAttribute {\r\n    constructor() {\r\n        super(Shader_1.Shader.COLOR2, VertexAttributeType.Float, 4);\r\n    }\r\n}\r\nexports.Color2Attribute = Color2Attribute;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.NumberUtil = void 0;\r\nconst int8 = new Int8Array(4);\r\nconst int32 = new Int32Array(int8.buffer, 0, 1);\r\nconst float32 = new Float32Array(int8.buffer, 0, 1);\r\nclass NumberUtil {\r\n    static intBitsToFloat(i) {\r\n        int32[0] = i;\r\n        return float32[0];\r\n    }\r\n    static floatToIntBits(f) {\r\n        float32[0] = f;\r\n        return int32[0];\r\n    }\r\n    static intToFloatColor(value) {\r\n        return NumberUtil.intBitsToFloat(value & 0xfeffffff);\r\n    }\r\n    static colorToFloat(r, g, b, a) {\r\n        const bits = (r << 24) | (g << 16) | (b << 8) | a;\r\n        return NumberUtil.intToFloatColor(bits);\r\n    }\r\n    static isPowerOfTwo(n) {\r\n        return (n & (n - 1)) === 0;\r\n    }\r\n    static nextPowerOfTwo(n) {\r\n        n--;\r\n        n |= n >> 1;\r\n        n |= n >> 2;\r\n        n |= n >> 4;\r\n        n |= n >> 8;\r\n        n |= n >> 16;\r\n        return n + 1;\r\n    }\r\n}\r\nexports.NumberUtil = NumberUtil;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.PolygonBatch = void 0;\r\nconst Utils_1 = require(\"./Utils\");\r\nconst Mesh_1 = require(\"./Mesh\");\r\nconst Shader_1 = require(\"./Shader\");\r\n// prettier-ignore\r\nconst quad = [\r\n    0, 0, 1, 1, 1, 1, 0, 0,\r\n    0, 0, 1, 1, 1, 1, 0, 0,\r\n    0, 0, 1, 1, 1, 1, 0, 0,\r\n    0, 0, 1, 1, 1, 1, 0, 0,\r\n];\r\nconst WHITE = new Utils_1.Color(1, 1, 1, 1);\r\nclass PolygonBatch {\r\n    constructor(context, twoColorTint = true, maxVertices = 10920) {\r\n        this.isDrawing = false;\r\n        this.shader = null;\r\n        this.lastTexture = null;\r\n        this.verticesLength = 0;\r\n        this.indicesLength = 0;\r\n        this.projectionValues = new Float32Array(16);\r\n        this.color = WHITE;\r\n        this.twoColorTint = true;\r\n        this.yDown = false;\r\n        if (maxVertices > 10920)\r\n            throw new Error(\"Can't have more than 10920 triangles per batch: \" + maxVertices);\r\n        this.context = context;\r\n        let attributes = twoColorTint\r\n            ? [new Mesh_1.Position2Attribute(), new Mesh_1.ColorAttribute(), new Mesh_1.TexCoordAttribute(), new Mesh_1.Color2Attribute()]\r\n            : [new Mesh_1.Position2Attribute(), new Mesh_1.ColorAttribute(), new Mesh_1.TexCoordAttribute()];\r\n        this.mesh = new Mesh_1.Mesh(context, attributes, maxVertices, maxVertices * 3);\r\n        this.shader = Shader_1.Shader.newTwoColoredTextured(context);\r\n        let gl = this.context;\r\n        this.srcColorBlend = gl.SRC_ALPHA;\r\n        this.srcAlphaBlend = gl.ONE;\r\n        this.dstBlend = gl.ONE_MINUS_SRC_ALPHA;\r\n        this.twoColorTint = twoColorTint;\r\n    }\r\n    setColor(color) {\r\n        this.color = color;\r\n    }\r\n    setShader(shader) {\r\n        this.shader.dispose();\r\n        this.shader = shader;\r\n    }\r\n    setProjection(projectionValues) {\r\n        this.projectionValues = projectionValues;\r\n    }\r\n    begin() {\r\n        if (this.isDrawing)\r\n            throw new Error('PolygonBatch is already drawing. Call PolygonBatch.end() before calling PolygonBatch.begin()');\r\n        this.drawCalls = 0;\r\n        const shader = this.shader;\r\n        this.lastTexture = null;\r\n        this.isDrawing = true;\r\n        shader.bind();\r\n        shader.setUniform4x4f(Shader_1.Shader.MVP_MATRIX, this.projectionValues);\r\n        shader.setUniformi('u_texture', 0);\r\n        let gl = this.context;\r\n        gl.enable(gl.BLEND);\r\n        gl.blendFuncSeparate(this.srcColorBlend, this.dstBlend, this.srcAlphaBlend, this.dstBlend);\r\n    }\r\n    setBlendMode(srcColorBlend, srcAlphaBlend, dstBlend) {\r\n        if (this.srcColorBlend === srcColorBlend && this.srcAlphaBlend === srcAlphaBlend && this.dstBlend === dstBlend)\r\n            return;\r\n        this.srcColorBlend = srcColorBlend;\r\n        this.srcAlphaBlend = srcAlphaBlend;\r\n        this.dstBlend = dstBlend;\r\n        if (this.isDrawing) {\r\n            this.flush();\r\n            let gl = this.context;\r\n            gl.blendFuncSeparate(srcColorBlend, dstBlend, srcAlphaBlend, dstBlend);\r\n        }\r\n    }\r\n    drawVerticesWithOffset(texture, vertices, offset, count) {\r\n        const newVertices = [];\r\n        for (let i = 0; i < count; i++) {\r\n            newVertices[i] = vertices[i + offset];\r\n        }\r\n        this.drawVertices(texture, newVertices, PolygonBatch.QUAD_TRIANGLES);\r\n    }\r\n    drawVertices(texture, vertices, indices = PolygonBatch.QUAD_TRIANGLES) {\r\n        if (texture !== this.lastTexture) {\r\n            this.flush();\r\n            this.lastTexture = texture;\r\n        }\r\n        else if (this.verticesLength + vertices.length > this.mesh.getVertices().length ||\r\n            this.indicesLength + indices.length > this.mesh.getIndices().length) {\r\n            this.flush();\r\n        }\r\n        let indexStart = this.mesh.numVertices();\r\n        this.mesh.getVertices().set(vertices, this.verticesLength);\r\n        this.verticesLength += vertices.length;\r\n        this.mesh.setVerticesLength(this.verticesLength);\r\n        let indicesArray = this.mesh.getIndices();\r\n        for (let i = this.indicesLength, j = 0; j < indices.length; i++, j++)\r\n            indicesArray[i] = indices[j] + indexStart;\r\n        this.indicesLength += indices.length;\r\n        this.mesh.setIndicesLength(this.indicesLength);\r\n    }\r\n    flush() {\r\n        if (this.verticesLength === 0)\r\n            return;\r\n        this.lastTexture.bind();\r\n        this.mesh.draw(this.shader, this.context.TRIANGLES);\r\n        this.verticesLength = 0;\r\n        this.indicesLength = 0;\r\n        this.mesh.setVerticesLength(0);\r\n        this.mesh.setIndicesLength(0);\r\n        this.drawCalls++;\r\n    }\r\n    end() {\r\n        if (!this.isDrawing)\r\n            throw new Error('PolygonBatch is not drawing. Call PolygonBatch.begin() before calling PolygonBatch.end()');\r\n        if (this.verticesLength > 0 || this.indicesLength > 0)\r\n            this.flush();\r\n        this.shader.unbind();\r\n        this.lastTexture = null;\r\n        this.isDrawing = false;\r\n        PolygonBatch.totalDrawCalls += this.drawCalls;\r\n        let gl = this.context;\r\n        gl.disable(gl.BLEND);\r\n    }\r\n    static resetTotalDrawCalls() {\r\n        PolygonBatch.totalDrawCalls = 0;\r\n    }\r\n    getDrawCalls() {\r\n        return this.drawCalls;\r\n    }\r\n    dispose() {\r\n        this.mesh.dispose();\r\n    }\r\n    setYDown(yDown) {\r\n        this.yDown = yDown;\r\n    }\r\n    draw(texture, x, y, width, height, originX = 0, originY = 0, rotation = 0, scaleX = 1, scaleY = 1, ou1 = 0, ov1 = 1, ou2 = 1, ov2 = 0, rotate = false) {\r\n        const color = this.color;\r\n        if (this.yDown) {\r\n            const tmpV1 = ov1;\r\n            ov1 = ov2;\r\n            ov2 = tmpV1;\r\n        }\r\n        width = width === 0 ? width : width || texture.width;\r\n        height = height === 0 ? height : height || texture.height;\r\n        x = x || 0;\r\n        y = y || 0;\r\n        let x1 = -originX;\r\n        let x2 = width - originX;\r\n        let x3 = width - originX;\r\n        let x4 = -originX;\r\n        let y1 = -originY;\r\n        let y2 = -originY;\r\n        let y3 = height - originY;\r\n        let y4 = height - originY;\r\n        if (scaleX !== 1) {\r\n            x1 = x1 * scaleX;\r\n            x2 = x2 * scaleX;\r\n            x3 = x3 * scaleX;\r\n            x4 = x4 * scaleX;\r\n        }\r\n        if (scaleY !== 1) {\r\n            y1 = y1 * scaleY;\r\n            y2 = y2 * scaleY;\r\n            y3 = y3 * scaleY;\r\n            y4 = y4 * scaleY;\r\n        }\r\n        if (rotation !== 0) {\r\n            var cos = Math.cos(rotation);\r\n            var sin = Math.sin(rotation);\r\n            var rotatedX1 = cos * x1 - sin * y1;\r\n            var rotatedY1 = sin * x1 + cos * y1;\r\n            var rotatedX2 = cos * x2 - sin * y2;\r\n            var rotatedY2 = sin * x2 + cos * y2;\r\n            var rotatedX3 = cos * x3 - sin * y3;\r\n            var rotatedY3 = sin * x3 + cos * y3;\r\n            var rotatedX4 = cos * x4 - sin * y4;\r\n            var rotatedY4 = sin * x4 + cos * y4;\r\n            x1 = rotatedX1;\r\n            x2 = rotatedX2;\r\n            x3 = rotatedX3;\r\n            x4 = rotatedX4;\r\n            y1 = rotatedY1;\r\n            y2 = rotatedY2;\r\n            y3 = rotatedY3;\r\n            y4 = rotatedY4;\r\n        }\r\n        x1 += x + originX;\r\n        x2 += x + originX;\r\n        x3 += x + originX;\r\n        x4 += x + originX;\r\n        y1 += y + originY;\r\n        y2 += y + originY;\r\n        y3 += y + originY;\r\n        y4 += y + originY;\r\n        let u1 = ou1;\r\n        let v1 = ov1;\r\n        let u2 = ou2;\r\n        let v2 = ov2;\r\n        let u3 = u2;\r\n        let v3 = v1;\r\n        let u4 = u1;\r\n        let v4 = v2;\r\n        if (rotate) {\r\n            if (this.yDown) {\r\n                u1 = ou1;\r\n                v1 = ov2;\r\n                u2 = ou2;\r\n                v2 = ov1;\r\n                u3 = ou1;\r\n                v3 = ov1;\r\n                u4 = ou2;\r\n                v4 = ov2;\r\n            }\r\n            else {\r\n                u1 = ou2;\r\n                v1 = ov1;\r\n                u2 = ou1;\r\n                v2 = ov2;\r\n                u3 = ou2;\r\n                v3 = ov2;\r\n                u4 = ou1;\r\n                v4 = ov1;\r\n            }\r\n        }\r\n        var i = 0;\r\n        quad[i++] = x1;\r\n        quad[i++] = y1;\r\n        quad[i++] = color.r;\r\n        quad[i++] = color.g;\r\n        quad[i++] = color.b;\r\n        quad[i++] = color.a;\r\n        quad[i++] = u1;\r\n        quad[i++] = v1;\r\n        if (this.twoColorTint) {\r\n            quad[i++] = 0;\r\n            quad[i++] = 0;\r\n            quad[i++] = 0;\r\n            quad[i++] = 0;\r\n        }\r\n        quad[i++] = x2;\r\n        quad[i++] = y2;\r\n        quad[i++] = color.r;\r\n        quad[i++] = color.g;\r\n        quad[i++] = color.b;\r\n        quad[i++] = color.a;\r\n        quad[i++] = u3;\r\n        quad[i++] = v3;\r\n        if (this.twoColorTint) {\r\n            quad[i++] = 0;\r\n            quad[i++] = 0;\r\n            quad[i++] = 0;\r\n            quad[i++] = 0;\r\n        }\r\n        quad[i++] = x3;\r\n        quad[i++] = y3;\r\n        quad[i++] = color.r;\r\n        quad[i++] = color.g;\r\n        quad[i++] = color.b;\r\n        quad[i++] = color.a;\r\n        quad[i++] = u2;\r\n        quad[i++] = v2;\r\n        if (this.twoColorTint) {\r\n            quad[i++] = 0;\r\n            quad[i++] = 0;\r\n            quad[i++] = 0;\r\n            quad[i++] = 0;\r\n        }\r\n        quad[i++] = x4;\r\n        quad[i++] = y4;\r\n        quad[i++] = color.r;\r\n        quad[i++] = color.g;\r\n        quad[i++] = color.b;\r\n        quad[i++] = color.a;\r\n        quad[i++] = u4;\r\n        quad[i++] = v4;\r\n        if (this.twoColorTint) {\r\n            quad[i++] = 0;\r\n            quad[i++] = 0;\r\n            quad[i++] = 0;\r\n            quad[i] = 0;\r\n        }\r\n        this.drawVertices(texture, quad, PolygonBatch.QUAD_TRIANGLES);\r\n    }\r\n}\r\nexports.PolygonBatch = PolygonBatch;\r\nPolygonBatch.QUAD_TRIANGLES = [0, 1, 2, 2, 3, 0];\r\nPolygonBatch.totalDrawCalls = 0;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Shader = void 0;\r\nclass Shader {\r\n    constructor(context, vertexShader, fragmentShader) {\r\n        this.vertexShader = vertexShader;\r\n        this.fragmentShader = fragmentShader;\r\n        this.vs = null;\r\n        this.fs = null;\r\n        this.program = null;\r\n        this.tmp2x2 = new Float32Array(2 * 2);\r\n        this.tmp3x3 = new Float32Array(3 * 3);\r\n        this.tmp4x4 = new Float32Array(4 * 4);\r\n        this.vsSource = vertexShader;\r\n        this.fsSource = fragmentShader;\r\n        this.context = context;\r\n        this.compile();\r\n    }\r\n    getProgram() {\r\n        return this.program;\r\n    }\r\n    getVertexShader() {\r\n        return this.vertexShader;\r\n    }\r\n    getFragmentShader() {\r\n        return this.fragmentShader;\r\n    }\r\n    getVertexShaderSource() {\r\n        return this.vsSource;\r\n    }\r\n    getFragmentSource() {\r\n        return this.fsSource;\r\n    }\r\n    compile() {\r\n        let gl = this.context;\r\n        try {\r\n            this.vs = this.compileShader(gl.VERTEX_SHADER, this.vertexShader);\r\n            this.fs = this.compileShader(gl.FRAGMENT_SHADER, this.fragmentShader);\r\n            this.program = this.compileProgram(this.vs, this.fs);\r\n        }\r\n        catch (e) {\r\n            this.dispose();\r\n            throw e;\r\n        }\r\n    }\r\n    compileShader(type, source) {\r\n        let gl = this.context;\r\n        let shader = gl.createShader(type);\r\n        gl.shaderSource(shader, source);\r\n        gl.compileShader(shader);\r\n        if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {\r\n            let error = \"Couldn't compile shader: \" + gl.getShaderInfoLog(shader);\r\n            gl.deleteShader(shader);\r\n            if (!gl.isContextLost())\r\n                throw new Error(error);\r\n        }\r\n        return shader;\r\n    }\r\n    compileProgram(vs, fs) {\r\n        let gl = this.context;\r\n        let program = gl.createProgram();\r\n        gl.attachShader(program, vs);\r\n        gl.attachShader(program, fs);\r\n        gl.linkProgram(program);\r\n        if (!gl.getProgramParameter(program, gl.LINK_STATUS)) {\r\n            let error = \"Couldn't compile shader program: \" + gl.getProgramInfoLog(program);\r\n            gl.deleteProgram(program);\r\n            if (!gl.isContextLost())\r\n                throw new Error(error);\r\n        }\r\n        return program;\r\n    }\r\n    restore() {\r\n        this.compile();\r\n    }\r\n    bind() {\r\n        this.context.useProgram(this.program);\r\n    }\r\n    unbind() {\r\n        this.context.useProgram(null);\r\n    }\r\n    setUniformi(uniform, value) {\r\n        this.context.uniform1i(this.getUniformLocation(uniform), value);\r\n    }\r\n    setUniformf(uniform, value) {\r\n        this.context.uniform1f(this.getUniformLocation(uniform), value);\r\n    }\r\n    setUniform2f(uniform, value, value2) {\r\n        this.context.uniform2f(this.getUniformLocation(uniform), value, value2);\r\n    }\r\n    setUniform3f(uniform, value, value2, value3) {\r\n        this.context.uniform3f(this.getUniformLocation(uniform), value, value2, value3);\r\n    }\r\n    setUniform4f(uniform, value, value2, value3, value4) {\r\n        this.context.uniform4f(this.getUniformLocation(uniform), value, value2, value3, value4);\r\n    }\r\n    setUniform2x2f(uniform, value) {\r\n        let gl = this.context;\r\n        this.tmp2x2.set(value);\r\n        gl.uniformMatrix2fv(this.getUniformLocation(uniform), false, this.tmp2x2);\r\n    }\r\n    setUniform3x3f(uniform, value) {\r\n        let gl = this.context;\r\n        this.tmp3x3.set(value);\r\n        gl.uniformMatrix3fv(this.getUniformLocation(uniform), false, this.tmp3x3);\r\n    }\r\n    setUniform4x4f(uniform, value) {\r\n        let gl = this.context;\r\n        this.tmp4x4.set(value);\r\n        gl.uniformMatrix4fv(this.getUniformLocation(uniform), false, this.tmp4x4);\r\n    }\r\n    getUniformLocation(uniform) {\r\n        let gl = this.context;\r\n        let location = gl.getUniformLocation(this.program, uniform);\r\n        if (!location && !gl.isContextLost())\r\n            throw new Error(`Couldn't find location for uniform ${uniform}`);\r\n        return location;\r\n    }\r\n    getAttributeLocation(attribute) {\r\n        let gl = this.context;\r\n        let location = gl.getAttribLocation(this.program, attribute);\r\n        if (location === -1 && !gl.isContextLost())\r\n            throw new Error(`Couldn't find location for attribute ${attribute}`);\r\n        return location;\r\n    }\r\n    dispose() {\r\n        let gl = this.context;\r\n        if (this.vs) {\r\n            gl.deleteShader(this.vs);\r\n            this.vs = null;\r\n        }\r\n        if (this.fs) {\r\n            gl.deleteShader(this.fs);\r\n            this.fs = null;\r\n        }\r\n        if (this.program) {\r\n            gl.deleteProgram(this.program);\r\n            this.program = null;\r\n        }\r\n    }\r\n    static newColoredTextured(context) {\r\n        let vs = `\r\n         attribute vec4 ${Shader.POSITION};\r\n         attribute vec4 ${Shader.COLOR};\r\n         attribute vec2 ${Shader.TEXCOORDS};\r\n         uniform mat4 ${Shader.MVP_MATRIX};\r\n         varying vec4 v_color;\r\n         varying vec2 v_texCoords;\r\n \r\n         void main () {\r\n           v_color = ${Shader.COLOR};\r\n           v_texCoords = ${Shader.TEXCOORDS};\r\n           gl_Position = ${Shader.MVP_MATRIX} * ${Shader.POSITION};\r\n         }\r\n       `;\r\n        let fs = `\r\n         #ifdef GL_ES\r\n           #define LOWP lowp\r\n           precision mediump float;\r\n         #else\r\n           #define LOWP\r\n         #endif\r\n         varying LOWP vec4 v_color;\r\n         varying vec2 v_texCoords;\r\n         uniform sampler2D u_texture;\r\n \r\n         void main () {\r\n           gl_FragColor = v_color * texture2D(u_texture, v_texCoords);\r\n         }\r\n       `;\r\n        return new Shader(context, vs, fs);\r\n    }\r\n    static newTwoColoredTextured(context) {\r\n        let vs = `\r\n         attribute vec4 ${Shader.POSITION};\r\n         attribute vec4 ${Shader.COLOR};\r\n         attribute vec4 ${Shader.COLOR2};\r\n         attribute vec2 ${Shader.TEXCOORDS};\r\n         uniform mat4 ${Shader.MVP_MATRIX};\r\n         varying vec4 v_light;\r\n         varying vec4 v_dark;\r\n         varying vec2 v_texCoords;\r\n \r\n         void main () {\r\n           v_light = ${Shader.COLOR};\r\n           v_dark = ${Shader.COLOR2};\r\n           v_texCoords = ${Shader.TEXCOORDS};\r\n           gl_Position = ${Shader.MVP_MATRIX} * ${Shader.POSITION};\r\n         }\r\n       `;\r\n        let fs = `\r\n         #ifdef GL_ES\r\n           #define LOWP lowp\r\n           precision mediump float;\r\n         #else\r\n           #define LOWP\r\n         #endif\r\n         varying LOWP vec4 v_light;\r\n         varying LOWP vec4 v_dark;\r\n         varying vec2 v_texCoords;\r\n         uniform sampler2D u_texture;\r\n \r\n         void main () {\r\n           vec4 texColor = texture2D(u_texture, v_texCoords);\r\n           gl_FragColor.a = texColor.a * v_light.a;\r\n           gl_FragColor.rgb = ((texColor.a - 1.0) * v_dark.a + 1.0 - texColor.rgb) * v_dark.rgb + texColor.rgb * v_light.rgb;\r\n         }\r\n       `;\r\n        return new Shader(context, vs, fs);\r\n    }\r\n    static newColored(context) {\r\n        let vs = `\r\n         attribute vec4 ${Shader.POSITION};\r\n         attribute vec4 ${Shader.COLOR};\r\n         uniform mat4 ${Shader.MVP_MATRIX};\r\n         varying vec4 v_color;\r\n \r\n         void main () {\r\n           v_color = ${Shader.COLOR};\r\n           gl_Position = ${Shader.MVP_MATRIX} * ${Shader.POSITION};\r\n         }\r\n       `;\r\n        let fs = `\r\n         #ifdef GL_ES\r\n           #define LOWP lowp\r\n           precision mediump float;\r\n         #else\r\n           #define LOWP\r\n         #endif\r\n         varying LOWP vec4 v_color;\r\n \r\n         void main () {\r\n           gl_FragColor = v_color;\r\n         }\r\n       `;\r\n        return new Shader(context, vs, fs);\r\n    }\r\n}\r\nexports.Shader = Shader;\r\nShader.MVP_MATRIX = 'u_projTrans';\r\nShader.POSITION = 'a_position';\r\nShader.COLOR = 'a_color';\r\nShader.COLOR2 = 'a_color2';\r\nShader.TEXCOORDS = 'a_texCoords';\r\nShader.SAMPLER = 'u_texture';\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ShapeRenderer = exports.ShapeType = void 0;\r\nconst Mesh_1 = require(\"./Mesh\");\r\nconst Shader_1 = require(\"./Shader\");\r\nconst Utils_1 = require(\"./Utils\");\r\nconst Vector2_1 = require(\"./Vector2\");\r\nvar ShapeType;\r\n(function (ShapeType) {\r\n    ShapeType[ShapeType[\"Point\"] = 0] = \"Point\";\r\n    ShapeType[ShapeType[\"Line\"] = 1] = \"Line\";\r\n    ShapeType[ShapeType[\"Filled\"] = 4] = \"Filled\";\r\n})(ShapeType = exports.ShapeType || (exports.ShapeType = {}));\r\nclass ShapeRenderer {\r\n    constructor(context, maxVertices = 10920) {\r\n        this.isDrawing = false;\r\n        this.shapeType = ShapeType.Filled;\r\n        this.color = new Utils_1.Color(1, 1, 1, 1);\r\n        this.vertexIndex = 0;\r\n        this.tmp = new Vector2_1.Vector2();\r\n        this.projectionValues = new Float32Array(16);\r\n        if (maxVertices > 10920)\r\n            throw new Error(\"Can't have more than 10920 triangles per batch: \" + maxVertices);\r\n        this.context = context;\r\n        this.mesh = new Mesh_1.Mesh(context, [new Mesh_1.Position2Attribute(), new Mesh_1.ColorAttribute()], maxVertices, 0);\r\n        let gl = this.context;\r\n        this.srcColorBlend = gl.SRC_ALPHA;\r\n        this.srcAlphaBlend = gl.ONE;\r\n        this.dstBlend = gl.ONE_MINUS_SRC_ALPHA;\r\n        this.shader = Shader_1.Shader.newColored(gl);\r\n    }\r\n    setProjection(projectionValues) {\r\n        this.projectionValues = projectionValues;\r\n    }\r\n    begin() {\r\n        if (this.isDrawing)\r\n            throw new Error('ShapeRenderer.begin() has already been called');\r\n        this.vertexIndex = 0;\r\n        this.isDrawing = true;\r\n        this.shader.bind();\r\n        this.shader.setUniform4x4f(Shader_1.Shader.MVP_MATRIX, this.projectionValues);\r\n        let gl = this.context;\r\n        gl.enable(gl.BLEND);\r\n        gl.blendFuncSeparate(this.srcColorBlend, this.dstBlend, this.srcAlphaBlend, this.dstBlend);\r\n    }\r\n    setBlendMode(srcColorBlend, srcAlphaBlend, dstBlend) {\r\n        this.srcColorBlend = srcColorBlend;\r\n        this.srcAlphaBlend = srcAlphaBlend;\r\n        this.dstBlend = dstBlend;\r\n        if (this.isDrawing) {\r\n            this.flush();\r\n            let gl = this.context;\r\n            gl.blendFuncSeparate(srcColorBlend, dstBlend, srcAlphaBlend, dstBlend);\r\n        }\r\n    }\r\n    setColor(color) {\r\n        this.color.setFromColor(color);\r\n    }\r\n    setColorWith(r, g, b, a) {\r\n        this.color.set(r, g, b, a);\r\n    }\r\n    point(x, y, color = null) {\r\n        this.check(ShapeType.Point, 1);\r\n        if (color === null)\r\n            color = this.color;\r\n        this.vertex(x, y, color);\r\n    }\r\n    line(x, y, x2, y2, color = null) {\r\n        this.check(ShapeType.Line, 2);\r\n        if (color === null)\r\n            color = this.color;\r\n        this.vertex(x, y, color);\r\n        this.vertex(x2, y2, color);\r\n    }\r\n    triangle(filled, x, y, x2, y2, x3, y3, color = null, color2 = null, color3 = null) {\r\n        this.check(filled ? ShapeType.Filled : ShapeType.Line, 3);\r\n        if (color === null)\r\n            color = this.color;\r\n        if (color2 === null)\r\n            color2 = this.color;\r\n        if (color3 === null)\r\n            color3 = this.color;\r\n        if (filled) {\r\n            this.vertex(x, y, color);\r\n            this.vertex(x2, y2, color2);\r\n            this.vertex(x3, y3, color3);\r\n        }\r\n        else {\r\n            this.vertex(x, y, color);\r\n            this.vertex(x2, y2, color2);\r\n            this.vertex(x2, y2, color);\r\n            this.vertex(x3, y3, color2);\r\n            this.vertex(x3, y3, color);\r\n            this.vertex(x, y, color2);\r\n        }\r\n    }\r\n    quad(filled, x, y, x2, y2, x3, y3, x4, y4, color = null, color2 = null, color3 = null, color4 = null) {\r\n        this.check(filled ? ShapeType.Filled : ShapeType.Line, 3);\r\n        if (color === null)\r\n            color = this.color;\r\n        if (color2 === null)\r\n            color2 = this.color;\r\n        if (color3 === null)\r\n            color3 = this.color;\r\n        if (color4 === null)\r\n            color4 = this.color;\r\n        if (filled) {\r\n            this.vertex(x, y, color);\r\n            this.vertex(x2, y2, color2);\r\n            this.vertex(x3, y3, color3);\r\n            this.vertex(x3, y3, color3);\r\n            this.vertex(x4, y4, color4);\r\n            this.vertex(x, y, color);\r\n        }\r\n        else {\r\n            this.vertex(x, y, color);\r\n            this.vertex(x2, y2, color2);\r\n            this.vertex(x2, y2, color2);\r\n            this.vertex(x3, y3, color3);\r\n            this.vertex(x3, y3, color3);\r\n            this.vertex(x4, y4, color4);\r\n            this.vertex(x4, y4, color4);\r\n            this.vertex(x, y, color);\r\n        }\r\n    }\r\n    rect(filled, x, y, width, height, color = null) {\r\n        this.quad(filled, x, y, x + width, y, x + width, y + height, x, y + height, color, color, color, color);\r\n    }\r\n    rectLine(filled, x1, y1, x2, y2, width, color = null) {\r\n        this.check(filled ? ShapeType.Filled : ShapeType.Line, 8);\r\n        if (color === null)\r\n            color = this.color;\r\n        let t = this.tmp.set(y2 - y1, x1 - x2);\r\n        t.nor();\r\n        width *= 0.5;\r\n        let tx = t.x * width;\r\n        let ty = t.y * width;\r\n        if (!filled) {\r\n            this.vertex(x1 + tx, y1 + ty, color);\r\n            this.vertex(x1 - tx, y1 - ty, color);\r\n            this.vertex(x2 + tx, y2 + ty, color);\r\n            this.vertex(x2 - tx, y2 - ty, color);\r\n            this.vertex(x2 + tx, y2 + ty, color);\r\n            this.vertex(x1 + tx, y1 + ty, color);\r\n            this.vertex(x2 - tx, y2 - ty, color);\r\n            this.vertex(x1 - tx, y1 - ty, color);\r\n        }\r\n        else {\r\n            this.vertex(x1 + tx, y1 + ty, color);\r\n            this.vertex(x1 - tx, y1 - ty, color);\r\n            this.vertex(x2 + tx, y2 + ty, color);\r\n            this.vertex(x2 - tx, y2 - ty, color);\r\n            this.vertex(x2 + tx, y2 + ty, color);\r\n            this.vertex(x1 - tx, y1 - ty, color);\r\n        }\r\n    }\r\n    x(x, y, size) {\r\n        this.line(x - size, y - size, x + size, y + size);\r\n        this.line(x - size, y + size, x + size, y - size);\r\n    }\r\n    polygon(polygonVertices, offset, count, color = null) {\r\n        if (count < 3)\r\n            throw new Error('Polygon must contain at least 3 vertices');\r\n        this.check(ShapeType.Line, count * 2);\r\n        if (color === null)\r\n            color = this.color;\r\n        offset <<= 1;\r\n        count <<= 1;\r\n        let firstX = polygonVertices[offset];\r\n        let firstY = polygonVertices[offset + 1];\r\n        let last = offset + count;\r\n        for (let i = offset, n = offset + count - 2; i < n; i += 2) {\r\n            let x1 = polygonVertices[i];\r\n            let y1 = polygonVertices[i + 1];\r\n            let x2 = 0;\r\n            let y2 = 0;\r\n            if (i + 2 >= last) {\r\n                x2 = firstX;\r\n                y2 = firstY;\r\n            }\r\n            else {\r\n                x2 = polygonVertices[i + 2];\r\n                y2 = polygonVertices[i + 3];\r\n            }\r\n            this.vertex(x1, y1, color);\r\n            this.vertex(x2, y2, color);\r\n        }\r\n    }\r\n    circle(filled, x, y, radius, color = null, segments = 0) {\r\n        if (segments === 0)\r\n            segments = Math.max(1, (6 * Utils_1.MathUtils.cbrt(radius)) | 0);\r\n        if (segments <= 0)\r\n            throw new Error('segments must be > 0.');\r\n        if (color === null)\r\n            color = this.color;\r\n        let angle = (2 * Utils_1.MathUtils.PI) / segments;\r\n        let cos = Math.cos(angle);\r\n        let sin = Math.sin(angle);\r\n        let cx = radius, cy = 0;\r\n        if (!filled) {\r\n            this.check(ShapeType.Line, segments * 2 + 2);\r\n            for (let i = 0; i < segments; i++) {\r\n                this.vertex(x + cx, y + cy, color);\r\n                let temp = cx;\r\n                cx = cos * cx - sin * cy;\r\n                cy = sin * temp + cos * cy;\r\n                this.vertex(x + cx, y + cy, color);\r\n            }\r\n            // Ensure the last segment is identical to the first.\r\n            this.vertex(x + cx, y + cy, color);\r\n        }\r\n        else {\r\n            this.check(ShapeType.Filled, segments * 3 + 3);\r\n            segments--;\r\n            for (let i = 0; i < segments; i++) {\r\n                this.vertex(x, y, color);\r\n                this.vertex(x + cx, y + cy, color);\r\n                let temp = cx;\r\n                cx = cos * cx - sin * cy;\r\n                cy = sin * temp + cos * cy;\r\n                this.vertex(x + cx, y + cy, color);\r\n            }\r\n            // Ensure the last segment is identical to the first.\r\n            this.vertex(x, y, color);\r\n            this.vertex(x + cx, y + cy, color);\r\n        }\r\n        cx = radius;\r\n        cy = 0;\r\n        this.vertex(x + cx, y + cy, color);\r\n    }\r\n    curve(x1, y1, cx1, cy1, cx2, cy2, x2, y2, segments, color = null) {\r\n        this.check(ShapeType.Line, segments * 2 + 2);\r\n        if (color === null)\r\n            color = this.color;\r\n        // Algorithm from: http://www.antigrain.com/research/bezier_interpolation/index.html#PAGE_BEZIER_INTERPOLATION\r\n        let subdiv_step = 1 / segments;\r\n        let subdiv_step2 = subdiv_step * subdiv_step;\r\n        let subdiv_step3 = subdiv_step * subdiv_step * subdiv_step;\r\n        let pre1 = 3 * subdiv_step;\r\n        let pre2 = 3 * subdiv_step2;\r\n        let pre4 = 6 * subdiv_step2;\r\n        let pre5 = 6 * subdiv_step3;\r\n        let tmp1x = x1 - cx1 * 2 + cx2;\r\n        let tmp1y = y1 - cy1 * 2 + cy2;\r\n        let tmp2x = (cx1 - cx2) * 3 - x1 + x2;\r\n        let tmp2y = (cy1 - cy2) * 3 - y1 + y2;\r\n        let fx = x1;\r\n        let fy = y1;\r\n        let dfx = (cx1 - x1) * pre1 + tmp1x * pre2 + tmp2x * subdiv_step3;\r\n        let dfy = (cy1 - y1) * pre1 + tmp1y * pre2 + tmp2y * subdiv_step3;\r\n        let ddfx = tmp1x * pre4 + tmp2x * pre5;\r\n        let ddfy = tmp1y * pre4 + tmp2y * pre5;\r\n        let dddfx = tmp2x * pre5;\r\n        let dddfy = tmp2y * pre5;\r\n        while (segments-- > 0) {\r\n            this.vertex(fx, fy, color);\r\n            fx += dfx;\r\n            fy += dfy;\r\n            dfx += ddfx;\r\n            dfy += ddfy;\r\n            ddfx += dddfx;\r\n            ddfy += dddfy;\r\n            this.vertex(fx, fy, color);\r\n        }\r\n        this.vertex(fx, fy, color);\r\n        this.vertex(x2, y2, color);\r\n    }\r\n    vertex(x, y, color) {\r\n        let idx = this.vertexIndex;\r\n        let vertices = this.mesh.getVertices();\r\n        vertices[idx++] = x;\r\n        vertices[idx++] = y;\r\n        vertices[idx++] = color.r;\r\n        vertices[idx++] = color.g;\r\n        vertices[idx++] = color.b;\r\n        vertices[idx++] = color.a;\r\n        this.vertexIndex = idx;\r\n    }\r\n    end() {\r\n        if (!this.isDrawing)\r\n            throw new Error('ShapeRenderer.begin() has not been called');\r\n        this.flush();\r\n        let gl = this.context;\r\n        gl.disable(gl.BLEND);\r\n        this.isDrawing = false;\r\n    }\r\n    flush() {\r\n        if (this.vertexIndex === 0)\r\n            return;\r\n        this.mesh.setVerticesLength(this.vertexIndex);\r\n        this.mesh.draw(this.shader, this.shapeType);\r\n        this.vertexIndex = 0;\r\n    }\r\n    check(shapeType, numVertices) {\r\n        if (!this.isDrawing)\r\n            throw new Error('ShapeRenderer.begin() has not been called');\r\n        if (this.shapeType === shapeType) {\r\n            if (this.mesh.maxVertices() - this.mesh.numVertices() < numVertices)\r\n                this.flush();\r\n            else\r\n                return;\r\n        }\r\n        else {\r\n            this.flush();\r\n            this.shapeType = shapeType;\r\n        }\r\n    }\r\n    dispose() {\r\n        this.mesh.dispose();\r\n    }\r\n}\r\nexports.ShapeRenderer = ShapeRenderer;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Sprite = void 0;\r\nconst Utils_1 = require(\"./Utils\");\r\nconst Vector2_1 = require(\"./Vector2\");\r\n/* eslint-disable */\r\nconst X1 = 0;\r\nconst Y1 = 1;\r\nconst C1R = 2;\r\nconst C1G = 3;\r\nconst C1B = 4;\r\nconst C1A = 5;\r\nconst U1 = 6;\r\nconst V1 = 7;\r\nconst C1R2 = 8;\r\nconst C1G2 = 9;\r\nconst C1B2 = 10;\r\nconst C1A2 = 11;\r\nconst X2 = 12;\r\nconst Y2 = 13;\r\nconst C2R = 14;\r\nconst C2G = 15;\r\nconst C2B = 16;\r\nconst C2A = 17;\r\nconst U2 = 18;\r\nconst V2 = 19;\r\nconst C2R2 = 20;\r\nconst C2G2 = 21;\r\nconst C2B2 = 22;\r\nconst C2A2 = 23;\r\nconst X3 = 24;\r\nconst Y3 = 25;\r\nconst C3R = 26;\r\nconst C3G = 27;\r\nconst C3B = 28;\r\nconst C3A = 29;\r\nconst U3 = 30;\r\nconst V3 = 31;\r\nconst C3R2 = 32;\r\nconst C3G2 = 33;\r\nconst C3B2 = 34;\r\nconst C3A2 = 35;\r\nconst X4 = 36;\r\nconst Y4 = 37;\r\nconst C4R = 38;\r\nconst C4G = 39;\r\nconst C4B = 40;\r\nconst C4A = 41;\r\nconst U4 = 42;\r\nconst V4 = 43;\r\nconst C4R2 = 44;\r\nconst C4G2 = 45;\r\nconst C4B2 = 46;\r\nconst C4A2 = 47;\r\n/* eslint-enable */\r\n/**\r\n * An unoptimized version of Sprite. Always calculate all vertices, never update partially. Will improve later after refactoring the SpriteBatch.\r\n */\r\nclass Sprite {\r\n    constructor(region) {\r\n        this.region = region;\r\n        this.dirty = false;\r\n        this.position = new Vector2_1.Vector2(0, 0);\r\n        this.size = new Vector2_1.Vector2(0, 0);\r\n        this.origin = new Vector2_1.Vector2(0, 0);\r\n        this.scale = new Vector2_1.Vector2(1, 1);\r\n        this.color = new Utils_1.Color(1, 1, 1, 1);\r\n        this.rotation = 0;\r\n        this.vertices = new Float32Array(48);\r\n        this.bounds = {\r\n            x: 0,\r\n            y: 0,\r\n            width: 0,\r\n            height: 0\r\n        };\r\n        this.setSize(region.width, region.height);\r\n        this.setOrigin(region.width / 2, region.height / 2);\r\n    }\r\n    set(sprite) {\r\n        this.region = sprite.region;\r\n        this.position.setVector(sprite.position);\r\n        this.size.setVector(sprite.size);\r\n        this.origin.setVector(sprite.origin);\r\n        this.rotation = sprite.rotation;\r\n        this.scale.setVector(sprite.scale);\r\n        this.color.setFromColor(sprite.color);\r\n        this.dirty = true;\r\n    }\r\n    setBounds(x, y, width, height) {\r\n        this.setPosition(x, y);\r\n        this.setSize(x, y);\r\n        this.dirty = true;\r\n    }\r\n    setSize(width, height) {\r\n        this.size.set(width, height);\r\n        this.dirty = true;\r\n    }\r\n    setPosition(x, y) {\r\n        this.position.set(x, y);\r\n        this.dirty = true;\r\n    }\r\n    setOriginBasedPosition(x, y) {\r\n        this.setPosition(x - this.origin.x, y - this.origin.y);\r\n    }\r\n    setX(x) {\r\n        this.position.x = x;\r\n        this.dirty = true;\r\n    }\r\n    setY(y) {\r\n        this.position.y = y;\r\n        this.dirty = true;\r\n    }\r\n    /** Sets the x position so that it is centered on the given x parameter */\r\n    setCenterX(x) {\r\n        this.setX(x - this.size.x / 2);\r\n    }\r\n    /** Sets the y position so that it is centered on the given y parameter */\r\n    setCenterY(y) {\r\n        this.setY(y - this.size.y / 2);\r\n    }\r\n    /** Sets the position so that the sprite is centered on (x, y) */\r\n    setCenter(x, y) {\r\n        this.setPosition(x - this.size.x / 2, y - this.size.y / 2);\r\n    }\r\n    /** Sets the x position relative to the current position where the sprite will be drawn. If origin, rotation, or scale are\r\n     * changed, it is slightly more efficient to translate after those operations. */\r\n    translateX(xAmount) {\r\n        this.translate(xAmount, 0);\r\n    }\r\n    /** Sets the y position relative to the current position where the sprite will be drawn. If origin, rotation, or scale are\r\n     * changed, it is slightly more efficient to translate after those operations. */\r\n    translateY(yAmount) {\r\n        this.translate(0, yAmount);\r\n    }\r\n    translate(xAmount, yAmount) {\r\n        this.position.add(xAmount, yAmount);\r\n        this.dirty = true;\r\n    }\r\n    /** Sets the color used to tint this sprite. Default is {@link Color#WHITE}. */\r\n    setColor(tint) {\r\n        this.color.setFromColor(tint);\r\n        this.dirty = true;\r\n    }\r\n    /** Sets the alpha portion of the color used to tint this sprite. */\r\n    setAlpha(a) {\r\n        this.color.a = a;\r\n        this.dirty = true;\r\n    }\r\n    /** Sets the origin in relation to the sprite's position for scaling and rotation. */\r\n    setOrigin(originX, originY) {\r\n        this.origin.set(originX, originY);\r\n        this.dirty = true;\r\n    }\r\n    /** Place origin in the center of the sprite */\r\n    setOriginCenter() {\r\n        this.origin.set(this.size.x / 2, this.size.y / 2);\r\n        this.dirty = true;\r\n    }\r\n    setRotation(rad) {\r\n        this.rotation = rad;\r\n        this.dirty = true;\r\n    }\r\n    getRotation() {\r\n        return this.rotation;\r\n    }\r\n    rotate(rad) {\r\n        if (rad === 0)\r\n            return;\r\n        this.rotation += rad;\r\n        this.dirty = true;\r\n    }\r\n    /** Sets the sprite's scale for both X and Y. The sprite scales out from the origin. This will not affect the values returned\r\n     * by {@link #getWidth()} and {@link #getHeight()} */\r\n    setScale(scaleX, scaleY) {\r\n        this.scale.set(scaleX, scaleY);\r\n        this.dirty = true;\r\n    }\r\n    /** Sets the sprite's scale relative to the current scale. for example: original scale 2 -> sprite.scale(4) -> final scale 6.\r\n     * The sprite scales out from the origin. This will not affect the values returned by {@link #getWidth()} and\r\n     * {@link #getHeight()} */\r\n    applyScale(amount) {\r\n        this.scale.scale(amount);\r\n        this.dirty = true;\r\n    }\r\n    /** Returns the packed vertices, colors, and texture coordinates for this sprite. */\r\n    getVertices(yDown = false) {\r\n        const { vertices, region } = this;\r\n        if (!this.dirty) {\r\n            return vertices;\r\n        }\r\n        let x = this.position.x;\r\n        let y = this.position.y;\r\n        let width = this.size.x;\r\n        let height = this.size.y;\r\n        let originX = this.origin.x;\r\n        let originY = this.origin.y;\r\n        let rotation = this.rotation;\r\n        let scaleX = this.scale.x;\r\n        let scaleY = this.scale.y;\r\n        let ou1 = region.u;\r\n        let ov1 = region.v;\r\n        let ou2 = region.u2;\r\n        let ov2 = region.v2;\r\n        const color = this.color;\r\n        let rotate = region.rotated;\r\n        const xRatio = width / region.originalWidth;\r\n        const yRatio = height / region.originalHeight;\r\n        const drawWidth = region.width * xRatio;\r\n        const drawHeight = region.height * yRatio;\r\n        const drawX = x + region.offsetX * xRatio;\r\n        let drawY = 0;\r\n        if (yDown) {\r\n            drawY = y + height - region.offsetY * yRatio - drawHeight;\r\n        }\r\n        else {\r\n            drawY = y + region.offsetY * yRatio;\r\n        }\r\n        x = drawX;\r\n        y = drawY;\r\n        width = drawWidth;\r\n        height = drawHeight;\r\n        if (yDown) {\r\n            const tmpV1 = ov1;\r\n            ov1 = ov2;\r\n            ov2 = tmpV1;\r\n        }\r\n        let x1 = -originX;\r\n        let x2 = width - originX;\r\n        let x3 = width - originX;\r\n        let x4 = -originX;\r\n        let y1 = -originY;\r\n        let y2 = -originY;\r\n        let y3 = height - originY;\r\n        let y4 = height - originY;\r\n        if (scaleX !== 1) {\r\n            x1 = x1 * scaleX;\r\n            x2 = x2 * scaleX;\r\n            x3 = x3 * scaleX;\r\n            x4 = x4 * scaleX;\r\n        }\r\n        if (scaleY !== 1) {\r\n            y1 = y1 * scaleY;\r\n            y2 = y2 * scaleY;\r\n            y3 = y3 * scaleY;\r\n            y4 = y4 * scaleY;\r\n        }\r\n        if (rotation !== 0) {\r\n            var cos = Math.cos(rotation);\r\n            var sin = Math.sin(rotation);\r\n            var rotatedX1 = cos * x1 - sin * y1;\r\n            var rotatedY1 = sin * x1 + cos * y1;\r\n            var rotatedX2 = cos * x2 - sin * y2;\r\n            var rotatedY2 = sin * x2 + cos * y2;\r\n            var rotatedX3 = cos * x3 - sin * y3;\r\n            var rotatedY3 = sin * x3 + cos * y3;\r\n            var rotatedX4 = cos * x4 - sin * y4;\r\n            var rotatedY4 = sin * x4 + cos * y4;\r\n            x1 = rotatedX1;\r\n            x2 = rotatedX2;\r\n            x3 = rotatedX3;\r\n            x4 = rotatedX4;\r\n            y1 = rotatedY1;\r\n            y2 = rotatedY2;\r\n            y3 = rotatedY3;\r\n            y4 = rotatedY4;\r\n        }\r\n        x1 += x + originX;\r\n        x2 += x + originX;\r\n        x3 += x + originX;\r\n        x4 += x + originX;\r\n        y1 += y + originY;\r\n        y2 += y + originY;\r\n        y3 += y + originY;\r\n        y4 += y + originY;\r\n        let u1 = ou1;\r\n        let v1 = ov1;\r\n        let u2 = ou2;\r\n        let v2 = ov2;\r\n        let u3 = u2;\r\n        let v3 = v1;\r\n        let u4 = u1;\r\n        let v4 = v2;\r\n        if (rotate) {\r\n            if (yDown) {\r\n                u1 = ou1;\r\n                v1 = ov2;\r\n                u2 = ou2;\r\n                v2 = ov1;\r\n                u3 = ou1;\r\n                v3 = ov1;\r\n                u4 = ou2;\r\n                v4 = ov2;\r\n            }\r\n            else {\r\n                u1 = ou2;\r\n                v1 = ov1;\r\n                u2 = ou1;\r\n                v2 = ov2;\r\n                u3 = ou2;\r\n                v3 = ov2;\r\n                u4 = ou1;\r\n                v4 = ov1;\r\n            }\r\n        }\r\n        var i = 0;\r\n        vertices[i++] = x1;\r\n        vertices[i++] = y1;\r\n        vertices[i++] = color.r;\r\n        vertices[i++] = color.g;\r\n        vertices[i++] = color.b;\r\n        vertices[i++] = color.a;\r\n        vertices[i++] = u1;\r\n        vertices[i++] = v1;\r\n        vertices[i++] = 0;\r\n        vertices[i++] = 0;\r\n        vertices[i++] = 0;\r\n        vertices[i++] = 0;\r\n        vertices[i++] = x2;\r\n        vertices[i++] = y2;\r\n        vertices[i++] = color.r;\r\n        vertices[i++] = color.g;\r\n        vertices[i++] = color.b;\r\n        vertices[i++] = color.a;\r\n        vertices[i++] = u3;\r\n        vertices[i++] = v3;\r\n        vertices[i++] = 0;\r\n        vertices[i++] = 0;\r\n        vertices[i++] = 0;\r\n        vertices[i++] = 0;\r\n        vertices[i++] = x3;\r\n        vertices[i++] = y3;\r\n        vertices[i++] = color.r;\r\n        vertices[i++] = color.g;\r\n        vertices[i++] = color.b;\r\n        vertices[i++] = color.a;\r\n        vertices[i++] = u2;\r\n        vertices[i++] = v2;\r\n        vertices[i++] = 0;\r\n        vertices[i++] = 0;\r\n        vertices[i++] = 0;\r\n        vertices[i++] = 0;\r\n        vertices[i++] = x4;\r\n        vertices[i++] = y4;\r\n        vertices[i++] = color.r;\r\n        vertices[i++] = color.g;\r\n        vertices[i++] = color.b;\r\n        vertices[i++] = color.a;\r\n        vertices[i++] = u4;\r\n        vertices[i++] = v4;\r\n        vertices[i++] = 0;\r\n        vertices[i++] = 0;\r\n        vertices[i++] = 0;\r\n        vertices[i] = 0;\r\n        return vertices;\r\n    }\r\n    /** Returns the bounding axis aligned {@link Rectangle} that bounds this sprite. The rectangles x and y coordinates describe\r\n     * its bottom left corner. If you change the position or size of the sprite, you have to fetch the triangle again for it to be\r\n     * recomputed.\r\n     *\r\n     * @return the bounding Rectangle */\r\n    getBoundingRectangle() {\r\n        const vertices = this.vertices;\r\n        let minx = vertices[X1];\r\n        let miny = vertices[Y1];\r\n        let maxx = vertices[X1];\r\n        let maxy = vertices[Y1];\r\n        minx = minx > vertices[X2] ? vertices[X2] : minx;\r\n        minx = minx > vertices[X3] ? vertices[X3] : minx;\r\n        minx = minx > vertices[X4] ? vertices[X4] : minx;\r\n        maxx = maxx < vertices[X2] ? vertices[X2] : maxx;\r\n        maxx = maxx < vertices[X3] ? vertices[X3] : maxx;\r\n        maxx = maxx < vertices[X4] ? vertices[X4] : maxx;\r\n        miny = miny > vertices[Y2] ? vertices[Y2] : miny;\r\n        miny = miny > vertices[Y3] ? vertices[Y3] : miny;\r\n        miny = miny > vertices[Y4] ? vertices[Y4] : miny;\r\n        maxy = maxy < vertices[Y2] ? vertices[Y2] : maxy;\r\n        maxy = maxy < vertices[Y3] ? vertices[Y3] : maxy;\r\n        maxy = maxy < vertices[Y4] ? vertices[Y4] : maxy;\r\n        this.bounds.x = minx;\r\n        this.bounds.y = miny;\r\n        this.bounds.width = maxx - minx;\r\n        this.bounds.height = maxy - miny;\r\n        return this.bounds;\r\n    }\r\n    draw(batch) {\r\n        batch.drawVertices(this.region.texture, this.getVertices(batch.yDown));\r\n    }\r\n    drawWithAlpha(batch, alphaModulation) {\r\n        const oldAlpha = this.getColor().a;\r\n        this.setAlpha(oldAlpha * alphaModulation);\r\n        this.draw(batch);\r\n        this.setAlpha(oldAlpha);\r\n    }\r\n    getX() {\r\n        return this.position.x;\r\n    }\r\n    getY() {\r\n        return this.position.y;\r\n    }\r\n    /** @return the width of the sprite, not accounting for scale. */\r\n    getWidth() {\r\n        return this.size.x;\r\n    }\r\n    /** @return the height of the sprite, not accounting for scale. */\r\n    getHeight() {\r\n        return this.size.y;\r\n    }\r\n    /** The origin influences {@link #setPosition(float, float)}, {@link #setRotation(float)} and the expansion direction of\r\n     * scaling {@link #setScale(float, float)} */\r\n    getOriginX() {\r\n        return this.origin.x;\r\n    }\r\n    /** The origin influences {@link #setPosition(float, float)}, {@link #setRotation(float)} and the expansion direction of\r\n     * scaling {@link #setScale(float, float)} */\r\n    getOriginY() {\r\n        return this.origin.y;\r\n    }\r\n    /** X scale of the sprite, independent of size set by {@link #setSize(float, float)} */\r\n    getScaleX() {\r\n        return this.scale.x;\r\n    }\r\n    /** Y scale of the sprite, independent of size set by {@link #setSize(float, float)} */\r\n    getScaleY() {\r\n        return this.scale.y;\r\n    }\r\n    /** Returns the color of this sprite. If the returned instance is manipulated, {@link #setColor(Color)} must be called\r\n     * afterward. */\r\n    getColor() {\r\n        return this.color;\r\n    }\r\n}\r\nexports.Sprite = Sprite;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Texture = exports.TextureWrap = exports.TextureFilter = void 0;\r\nvar TextureFilter;\r\n(function (TextureFilter) {\r\n    TextureFilter[TextureFilter[\"Nearest\"] = 9728] = \"Nearest\";\r\n    TextureFilter[TextureFilter[\"Linear\"] = 9729] = \"Linear\";\r\n    TextureFilter[TextureFilter[\"MipMap\"] = 9987] = \"MipMap\";\r\n    TextureFilter[TextureFilter[\"MipMapNearestNearest\"] = 9984] = \"MipMapNearestNearest\";\r\n    TextureFilter[TextureFilter[\"MipMapLinearNearest\"] = 9985] = \"MipMapLinearNearest\";\r\n    TextureFilter[TextureFilter[\"MipMapNearestLinear\"] = 9986] = \"MipMapNearestLinear\";\r\n    TextureFilter[TextureFilter[\"MipMapLinearLinear\"] = 9987] = \"MipMapLinearLinear\"; // WebGLRenderingContext.LINEAR_MIPMAP_LINEAR\r\n})(TextureFilter = exports.TextureFilter || (exports.TextureFilter = {}));\r\nvar TextureWrap;\r\n(function (TextureWrap) {\r\n    TextureWrap[TextureWrap[\"MirroredRepeat\"] = 33648] = \"MirroredRepeat\";\r\n    TextureWrap[TextureWrap[\"ClampToEdge\"] = 33071] = \"ClampToEdge\";\r\n    TextureWrap[TextureWrap[\"Repeat\"] = 10497] = \"Repeat\"; // WebGLRenderingContext.REPEAT\r\n})(TextureWrap = exports.TextureWrap || (exports.TextureWrap = {}));\r\nclass Texture {\r\n    constructor(context, image, useMipMaps = false) {\r\n        this.texture = null;\r\n        this.boundUnit = 0;\r\n        this.useMipMaps = false;\r\n        this.width = 0;\r\n        this.height = 0;\r\n        this._image = image;\r\n        this.context = context;\r\n        this.useMipMaps = useMipMaps;\r\n        this.restore();\r\n        this.width = image.width;\r\n        this.height = image.height;\r\n    }\r\n    getImage() {\r\n        return this._image;\r\n    }\r\n    static load(gl, url, useMipmaps = false) {\r\n        return new Promise(resolve => {\r\n            const image = new Image();\r\n            image.onload = () => {\r\n                resolve(new Texture(gl, image, useMipmaps));\r\n            };\r\n            image.src = url;\r\n        });\r\n    }\r\n    getWebGLTexture() {\r\n        return this.texture;\r\n    }\r\n    setFilters(minFilter, magFilter) {\r\n        let gl = this.context;\r\n        this.bind();\r\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, minFilter);\r\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, Texture.validateMagFilter(magFilter));\r\n    }\r\n    static validateMagFilter(magFilter) {\r\n        switch (magFilter) {\r\n            case TextureFilter.MipMap:\r\n            case TextureFilter.MipMapLinearLinear:\r\n            case TextureFilter.MipMapLinearNearest:\r\n            case TextureFilter.MipMapNearestLinear:\r\n            case TextureFilter.MipMapNearestNearest:\r\n                return TextureFilter.Linear;\r\n            default:\r\n                return magFilter;\r\n        }\r\n    }\r\n    setWraps(uWrap, vWrap) {\r\n        let gl = this.context;\r\n        this.bind();\r\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, uWrap);\r\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, vWrap);\r\n    }\r\n    update(useMipMaps) {\r\n        let gl = this.context;\r\n        if (!this.texture)\r\n            this.texture = this.context.createTexture();\r\n        this.bind();\r\n        if (Texture.DISABLE_UNPACK_PREMULTIPLIED_ALPHA_WEBGL)\r\n            gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, false);\r\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, this._image);\r\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\r\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, useMipMaps ? gl.LINEAR_MIPMAP_LINEAR : gl.LINEAR);\r\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\r\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\r\n        if (useMipMaps)\r\n            gl.generateMipmap(gl.TEXTURE_2D);\r\n    }\r\n    restore() {\r\n        this.texture = null;\r\n        this.update(this.useMipMaps);\r\n    }\r\n    bind(unit = 0) {\r\n        let gl = this.context;\r\n        this.boundUnit = unit;\r\n        gl.activeTexture(gl.TEXTURE0 + unit);\r\n        gl.bindTexture(gl.TEXTURE_2D, this.texture);\r\n    }\r\n    unbind() {\r\n        let gl = this.context;\r\n        gl.activeTexture(gl.TEXTURE0 + this.boundUnit);\r\n        gl.bindTexture(gl.TEXTURE_2D, null);\r\n    }\r\n    dispose() {\r\n        let gl = this.context;\r\n        gl.deleteTexture(this.texture);\r\n    }\r\n}\r\nexports.Texture = Texture;\r\nTexture.DISABLE_UNPACK_PREMULTIPLIED_ALPHA_WEBGL = false;\r\n","\"use strict\";\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.TextureAtlas = void 0;\r\nconst Texture_1 = require(\"./Texture\");\r\nconst TextureRegion_1 = require(\"./TextureRegion\");\r\nfunction concatAndResolveUrl(url, concat) {\r\n    let url1 = url.split('/');\r\n    let url2 = concat.split('/');\r\n    let url3 = [];\r\n    for (let i = 0, l = url1.length; i < l; i++) {\r\n        if (url1[i] === '..') {\r\n            url3.pop();\r\n        }\r\n        else if (url1[i] === '.') {\r\n            continue;\r\n        }\r\n        else {\r\n            url3.push(url1[i]);\r\n        }\r\n    }\r\n    for (let i = 0, l = url2.length; i < l; i++) {\r\n        if (url2[i] === '..') {\r\n            url3.pop();\r\n        }\r\n        else if (url2[i] === '.') {\r\n            continue;\r\n        }\r\n        else {\r\n            url3.push(url2[i]);\r\n        }\r\n    }\r\n    return url3.join('/');\r\n}\r\nclass TextureAtlas {\r\n    constructor(pages, regions) {\r\n        this.pages = pages;\r\n        this.regions = regions;\r\n    }\r\n    dispose() {\r\n        for (let page of this.pages) {\r\n            page.dispose();\r\n        }\r\n    }\r\n    getPages() {\r\n        return this.pages;\r\n    }\r\n    getRegions() {\r\n        return this.regions;\r\n    }\r\n    findRegion(name, index) {\r\n        for (let i = 0; i < this.regions.length; i++) {\r\n            let region = this.regions[i];\r\n            if (region.name !== name)\r\n                continue;\r\n            if (index !== undefined && region.index !== index)\r\n                continue;\r\n            return region;\r\n        }\r\n        return null;\r\n    }\r\n    findRegions(name) {\r\n        return this.regions.filter(region => region.name === name).sort((a, b) => a.index - b.index);\r\n    }\r\n    static load(gl, packFileUrl, textureOptions) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const packFileContent = yield fetch(packFileUrl).then(res => res.text());\r\n            const pageData = [];\r\n            const pages = [];\r\n            const regionsData = [];\r\n            let pageImage;\r\n            const lines = packFileContent.split(/\\r?\\n/);\r\n            let i = 0;\r\n            let tuple;\r\n            while (true) {\r\n                let line = lines[i];\r\n                if (line === undefined) {\r\n                    break;\r\n                }\r\n                if (line.trim().length === 0) {\r\n                    pageImage = null;\r\n                }\r\n                else if (pageImage === null) {\r\n                    const file = concatAndResolveUrl(packFileUrl, `../${line}`);\r\n                    i++;\r\n                    line = lines[i];\r\n                    tuple = line\r\n                        .split(':')[1]\r\n                        .split(',')\r\n                        .map(s => s.trim());\r\n                    const width = parseInt(tuple[0], 10);\r\n                    const height = parseInt(tuple[1], 10);\r\n                    i++;\r\n                    line = lines[i];\r\n                    tuple = line\r\n                        .split(':')[1]\r\n                        .split(',')\r\n                        .map(s => s.trim());\r\n                    const format = tuple[0];\r\n                    i++;\r\n                    line = lines[i];\r\n                    tuple = line\r\n                        .split(':')[1]\r\n                        .split(',')\r\n                        .map(s => s.trim());\r\n                    const [min, max] = tuple;\r\n                    i++;\r\n                    line = lines[i];\r\n                    tuple = line\r\n                        .split(':')[1]\r\n                        .split(',')\r\n                        .map(s => s.trim());\r\n                    const direction = tuple[0];\r\n                    let repeatX = Texture_1.TextureWrap.ClampToEdge;\r\n                    let repeatY = Texture_1.TextureWrap.ClampToEdge;\r\n                    if (direction === 'x') {\r\n                        repeatX = Texture_1.TextureWrap.Repeat;\r\n                    }\r\n                    else if (direction === 'y') {\r\n                        repeatY = Texture_1.TextureWrap.Repeat;\r\n                    }\r\n                    else if (direction === 'xy') {\r\n                        repeatX = Texture_1.TextureWrap.Repeat;\r\n                        repeatY = Texture_1.TextureWrap.Repeat;\r\n                    }\r\n                    const mipMaps = min !== 'Nearest' && min !== 'Linear';\r\n                    pageImage = {\r\n                        file,\r\n                        width,\r\n                        height,\r\n                        format,\r\n                        mipMaps,\r\n                        min,\r\n                        max,\r\n                        direction,\r\n                        repeatX,\r\n                        repeatY\r\n                    };\r\n                    pageData.push(pageImage);\r\n                }\r\n                else {\r\n                    const name = line;\r\n                    i++;\r\n                    line = lines[i];\r\n                    tuple = line\r\n                        .split(':')[1]\r\n                        .split(',')\r\n                        .map(s => s.trim());\r\n                    const rotate = tuple[0] === 'true';\r\n                    i++;\r\n                    line = lines[i];\r\n                    tuple = line\r\n                        .split(':')[1]\r\n                        .split(',')\r\n                        .map(s => s.trim());\r\n                    const left = parseInt(tuple[0], 10);\r\n                    const top = parseInt(tuple[1], 10);\r\n                    i++;\r\n                    line = lines[i];\r\n                    tuple = line\r\n                        .split(':')[1]\r\n                        .split(',')\r\n                        .map(s => s.trim());\r\n                    const width = parseInt(tuple[0], 10);\r\n                    const height = parseInt(tuple[1], 10);\r\n                    const region = {\r\n                        name,\r\n                        rotate,\r\n                        left,\r\n                        top,\r\n                        width,\r\n                        height,\r\n                        page: pageImage\r\n                    };\r\n                    i++;\r\n                    line = lines[i];\r\n                    tuple = line\r\n                        .split(':')[1]\r\n                        .split(',')\r\n                        .map(s => s.trim());\r\n                    if (tuple.length === 4) {\r\n                        region.splits = tuple.map(i => parseInt(i, 10));\r\n                        i++;\r\n                        line = lines[i];\r\n                        tuple = line\r\n                            .split(':')[1]\r\n                            .split(',')\r\n                            .map(s => s.trim());\r\n                        if (tuple.length === 4) {\r\n                            region.pads = tuple.map(i => parseInt(i, 10));\r\n                            i++;\r\n                            line = lines[i];\r\n                            tuple = line\r\n                                .split(':')[1]\r\n                                .split(',')\r\n                                .map(s => s.trim());\r\n                        }\r\n                    }\r\n                    region.originalWidth = parseInt(tuple[0], 10);\r\n                    region.originalHeight = parseInt(tuple[1], 10);\r\n                    i++;\r\n                    line = lines[i];\r\n                    tuple = line\r\n                        .split(':')[1]\r\n                        .split(',')\r\n                        .map(s => s.trim());\r\n                    region.offsetX = parseInt(tuple[0], 10);\r\n                    region.offsetY = parseInt(tuple[1], 10);\r\n                    i++;\r\n                    line = lines[i];\r\n                    tuple = line\r\n                        .split(':')[1]\r\n                        .split(',')\r\n                        .map(s => s.trim());\r\n                    region.index = parseInt(tuple[0], 10);\r\n                    regionsData.push(region);\r\n                }\r\n                i++;\r\n            }\r\n            for (let page of pageData) {\r\n                page.texture = yield Texture_1.Texture.load(gl, page.file, textureOptions);\r\n                page.invTexWidth = 1 / page.texture.width;\r\n                page.invTexHeight = 1 / page.texture.height;\r\n            }\r\n            const regions = [];\r\n            for (let regionData of regionsData) {\r\n                const { left: x, top: y } = regionData;\r\n                const width = regionData.rotate ? regionData.height : regionData.width;\r\n                const height = regionData.rotate ? regionData.width : regionData.height;\r\n                const { texture, invTexWidth, invTexHeight } = regionData.page;\r\n                regions.push(new TextureRegion_1.TextureRegion(texture, x, y, width, height, regionData, invTexWidth, invTexHeight, regionData.rotate));\r\n            }\r\n            return new TextureAtlas(pages, regions);\r\n        });\r\n    }\r\n}\r\nexports.TextureAtlas = TextureAtlas;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.TextureRegion = void 0;\r\nclass TextureRegion {\r\n    constructor(tex, x, y, width, height, extraData, invTexWidth, invTexHeight, rotate = false) {\r\n        this.name = null;\r\n        this.index = 0;\r\n        this.texture = null;\r\n        this.regionX = 0;\r\n        this.regionY = 0;\r\n        this.width = 0;\r\n        this.height = 0;\r\n        this.invTexWidth = 0;\r\n        this.invTexHeight = 0;\r\n        this.originalWidth = 0;\r\n        this.originalHeight = 0;\r\n        this.offsetX = 0;\r\n        this.offsetY = 0;\r\n        this.u = 0;\r\n        this.v = 0;\r\n        this.u2 = 0;\r\n        this.v2 = 0;\r\n        this.rotated = false;\r\n        if (!invTexWidth || !invTexHeight) {\r\n            invTexWidth = 1 / tex.width;\r\n            invTexHeight = 1 / tex.height;\r\n        }\r\n        const u = x * invTexWidth;\r\n        const v = (y + height) * invTexHeight;\r\n        const u2 = (x + width) * invTexWidth;\r\n        const v2 = y * invTexHeight;\r\n        this.texture = tex;\r\n        this.regionX = x;\r\n        this.regionY = y;\r\n        this.width = width;\r\n        this.height = height;\r\n        this.originalWidth = width;\r\n        this.originalHeight = height;\r\n        this.offsetX = 0;\r\n        this.offsetY = 0;\r\n        this.u = u;\r\n        this.v = v;\r\n        this.u2 = u2;\r\n        this.v2 = v2;\r\n        this.rotated = rotate;\r\n        for (let key in extraData) {\r\n            this[key] = extraData[key];\r\n        }\r\n    }\r\n    static splitTexture(texture, cols, rows) {\r\n        const { width, height } = texture;\r\n        const regionWidth = width / cols;\r\n        const regionHeight = height / rows;\r\n        const regions = [];\r\n        for (let y = 0; y < rows; y++) {\r\n            for (let x = 0; x < cols; x++) {\r\n                regions.push(new TextureRegion(texture, x * regionWidth, y * regionHeight, regionWidth, regionHeight, {}));\r\n            }\r\n        }\r\n        return regions;\r\n    }\r\n    draw(batch, x, y, width, height, originX = 0, originY = 0, rotation = 0, scaleX = 1, scaleY = 1) {\r\n        const { originalWidth, originalHeight, offsetX, offsetY, width: regionWidth, height: regionHeight } = this;\r\n        const xRatio = width / originalWidth;\r\n        const yRatio = height / originalHeight;\r\n        const drawWidth = regionWidth * xRatio;\r\n        const drawHeight = regionHeight * yRatio;\r\n        const drawX = x + offsetX * xRatio;\r\n        let drawY = 0;\r\n        if (batch.yDown) {\r\n            drawY = y + height - offsetY * yRatio - drawHeight;\r\n        }\r\n        else {\r\n            drawY = y + offsetY * yRatio;\r\n        }\r\n        originX = originX - (drawX - x);\r\n        originY = originY - (drawY - y);\r\n        batch.draw(this.texture, drawX, drawY, drawWidth, drawHeight, originX, originY, rotation, scaleX, scaleY, this.u, this.v, this.u2, this.v2, this.rotated);\r\n    }\r\n}\r\nexports.TextureRegion = TextureRegion;\r\n","\"use strict\";\r\nvar _a;\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.copyArray = exports.createStage = exports.pointInRect = exports.resizeCanvas = exports.createGameLoop = exports.WindowedMean = exports.TimeKeeper = exports.Pools = exports.Pool = exports.Utils = exports.PowOut = exports.Pow = exports.Interpolation = exports.MathUtils = exports.Color = exports.StringSet = exports.IntSet = exports.Align = void 0;\r\nclass Align {\r\n    static isLeft(align) {\r\n        return (align & this.left) !== 0;\r\n    }\r\n    static isRight(align) {\r\n        return (align & this.right) !== 0;\r\n    }\r\n    static isTop(align) {\r\n        return (align & this.top) !== 0;\r\n    }\r\n    static isBottom(align) {\r\n        return (align & this.bottom) !== 0;\r\n    }\r\n    static isCenterVertical(align) {\r\n        return (align & this.top) === 0 && (align & this.bottom) === 0;\r\n    }\r\n    static isCenterHorizontal(align) {\r\n        return (align & this.left) === 0 && (align & this.right) === 0;\r\n    }\r\n}\r\nexports.Align = Align;\r\n_a = Align;\r\nAlign.center = 1 << 0;\r\nAlign.top = 1 << 1;\r\nAlign.bottom = 1 << 2;\r\nAlign.left = 1 << 3;\r\nAlign.right = 1 << 4;\r\nAlign.topLeft = _a.top | _a.left;\r\nAlign.topRight = _a.top | _a.right;\r\nAlign.bottomLeft = _a.bottom | _a.left;\r\nAlign.bottomRight = _a.bottom | _a.right;\r\nclass IntSet {\r\n    constructor() {\r\n        this.array = new Array();\r\n    }\r\n    add(value) {\r\n        let contains = this.contains(value);\r\n        this.array[value | 0] = value | 0;\r\n        return !contains;\r\n    }\r\n    contains(value) {\r\n        return this.array[value | 0] !== undefined;\r\n    }\r\n    remove(value) {\r\n        this.array[value | 0] = undefined;\r\n    }\r\n    clear() {\r\n        this.array.length = 0;\r\n    }\r\n}\r\nexports.IntSet = IntSet;\r\nclass StringSet {\r\n    constructor() {\r\n        this.entries = {};\r\n        this.size = 0;\r\n    }\r\n    add(value) {\r\n        let contains = this.entries[value];\r\n        this.entries[value] = true;\r\n        if (!contains) {\r\n            this.size++;\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n    addAll(values) {\r\n        let oldSize = this.size;\r\n        for (var i = 0, n = values.length; i < n; i++)\r\n            this.add(values[i]);\r\n        return oldSize !== this.size;\r\n    }\r\n    contains(value) {\r\n        return this.entries[value];\r\n    }\r\n    clear() {\r\n        this.entries = {};\r\n        this.size = 0;\r\n    }\r\n}\r\nexports.StringSet = StringSet;\r\nclass Color {\r\n    constructor(r = 0, g = 0, b = 0, a = 0) {\r\n        this.r = r;\r\n        this.g = g;\r\n        this.b = b;\r\n        this.a = a;\r\n    }\r\n    unsafeSet(r, g, b, a) {\r\n        this.r = r;\r\n        this.g = g;\r\n        this.b = b;\r\n        this.a = a;\r\n    }\r\n    set(r, g, b, a) {\r\n        this.r = r;\r\n        this.g = g;\r\n        this.b = b;\r\n        this.a = a;\r\n        return this.clamp();\r\n    }\r\n    setFromColor(c) {\r\n        this.r = c.r;\r\n        this.g = c.g;\r\n        this.b = c.b;\r\n        this.a = c.a;\r\n        return this;\r\n    }\r\n    setFromString(hex) {\r\n        hex = hex.charAt(0) === '#' ? hex.substring(1) : hex;\r\n        this.r = parseInt(hex.substring(0, 2), 16) / 255;\r\n        this.g = parseInt(hex.substring(2, 4), 16) / 255;\r\n        this.b = parseInt(hex.substring(4, 6), 16) / 255;\r\n        this.a = hex.length !== 8 ? 1 : parseInt(hex.substring(6, 8), 16) / 255;\r\n        return this;\r\n    }\r\n    add(r, g, b, a) {\r\n        this.r += r;\r\n        this.g += g;\r\n        this.b += b;\r\n        this.a += a;\r\n        return this.clamp();\r\n    }\r\n    clamp() {\r\n        if (this.r < 0)\r\n            this.r = 0;\r\n        else if (this.r > 1)\r\n            this.r = 1;\r\n        if (this.g < 0)\r\n            this.g = 0;\r\n        else if (this.g > 1)\r\n            this.g = 1;\r\n        if (this.b < 0)\r\n            this.b = 0;\r\n        else if (this.b > 1)\r\n            this.b = 1;\r\n        if (this.a < 0)\r\n            this.a = 0;\r\n        else if (this.a > 1)\r\n            this.a = 1;\r\n        return this;\r\n    }\r\n    toIntBits() {\r\n        return ((255 * this.a) << 24) | ((255 * this.b) << 16) | ((255 * this.g) << 8) | (255 * this.r);\r\n    }\r\n    static rgba8888ToColor(color, value) {\r\n        color.r = ((value & 0xff000000) >>> 24) / 255;\r\n        color.g = ((value & 0x00ff0000) >>> 16) / 255;\r\n        color.b = ((value & 0x0000ff00) >>> 8) / 255;\r\n        color.a = (value & 0x000000ff) / 255;\r\n    }\r\n    static rgb888ToColor(color, value) {\r\n        color.r = ((value & 0x00ff0000) >>> 16) / 255;\r\n        color.g = ((value & 0x0000ff00) >>> 8) / 255;\r\n        color.b = (value & 0x000000ff) / 255;\r\n    }\r\n    static fromString(hex) {\r\n        return new Color().setFromString(hex);\r\n    }\r\n}\r\nexports.Color = Color;\r\nColor.WHITE = new Color(1, 1, 1, 1);\r\nColor.RED = new Color(1, 0, 0, 1);\r\nColor.GREEN = new Color(0, 1, 0, 1);\r\nColor.BLUE = new Color(0, 0, 1, 1);\r\nColor.MAGENTA = new Color(1, 0, 1, 1);\r\nclass MathUtils {\r\n    static clamp(value, min, max) {\r\n        if (value < min)\r\n            return min;\r\n        if (value > max)\r\n            return max;\r\n        return value;\r\n    }\r\n    static cosDeg(degrees) {\r\n        return Math.cos(degrees * MathUtils.degRad);\r\n    }\r\n    static sinDeg(degrees) {\r\n        return Math.sin(degrees * MathUtils.degRad);\r\n    }\r\n    static signum(value) {\r\n        return value > 0 ? 1 : value < 0 ? -1 : 0;\r\n    }\r\n    static toInt(x) {\r\n        return x > 0 ? Math.floor(x) : Math.ceil(x);\r\n    }\r\n    static cbrt(x) {\r\n        let y = Math.pow(Math.abs(x), 1 / 3);\r\n        return x < 0 ? -y : y;\r\n    }\r\n    static randomTriangular(min, max) {\r\n        return MathUtils.randomTriangularWith(min, max, (min + max) * 0.5);\r\n    }\r\n    static randomTriangularWith(min, max, mode) {\r\n        let u = Math.random();\r\n        let d = max - min;\r\n        if (u <= (mode - min) / d)\r\n            return min + Math.sqrt(u * d * (mode - min));\r\n        return max - Math.sqrt((1 - u) * d * (max - mode));\r\n    }\r\n    static isPowerOfTwo(value) {\r\n        return value && (value & (value - 1)) === 0;\r\n    }\r\n}\r\nexports.MathUtils = MathUtils;\r\nMathUtils.PI = 3.1415927;\r\nMathUtils.PI2 = MathUtils.PI * 2;\r\nMathUtils.radiansToDegrees = 180 / MathUtils.PI;\r\nMathUtils.radDeg = MathUtils.radiansToDegrees;\r\nMathUtils.degreesToRadians = MathUtils.PI / 180;\r\nMathUtils.degRad = MathUtils.degreesToRadians;\r\nclass Interpolation {\r\n    apply(start, end, a) {\r\n        return start + (end - start) * this.applyInternal(a);\r\n    }\r\n}\r\nexports.Interpolation = Interpolation;\r\nclass Pow extends Interpolation {\r\n    constructor(power) {\r\n        super();\r\n        this.power = 2;\r\n        this.power = power;\r\n    }\r\n    applyInternal(a) {\r\n        if (a <= 0.5)\r\n            return Math.pow(a * 2, this.power) / 2;\r\n        return Math.pow((a - 1) * 2, this.power) / (this.power % 2 === 0 ? -2 : 2) + 1;\r\n    }\r\n}\r\nexports.Pow = Pow;\r\nclass PowOut extends Pow {\r\n    // constructor(power: number) {\r\n    //   super(power);\r\n    // }\r\n    applyInternal(a) {\r\n        return Math.pow(a - 1, this.power) * (this.power % 2 === 0 ? -1 : 1) + 1;\r\n    }\r\n}\r\nexports.PowOut = PowOut;\r\nclass Utils {\r\n    static arrayCopy(source, sourceStart, dest, destStart, numElements) {\r\n        for (let i = sourceStart, j = destStart; i < sourceStart + numElements; i++, j++) {\r\n            dest[j] = source[i];\r\n        }\r\n    }\r\n    static arrayFill(array, fromIndex, toIndex, value) {\r\n        for (let i = fromIndex; i < toIndex; i++)\r\n            array[i] = value;\r\n    }\r\n    static setArraySize(array, size, value = 0) {\r\n        let oldSize = array.length;\r\n        if (oldSize === size)\r\n            return array;\r\n        array.length = size;\r\n        if (oldSize < size) {\r\n            for (let i = oldSize; i < size; i++)\r\n                array[i] = value;\r\n        }\r\n        return array;\r\n    }\r\n    static ensureArrayCapacity(array, size, value = 0) {\r\n        if (array.length >= size)\r\n            return array;\r\n        return Utils.setArraySize(array, size, value);\r\n    }\r\n    static newArray(size, defaultValue) {\r\n        let array = new Array(size);\r\n        for (let i = 0; i < size; i++)\r\n            array[i] = defaultValue;\r\n        return array;\r\n    }\r\n    static newFloatArray(size) {\r\n        if (Utils.SUPPORTS_TYPED_ARRAYS)\r\n            return new Float32Array(size);\r\n        else {\r\n            let array = new Array(size);\r\n            for (let i = 0; i < array.length; i++)\r\n                array[i] = 0;\r\n            return array;\r\n        }\r\n    }\r\n    static newShortArray(size) {\r\n        if (Utils.SUPPORTS_TYPED_ARRAYS)\r\n            return new Int16Array(size);\r\n        else {\r\n            let array = new Array(size);\r\n            for (let i = 0; i < array.length; i++)\r\n                array[i] = 0;\r\n            return array;\r\n        }\r\n    }\r\n    static toFloatArray(array) {\r\n        return Utils.SUPPORTS_TYPED_ARRAYS ? new Float32Array(array) : array;\r\n    }\r\n    static toSinglePrecision(value) {\r\n        return Utils.SUPPORTS_TYPED_ARRAYS ? Math.fround(value) : value;\r\n    }\r\n    static contains(array, element, identity = true) {\r\n        for (var i = 0; i < array.length; i++)\r\n            if (array[i] === element)\r\n                return true;\r\n        return false;\r\n    }\r\n    static enumValue(type, name) {\r\n        return type[name[0].toUpperCase() + name.slice(1)];\r\n    }\r\n}\r\nexports.Utils = Utils;\r\nUtils.SUPPORTS_TYPED_ARRAYS = typeof Float32Array !== 'undefined';\r\nclass Pool {\r\n    constructor(instantiator) {\r\n        this.items = new Array();\r\n        if (instantiator) {\r\n            this.instantiator = instantiator;\r\n        }\r\n        else {\r\n            this.instantiator = () => ({});\r\n        }\r\n    }\r\n    obtain() {\r\n        const item = this.items.length > 0 ? this.items.pop() : this.instantiator();\r\n        return item;\r\n    }\r\n    free(item) {\r\n        if (item === null || item === void 0 ? void 0 : item.reset) {\r\n            item.reset();\r\n        }\r\n        this.items.push(item);\r\n    }\r\n    freeAll(items) {\r\n        for (let i = 0; i < items.length; i++)\r\n            this.free(items[i]);\r\n    }\r\n    clear() {\r\n        this.items.length = 0;\r\n    }\r\n}\r\nexports.Pool = Pool;\r\nclass Pools {\r\n    static free(name, object) {\r\n        if (this.pools[name]) {\r\n            this.pools[name].free(object);\r\n        }\r\n    }\r\n    static freeAll(name, objects) {\r\n        if (this.pools[name]) {\r\n            this.pools[name].freeAll(objects);\r\n        }\r\n    }\r\n    static get(name, instantiator) {\r\n        if (this.pools[name]) {\r\n            return this.pools[name];\r\n        }\r\n        this.pools[name] = new Pool(instantiator);\r\n        return this.pools[name];\r\n    }\r\n    static set(name, pool) {\r\n        this.pools[name] = pool;\r\n    }\r\n    static obtain(name, instantiator) {\r\n        return this.get(name, instantiator).obtain();\r\n    }\r\n}\r\nexports.Pools = Pools;\r\nPools.pools = {};\r\nclass TimeKeeper {\r\n    constructor() {\r\n        this.maxDelta = 0.064;\r\n        this.framesPerSecond = 0;\r\n        this.delta = 0;\r\n        this.totalTime = 0;\r\n        this.lastTime = Date.now() / 1000;\r\n        this.frameCount = 0;\r\n        this.frameTime = 0;\r\n    }\r\n    update() {\r\n        let now = Date.now() / 1000;\r\n        this.delta = now - this.lastTime;\r\n        this.frameTime += this.delta;\r\n        this.totalTime += this.delta;\r\n        if (this.delta > this.maxDelta)\r\n            this.delta = this.maxDelta;\r\n        this.lastTime = now;\r\n        this.frameCount++;\r\n        if (this.frameTime > 1) {\r\n            this.framesPerSecond = this.frameCount / this.frameTime;\r\n            this.frameTime = 0;\r\n            this.frameCount = 0;\r\n        }\r\n    }\r\n}\r\nexports.TimeKeeper = TimeKeeper;\r\nclass WindowedMean {\r\n    constructor(windowSize = 32) {\r\n        this.addedValues = 0;\r\n        this.lastValue = 0;\r\n        this.mean = 0;\r\n        this.dirty = true;\r\n        this.values = new Array(windowSize);\r\n    }\r\n    hasEnoughData() {\r\n        return this.addedValues >= this.values.length;\r\n    }\r\n    addValue(value) {\r\n        if (this.addedValues < this.values.length)\r\n            this.addedValues++;\r\n        this.values[this.lastValue++] = value;\r\n        if (this.lastValue > this.values.length - 1)\r\n            this.lastValue = 0;\r\n        this.dirty = true;\r\n    }\r\n    getMean() {\r\n        if (this.hasEnoughData()) {\r\n            if (this.dirty) {\r\n                let mean = 0;\r\n                for (let i = 0; i < this.values.length; i++)\r\n                    mean += this.values[i];\r\n                this.mean = mean / this.values.length;\r\n                this.dirty = false;\r\n            }\r\n            return this.mean;\r\n        }\r\n        return 0;\r\n    }\r\n}\r\nexports.WindowedMean = WindowedMean;\r\nconst createGameLoop = (update) => {\r\n    let lastUpdate = Date.now();\r\n    let fps = 0;\r\n    let running = true;\r\n    let requestId;\r\n    let frameInLastSecond = 0;\r\n    let elapsed = 0;\r\n    function loop() {\r\n        if (running) {\r\n            const delta = Date.now() - lastUpdate;\r\n            lastUpdate = Date.now();\r\n            frameInLastSecond++;\r\n            elapsed += delta;\r\n            if (elapsed >= 1000) {\r\n                fps = frameInLastSecond;\r\n                frameInLastSecond = 0;\r\n                elapsed -= 1000;\r\n            }\r\n            requestId = requestAnimationFrame(loop);\r\n            update(delta / 1000);\r\n        }\r\n    }\r\n    loop();\r\n    return {\r\n        isRunning: () => running,\r\n        start: () => {\r\n            if (!running) {\r\n                running = true;\r\n                loop();\r\n            }\r\n        },\r\n        stop: () => {\r\n            if (requestId) {\r\n                cancelAnimationFrame(requestId);\r\n            }\r\n            running = false;\r\n        },\r\n        getFps: () => fps\r\n    };\r\n};\r\nexports.createGameLoop = createGameLoop;\r\nconst resizeCanvas = (canvas, deviceRatio) => {\r\n    const devicePixelRatio = deviceRatio || window.devicePixelRatio || 1;\r\n    const displayWidth = canvas.clientWidth * devicePixelRatio;\r\n    const displayHeight = canvas.clientHeight * devicePixelRatio;\r\n    if (canvas.width !== displayWidth || canvas.height !== displayHeight) {\r\n        canvas.width = displayWidth;\r\n        canvas.height = displayHeight;\r\n    }\r\n    return [displayWidth, displayHeight];\r\n};\r\nexports.resizeCanvas = resizeCanvas;\r\nconst pointInRect = (pX, pY, x, y, width, height) => {\r\n    return pX > x && pX < x + width && pY > y && pY < y + height;\r\n};\r\nexports.pointInRect = pointInRect;\r\nconst createStage = (options) => {\r\n    const defaultOptions = {\r\n        hidden: false,\r\n        info: true\r\n    };\r\n    options = Object.assign(Object.assign({}, defaultOptions), options);\r\n    const wrapper = document.createElement('div');\r\n    wrapper.setAttribute('style', `position:fixed;top:0;left:0;right:0;bottom:0;`);\r\n    if (options.wrapperClassName) {\r\n        wrapper.className = options.wrapperClassName;\r\n    }\r\n    if (options.hidden) {\r\n        wrapper.style.display = 'none';\r\n    }\r\n    const canvas = document.createElement('canvas');\r\n    canvas.setAttribute('style', `width:100%;height:100%;`);\r\n    const info = document.createElement('div');\r\n    info.setAttribute('style', `position:absolute;top:1em;left:1em;color:white`);\r\n    if (!options.info) {\r\n        info.style.display = 'none';\r\n    }\r\n    wrapper.appendChild(canvas);\r\n    wrapper.appendChild(info);\r\n    document.body.appendChild(wrapper);\r\n    return {\r\n        getCanvas: () => canvas,\r\n        getInfo: () => info,\r\n        show: () => (wrapper.style.display = 'block'),\r\n        hide: () => (wrapper.style.display = 'none'),\r\n        cleanup: () => document.body.removeChild(wrapper)\r\n    };\r\n};\r\nexports.createStage = createStage;\r\nconst copyArray = (src, target, targetOffset = 0, srcOffset = 0, count = target.length) => {\r\n    for (let i = 0; i < count; i++) {\r\n        target[targetOffset + i] = src[srcOffset + i];\r\n    }\r\n};\r\nexports.copyArray = copyArray;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Vector2 = void 0;\r\nclass Vector2 {\r\n    constructor(x = 0, y = 0) {\r\n        this.x = 0;\r\n        this.y = 0;\r\n        this.x = x;\r\n        this.y = y;\r\n    }\r\n    getX() {\r\n        return this.x;\r\n    }\r\n    getY() {\r\n        return this.y;\r\n    }\r\n    set(x, y) {\r\n        this.x = x;\r\n        this.y = y;\r\n        return this;\r\n    }\r\n    setVector(v) {\r\n        return this.set(v.x, v.y);\r\n    }\r\n    add(x, y) {\r\n        this.x += x;\r\n        this.y += y;\r\n        return this;\r\n    }\r\n    addVector(v) {\r\n        return this.add(v.x, v.y);\r\n    }\r\n    sub(x, y) {\r\n        return this.add(-x, -y);\r\n    }\r\n    subVector(v) {\r\n        return this.sub(v.x, v.y);\r\n    }\r\n    scale(scalar) {\r\n        this.x *= scalar;\r\n        this.y *= scalar;\r\n        return this;\r\n    }\r\n    dot(v) {\r\n        return this.x * v.x + this.y * v.y;\r\n    }\r\n    distanceSqr(v) {\r\n        const deltaX = this.x - v.x;\r\n        const deltaY = this.y - v.y;\r\n        return deltaX * deltaX + deltaY * deltaY;\r\n    }\r\n    distance(v) {\r\n        return Math.sqrt(this.distanceSqr(v));\r\n    }\r\n    angle() {\r\n        return Math.atan2(this.y, this.x);\r\n    }\r\n    len2() {\r\n        return this.x * this.x + this.y * this.y;\r\n    }\r\n    len() {\r\n        return Math.sqrt(this.len2());\r\n    }\r\n    nor() {\r\n        const len = this.len();\r\n        if (len !== 0) {\r\n            this.x /= len;\r\n            this.y /= len;\r\n        }\r\n        return this;\r\n    }\r\n    rotateRad(rad) {\r\n        const cos = Math.cos(rad);\r\n        const sin = Math.sin(rad);\r\n        const newX = this.x * cos - this.y * sin;\r\n        const newY = this.x * sin + this.y * cos;\r\n        this.x = newX;\r\n        this.y = newY;\r\n        return this;\r\n    }\r\n    rotate(degrees) {\r\n        return this.rotateRad((degrees * Math.PI) / 180);\r\n    }\r\n    cpy() {\r\n        return new Vector2(this.x, this.y);\r\n    }\r\n}\r\nexports.Vector2 = Vector2;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Vector3 = void 0;\r\nconst Matrix4_1 = require(\"./Matrix4\");\r\nclass Vector3 {\r\n    constructor(x = 0, y = 0, z = 0) {\r\n        this.x = 0;\r\n        this.y = 0;\r\n        this.z = 0;\r\n        this.x = x;\r\n        this.y = y;\r\n        this.z = z;\r\n    }\r\n    setFrom(v) {\r\n        this.x = v.x;\r\n        this.y = v.y;\r\n        this.z = v.z;\r\n        return this;\r\n    }\r\n    set(x, y, z) {\r\n        this.x = x;\r\n        this.y = y;\r\n        this.z = z;\r\n        return this;\r\n    }\r\n    add(v) {\r\n        this.x += v.x;\r\n        this.y += v.y;\r\n        this.z += v.z;\r\n        return this;\r\n    }\r\n    sub(v) {\r\n        this.x -= v.x;\r\n        this.y -= v.y;\r\n        this.z -= v.z;\r\n        return this;\r\n    }\r\n    scale(s) {\r\n        this.x *= s;\r\n        this.y *= s;\r\n        this.z *= s;\r\n        return this;\r\n    }\r\n    normalize() {\r\n        let len = this.length();\r\n        if (len === 0)\r\n            return this;\r\n        len = 1 / len;\r\n        this.x *= len;\r\n        this.y *= len;\r\n        this.z *= len;\r\n        return this;\r\n    }\r\n    cross(v) {\r\n        return this.set(this.y * v.z - this.z * v.y, this.z * v.x - this.x * v.z, this.x * v.y - this.y * v.x);\r\n    }\r\n    multiply(matrix) {\r\n        let l_mat = matrix.values;\r\n        return this.set(this.x * l_mat[Matrix4_1.M00] + this.y * l_mat[Matrix4_1.M01] + this.z * l_mat[Matrix4_1.M02] + l_mat[Matrix4_1.M03], this.x * l_mat[Matrix4_1.M10] + this.y * l_mat[Matrix4_1.M11] + this.z * l_mat[Matrix4_1.M12] + l_mat[Matrix4_1.M13], this.x * l_mat[Matrix4_1.M20] + this.y * l_mat[Matrix4_1.M21] + this.z * l_mat[Matrix4_1.M22] + l_mat[Matrix4_1.M23]);\r\n    }\r\n    project(matrix) {\r\n        let l_mat = matrix.values;\r\n        let l_w = 1 / (this.x * l_mat[Matrix4_1.M30] + this.y * l_mat[Matrix4_1.M31] + this.z * l_mat[Matrix4_1.M32] + l_mat[Matrix4_1.M33]);\r\n        return this.set((this.x * l_mat[Matrix4_1.M00] + this.y * l_mat[Matrix4_1.M01] + this.z * l_mat[Matrix4_1.M02] + l_mat[Matrix4_1.M03]) * l_w, (this.x * l_mat[Matrix4_1.M10] + this.y * l_mat[Matrix4_1.M11] + this.z * l_mat[Matrix4_1.M12] + l_mat[Matrix4_1.M13]) * l_w, (this.x * l_mat[Matrix4_1.M20] + this.y * l_mat[Matrix4_1.M21] + this.z * l_mat[Matrix4_1.M22] + l_mat[Matrix4_1.M23]) * l_w);\r\n    }\r\n    unproject(output, invMatrix, viewX, viewY, viewWidth, viewHeight) {\r\n        let { x, y, z } = this;\r\n        x = x - viewX;\r\n        y = viewHeight - y - 1;\r\n        y = y - viewY;\r\n        output.set((2 * x) / viewWidth - 1, (2 * y) / viewHeight - 1, 2 * z - 1);\r\n        output.project(invMatrix);\r\n        return output;\r\n    }\r\n    dot(v) {\r\n        return this.x * v.x + this.y * v.y + this.z * v.z;\r\n    }\r\n    length() {\r\n        return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z);\r\n    }\r\n    distance(v) {\r\n        let a = v.x - this.x;\r\n        let b = v.y - this.y;\r\n        let c = v.z - this.z;\r\n        return Math.sqrt(a * a + b * b + c * c);\r\n    }\r\n}\r\nexports.Vector3 = Vector3;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.createViewport = void 0;\r\nconst Camera_1 = require(\"./Camera\");\r\nconst Utils_1 = require(\"./Utils\");\r\nconst createViewport = (canvas, width, height, options) => {\r\n    const defaultOptions = {\r\n        autoUpdate: true,\r\n        pixelRatio: undefined,\r\n        crop: true\r\n    };\r\n    options = Object.assign(Object.assign({}, defaultOptions), options);\r\n    let contextOption;\r\n    if (options.disablePremultipliedAlpha) {\r\n        contextOption = {\r\n            premultipliedAlpha: false\r\n        };\r\n    }\r\n    contextOption = Object.assign(Object.assign({}, contextOption), options.contextOption);\r\n    const gl = canvas.getContext('webgl2', contextOption);\r\n    const additionalCameras = [];\r\n    let { autoUpdate, pixelRatio, crop } = options;\r\n    pixelRatio = pixelRatio || window.devicePixelRatio || 1;\r\n    const viewportInfo = {\r\n        pixelRatio,\r\n        x: 0,\r\n        y: 0,\r\n        width,\r\n        height,\r\n        worldWidth: width,\r\n        worldHeight: height\r\n    };\r\n    let resizeHandler;\r\n    const [vWidth, vHeight] = (0, Utils_1.resizeCanvas)(canvas, pixelRatio);\r\n    const camera = new Camera_1.OrthoCamera(width, height, vWidth, vHeight);\r\n    if (autoUpdate) {\r\n        resizeHandler = e => {\r\n            viewportObject.update();\r\n        };\r\n        window.addEventListener('resize', resizeHandler);\r\n    }\r\n    const viewportObject = {\r\n        getViewportInfo() {\r\n            return viewportInfo;\r\n        },\r\n        getCamera() {\r\n            return camera;\r\n        },\r\n        addCamera(camera) {\r\n            additionalCameras.push(camera);\r\n        },\r\n        getContext() {\r\n            return gl;\r\n        },\r\n        getCanvas() {\r\n            return canvas;\r\n        },\r\n        update() {\r\n            let [vWidth, vHeight] = (0, Utils_1.resizeCanvas)(canvas, pixelRatio);\r\n            const ratio = width / height;\r\n            const vRatio = vWidth / vHeight;\r\n            if (crop) {\r\n                let displayWidth, displayHeight;\r\n                if (ratio < vRatio) {\r\n                    displayHeight = vHeight;\r\n                    displayWidth = vHeight * ratio;\r\n                }\r\n                else {\r\n                    displayWidth = vWidth;\r\n                    displayHeight = vWidth / ratio;\r\n                }\r\n                const displayX = (vWidth - displayWidth) / 2;\r\n                const displayY = (vHeight - displayHeight) / 2;\r\n                viewportInfo.x = displayX;\r\n                viewportInfo.y = displayY;\r\n                viewportInfo.width = displayWidth;\r\n                viewportInfo.height = displayHeight;\r\n                gl.viewport(displayX, displayY, displayWidth, displayHeight);\r\n                camera.setPosition(width / 2, height / 2);\r\n                camera.resize(width, height, displayWidth, displayHeight);\r\n                for (let camera of additionalCameras) {\r\n                    camera.setPosition(width / 2, height / 2);\r\n                    camera.resize(width, height, displayWidth, displayHeight);\r\n                }\r\n            }\r\n            else {\r\n                viewportInfo.x = 0;\r\n                viewportInfo.y = 0;\r\n                viewportInfo.width = vWidth;\r\n                viewportInfo.height = vHeight;\r\n                gl.viewport(0, 0, vWidth, vHeight);\r\n                let cameraWidth, cameraHeight, cameraX, cameraY;\r\n                if (ratio < vRatio) {\r\n                    cameraHeight = height;\r\n                    cameraWidth = cameraHeight * vRatio;\r\n                    cameraX = -(cameraWidth - width) / 2;\r\n                    cameraY = 0;\r\n                }\r\n                else {\r\n                    cameraWidth = width;\r\n                    cameraHeight = cameraWidth / vRatio;\r\n                    cameraX = 0;\r\n                    cameraY = -(cameraHeight - height) / 2;\r\n                }\r\n                camera.setPosition(cameraX + cameraWidth / 2, cameraY + cameraHeight / 2);\r\n                camera.resize(cameraWidth, cameraHeight, vWidth, vHeight);\r\n                for (let camera of additionalCameras) {\r\n                    camera.setPosition(cameraX + cameraWidth / 2, cameraY + cameraHeight / 2);\r\n                    camera.resize(cameraWidth, cameraHeight, vWidth, vHeight);\r\n                }\r\n            }\r\n        },\r\n        cleanUp() {\r\n            if (resizeHandler) {\r\n                window.removeEventListener('resize', resizeHandler);\r\n            }\r\n        }\r\n    };\r\n    autoUpdate && viewportObject.update();\r\n    return viewportObject;\r\n};\r\nexports.createViewport = createViewport;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ViewportInputHandler = void 0;\r\nconst InputHandler_1 = require(\"./InputHandler\");\r\nconst Vector2_1 = require(\"./Vector2\");\r\nconst createViewportAwareInputListener = (handler, viewport) => {\r\n    return (x, y) => {\r\n        const { x: vX, y: vY, pixelRatio } = viewport.getViewportInfo();\r\n        x = x * pixelRatio - vX;\r\n        y = y * pixelRatio - vY;\r\n        handler(x, y);\r\n    };\r\n};\r\nclass ViewportInputHandler {\r\n    constructor(viewport) {\r\n        this.screenCoord = new Vector2_1.Vector2();\r\n        this.worldCoord = new Vector2_1.Vector2();\r\n        this.viewport = viewport;\r\n        this.canvas = viewport.getCanvas();\r\n        this.inputHandler = new InputHandler_1.InputHandler(this.canvas);\r\n    }\r\n    isTouched() {\r\n        return this.inputHandler.isTouched();\r\n    }\r\n    cleanup() {\r\n        this.inputHandler.cleanup();\r\n    }\r\n    addEventListener(event, listener) {\r\n        this.inputHandler.addEventListener(event, createViewportAwareInputListener(listener, this.viewport));\r\n    }\r\n    getX() {\r\n        const { x: vX, pixelRatio } = this.viewport.getViewportInfo();\r\n        return this.inputHandler.getX() * pixelRatio - vX;\r\n    }\r\n    getY() {\r\n        const { y: vY, pixelRatio } = this.viewport.getViewportInfo();\r\n        return this.inputHandler.getY() * pixelRatio - vY;\r\n    }\r\n    getTouchedWorldCoord(camera) {\r\n        if (!camera) {\r\n            camera = this.viewport.getCamera();\r\n        }\r\n        this.screenCoord.set(this.getX(), this.getY());\r\n        camera.unprojectVector2(this.worldCoord, this.screenCoord);\r\n        return this.worldCoord;\r\n    }\r\n}\r\nexports.ViewportInputHandler = ViewportInputHandler;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n__exportStar(require(\"./Animation\"), exports);\r\n__exportStar(require(\"./AssetManager\"), exports);\r\n__exportStar(require(\"./BitmapFont\"), exports);\r\n__exportStar(require(\"./BitmapFontCache\"), exports);\r\n__exportStar(require(\"./BitmapFontData\"), exports);\r\n__exportStar(require(\"./BoundingBox\"), exports);\r\n__exportStar(require(\"./Camera\"), exports);\r\n__exportStar(require(\"./Game\"), exports);\r\n__exportStar(require(\"./Glyph\"), exports);\r\n__exportStar(require(\"./GlyphLayout\"), exports);\r\n__exportStar(require(\"./GlyphRun\"), exports);\r\n__exportStar(require(\"./InputHandler\"), exports);\r\n__exportStar(require(\"./Matrix4\"), exports);\r\n__exportStar(require(\"./Mesh\"), exports);\r\n__exportStar(require(\"./NumberUtils\"), exports);\r\n__exportStar(require(\"./PolygonBatcher\"), exports);\r\n__exportStar(require(\"./Shader\"), exports);\r\n__exportStar(require(\"./Sprite\"), exports);\r\n__exportStar(require(\"./ShapeRenderer\"), exports);\r\n__exportStar(require(\"./Texture\"), exports);\r\n__exportStar(require(\"./TextureAtlas\"), exports);\r\n__exportStar(require(\"./TextureRegion\"), exports);\r\n__exportStar(require(\"./Utils\"), exports);\r\n__exportStar(require(\"./Vector2\"), exports);\r\n__exportStar(require(\"./Vector3\"), exports);\r\n__exportStar(require(\"./Viewport\"), exports);\r\n__exportStar(require(\"./ViewportInputHandler\"), exports);\r\n","function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nmodule.exports = _arrayLikeToArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nmodule.exports = _arrayWithHoles, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var arrayLikeToArray = require(\"./arrayLikeToArray.js\");\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}\n\nmodule.exports = _arrayWithoutHoles, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nmodule.exports = _assertThisInitialized, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}\n\nmodule.exports = _createClass, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var unsupportedIterableToArray = require(\"./unsupportedIterableToArray.js\");\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) {\n  var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"];\n\n  if (!it) {\n    if (Array.isArray(o) || (it = unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n      if (it) o = it;\n      var i = 0;\n\n      var F = function F() {};\n\n      return {\n        s: F,\n        n: function n() {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function e(_e) {\n          throw _e;\n        },\n        f: F\n      };\n    }\n\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  var normalCompletion = true,\n      didErr = false,\n      err;\n  return {\n    s: function s() {\n      it = it.call(o);\n    },\n    n: function n() {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function e(_e2) {\n      didErr = true;\n      err = _e2;\n    },\n    f: function f() {\n      try {\n        if (!normalCompletion && it[\"return\"] != null) it[\"return\"]();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}\n\nmodule.exports = _createForOfIteratorHelper, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var getPrototypeOf = require(\"./getPrototypeOf.js\");\n\nvar isNativeReflectConstruct = require(\"./isNativeReflectConstruct.js\");\n\nvar possibleConstructorReturn = require(\"./possibleConstructorReturn.js\");\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = isNativeReflectConstruct();\n  return function _createSuperInternal() {\n    var Super = getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return possibleConstructorReturn(this, result);\n  };\n}\n\nmodule.exports = _createSuper, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var superPropBase = require(\"./superPropBase.js\");\n\nfunction _get() {\n  if (typeof Reflect !== \"undefined\" && Reflect.get) {\n    module.exports = _get = Reflect.get.bind(), module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n  } else {\n    module.exports = _get = function _get(target, property, receiver) {\n      var base = superPropBase(target, property);\n      if (!base) return;\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n\n      if (desc.get) {\n        return desc.get.call(arguments.length < 3 ? target : receiver);\n      }\n\n      return desc.value;\n    }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n  }\n\n  return _get.apply(this, arguments);\n}\n\nmodule.exports = _get, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _getPrototypeOf(o) {\n  module.exports = _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n  return _getPrototypeOf(o);\n}\n\nmodule.exports = _getPrototypeOf, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var setPrototypeOf = require(\"./setPrototypeOf.js\");\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  Object.defineProperty(subClass, \"prototype\", {\n    writable: false\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}\n\nmodule.exports = _inherits, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nmodule.exports = _isNativeReflectConstruct, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}\n\nmodule.exports = _iterableToArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _iterableToArrayLimit(arr, i) {\n  var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"];\n\n  if (_i == null) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n\n  var _s, _e;\n\n  try {\n    for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nmodule.exports = _iterableToArrayLimit, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nmodule.exports = _nonIterableRest, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nmodule.exports = _nonIterableSpread, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var _typeof = require(\"./typeof.js\")[\"default\"];\n\nvar assertThisInitialized = require(\"./assertThisInitialized.js\");\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  } else if (call !== void 0) {\n    throw new TypeError(\"Derived constructors may only return object or undefined\");\n  }\n\n  return assertThisInitialized(self);\n}\n\nmodule.exports = _possibleConstructorReturn, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var _typeof = require(\"./typeof.js\")[\"default\"];\n\nfunction _regeneratorRuntime() {\n  \"use strict\";\n  /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */\n\n  module.exports = _regeneratorRuntime = function _regeneratorRuntime() {\n    return exports;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n  var exports = {},\n      Op = Object.prototype,\n      hasOwn = Op.hasOwnProperty,\n      $Symbol = \"function\" == typeof Symbol ? Symbol : {},\n      iteratorSymbol = $Symbol.iterator || \"@@iterator\",\n      asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\",\n      toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function define(obj, key, value) {\n    return Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: !0,\n      configurable: !0,\n      writable: !0\n    }), obj[key];\n  }\n\n  try {\n    define({}, \"\");\n  } catch (err) {\n    define = function define(obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator,\n        generator = Object.create(protoGenerator.prototype),\n        context = new Context(tryLocsList || []);\n    return generator._invoke = function (innerFn, self, context) {\n      var state = \"suspendedStart\";\n      return function (method, arg) {\n        if (\"executing\" === state) throw new Error(\"Generator is already running\");\n\n        if (\"completed\" === state) {\n          if (\"throw\" === method) throw arg;\n          return doneResult();\n        }\n\n        for (context.method = method, context.arg = arg;;) {\n          var delegate = context.delegate;\n\n          if (delegate) {\n            var delegateResult = maybeInvokeDelegate(delegate, context);\n\n            if (delegateResult) {\n              if (delegateResult === ContinueSentinel) continue;\n              return delegateResult;\n            }\n          }\n\n          if (\"next\" === context.method) context.sent = context._sent = context.arg;else if (\"throw\" === context.method) {\n            if (\"suspendedStart\" === state) throw state = \"completed\", context.arg;\n            context.dispatchException(context.arg);\n          } else \"return\" === context.method && context.abrupt(\"return\", context.arg);\n          state = \"executing\";\n          var record = tryCatch(innerFn, self, context);\n\n          if (\"normal\" === record.type) {\n            if (state = context.done ? \"completed\" : \"suspendedYield\", record.arg === ContinueSentinel) continue;\n            return {\n              value: record.arg,\n              done: context.done\n            };\n          }\n\n          \"throw\" === record.type && (state = \"completed\", context.method = \"throw\", context.arg = record.arg);\n        }\n      };\n    }(innerFn, self, context), generator;\n  }\n\n  function tryCatch(fn, obj, arg) {\n    try {\n      return {\n        type: \"normal\",\n        arg: fn.call(obj, arg)\n      };\n    } catch (err) {\n      return {\n        type: \"throw\",\n        arg: err\n      };\n    }\n  }\n\n  exports.wrap = wrap;\n  var ContinueSentinel = {};\n\n  function Generator() {}\n\n  function GeneratorFunction() {}\n\n  function GeneratorFunctionPrototype() {}\n\n  var IteratorPrototype = {};\n  define(IteratorPrototype, iteratorSymbol, function () {\n    return this;\n  });\n  var getProto = Object.getPrototypeOf,\n      NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  NativeIteratorPrototype && NativeIteratorPrototype !== Op && hasOwn.call(NativeIteratorPrototype, iteratorSymbol) && (IteratorPrototype = NativeIteratorPrototype);\n  var Gp = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(IteratorPrototype);\n\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function (method) {\n      define(prototype, method, function (arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n\n      if (\"throw\" !== record.type) {\n        var result = record.arg,\n            value = result.value;\n        return value && \"object\" == _typeof(value) && hasOwn.call(value, \"__await\") ? PromiseImpl.resolve(value.__await).then(function (value) {\n          invoke(\"next\", value, resolve, reject);\n        }, function (err) {\n          invoke(\"throw\", err, resolve, reject);\n        }) : PromiseImpl.resolve(value).then(function (unwrapped) {\n          result.value = unwrapped, resolve(result);\n        }, function (error) {\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n\n      reject(record.arg);\n    }\n\n    var previousPromise;\n\n    this._invoke = function (method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function (resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise = previousPromise ? previousPromise.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg();\n    };\n  }\n\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n\n    if (undefined === method) {\n      if (context.delegate = null, \"throw\" === context.method) {\n        if (delegate.iterator[\"return\"] && (context.method = \"return\", context.arg = undefined, maybeInvokeDelegate(delegate, context), \"throw\" === context.method)) return ContinueSentinel;\n        context.method = \"throw\", context.arg = new TypeError(\"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n    if (\"throw\" === record.type) return context.method = \"throw\", context.arg = record.arg, context.delegate = null, ContinueSentinel;\n    var info = record.arg;\n    return info ? info.done ? (context[delegate.resultName] = info.value, context.next = delegate.nextLoc, \"return\" !== context.method && (context.method = \"next\", context.arg = undefined), context.delegate = null, ContinueSentinel) : info : (context.method = \"throw\", context.arg = new TypeError(\"iterator result is not an object\"), context.delegate = null, ContinueSentinel);\n  }\n\n  function pushTryEntry(locs) {\n    var entry = {\n      tryLoc: locs[0]\n    };\n    1 in locs && (entry.catchLoc = locs[1]), 2 in locs && (entry.finallyLoc = locs[2], entry.afterLoc = locs[3]), this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\", delete record.arg, entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    this.tryEntries = [{\n      tryLoc: \"root\"\n    }], tryLocsList.forEach(pushTryEntry, this), this.reset(!0);\n  }\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) return iteratorMethod.call(iterable);\n      if (\"function\" == typeof iterable.next) return iterable;\n\n      if (!isNaN(iterable.length)) {\n        var i = -1,\n            next = function next() {\n          for (; ++i < iterable.length;) {\n            if (hasOwn.call(iterable, i)) return next.value = iterable[i], next.done = !1, next;\n          }\n\n          return next.value = undefined, next.done = !0, next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    return {\n      next: doneResult\n    };\n  }\n\n  function doneResult() {\n    return {\n      value: undefined,\n      done: !0\n    };\n  }\n\n  return GeneratorFunction.prototype = GeneratorFunctionPrototype, define(Gp, \"constructor\", GeneratorFunctionPrototype), define(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, toStringTagSymbol, \"GeneratorFunction\"), exports.isGeneratorFunction = function (genFun) {\n    var ctor = \"function\" == typeof genFun && genFun.constructor;\n    return !!ctor && (ctor === GeneratorFunction || \"GeneratorFunction\" === (ctor.displayName || ctor.name));\n  }, exports.mark = function (genFun) {\n    return Object.setPrototypeOf ? Object.setPrototypeOf(genFun, GeneratorFunctionPrototype) : (genFun.__proto__ = GeneratorFunctionPrototype, define(genFun, toStringTagSymbol, \"GeneratorFunction\")), genFun.prototype = Object.create(Gp), genFun;\n  }, exports.awrap = function (arg) {\n    return {\n      __await: arg\n    };\n  }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, asyncIteratorSymbol, function () {\n    return this;\n  }), exports.AsyncIterator = AsyncIterator, exports.async = function (innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    void 0 === PromiseImpl && (PromiseImpl = Promise);\n    var iter = new AsyncIterator(wrap(innerFn, outerFn, self, tryLocsList), PromiseImpl);\n    return exports.isGeneratorFunction(outerFn) ? iter : iter.next().then(function (result) {\n      return result.done ? result.value : iter.next();\n    });\n  }, defineIteratorMethods(Gp), define(Gp, toStringTagSymbol, \"Generator\"), define(Gp, iteratorSymbol, function () {\n    return this;\n  }), define(Gp, \"toString\", function () {\n    return \"[object Generator]\";\n  }), exports.keys = function (object) {\n    var keys = [];\n\n    for (var key in object) {\n      keys.push(key);\n    }\n\n    return keys.reverse(), function next() {\n      for (; keys.length;) {\n        var key = keys.pop();\n        if (key in object) return next.value = key, next.done = !1, next;\n      }\n\n      return next.done = !0, next;\n    };\n  }, exports.values = values, Context.prototype = {\n    constructor: Context,\n    reset: function reset(skipTempReset) {\n      if (this.prev = 0, this.next = 0, this.sent = this._sent = undefined, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = undefined, this.tryEntries.forEach(resetTryEntry), !skipTempReset) for (var name in this) {\n        \"t\" === name.charAt(0) && hasOwn.call(this, name) && !isNaN(+name.slice(1)) && (this[name] = undefined);\n      }\n    },\n    stop: function stop() {\n      this.done = !0;\n      var rootRecord = this.tryEntries[0].completion;\n      if (\"throw\" === rootRecord.type) throw rootRecord.arg;\n      return this.rval;\n    },\n    dispatchException: function dispatchException(exception) {\n      if (this.done) throw exception;\n      var context = this;\n\n      function handle(loc, caught) {\n        return record.type = \"throw\", record.arg = exception, context.next = loc, caught && (context.method = \"next\", context.arg = undefined), !!caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i],\n            record = entry.completion;\n        if (\"root\" === entry.tryLoc) return handle(\"end\");\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\"),\n              hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0);\n            if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc);\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0);\n          } else {\n            if (!hasFinally) throw new Error(\"try statement without catch or finally\");\n            if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc);\n          }\n        }\n      }\n    },\n    abrupt: function abrupt(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n\n        if (entry.tryLoc <= this.prev && hasOwn.call(entry, \"finallyLoc\") && this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      finallyEntry && (\"break\" === type || \"continue\" === type) && finallyEntry.tryLoc <= arg && arg <= finallyEntry.finallyLoc && (finallyEntry = null);\n      var record = finallyEntry ? finallyEntry.completion : {};\n      return record.type = type, record.arg = arg, finallyEntry ? (this.method = \"next\", this.next = finallyEntry.finallyLoc, ContinueSentinel) : this.complete(record);\n    },\n    complete: function complete(record, afterLoc) {\n      if (\"throw\" === record.type) throw record.arg;\n      return \"break\" === record.type || \"continue\" === record.type ? this.next = record.arg : \"return\" === record.type ? (this.rval = this.arg = record.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === record.type && afterLoc && (this.next = afterLoc), ContinueSentinel;\n    },\n    finish: function finish(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) return this.complete(entry.completion, entry.afterLoc), resetTryEntry(entry), ContinueSentinel;\n      }\n    },\n    \"catch\": function _catch(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n\n          if (\"throw\" === record.type) {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n\n          return thrown;\n        }\n      }\n\n      throw new Error(\"illegal catch attempt\");\n    },\n    delegateYield: function delegateYield(iterable, resultName, nextLoc) {\n      return this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      }, \"next\" === this.method && (this.arg = undefined), ContinueSentinel;\n    }\n  }, exports;\n}\n\nmodule.exports = _regeneratorRuntime, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _setPrototypeOf(o, p) {\n  module.exports = _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n  return _setPrototypeOf(o, p);\n}\n\nmodule.exports = _setPrototypeOf, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var arrayWithHoles = require(\"./arrayWithHoles.js\");\n\nvar iterableToArrayLimit = require(\"./iterableToArrayLimit.js\");\n\nvar unsupportedIterableToArray = require(\"./unsupportedIterableToArray.js\");\n\nvar nonIterableRest = require(\"./nonIterableRest.js\");\n\nfunction _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}\n\nmodule.exports = _slicedToArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var getPrototypeOf = require(\"./getPrototypeOf.js\");\n\nfunction _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = getPrototypeOf(object);\n    if (object === null) break;\n  }\n\n  return object;\n}\n\nmodule.exports = _superPropBase, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var arrayWithoutHoles = require(\"./arrayWithoutHoles.js\");\n\nvar iterableToArray = require(\"./iterableToArray.js\");\n\nvar unsupportedIterableToArray = require(\"./unsupportedIterableToArray.js\");\n\nvar nonIterableSpread = require(\"./nonIterableSpread.js\");\n\nfunction _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}\n\nmodule.exports = _toConsumableArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return (module.exports = _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports), _typeof(obj);\n}\n\nmodule.exports = _typeof, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var arrayLikeToArray = require(\"./arrayLikeToArray.js\");\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}\n\nmodule.exports = _unsupportedIterableToArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","export default function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, _typeof(obj);\n}","import _typeof from \"./typeof.js\";\nexport default function _regeneratorRuntime() {\n  \"use strict\";\n  /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */\n\n  _regeneratorRuntime = function _regeneratorRuntime() {\n    return exports;\n  };\n\n  var exports = {},\n      Op = Object.prototype,\n      hasOwn = Op.hasOwnProperty,\n      $Symbol = \"function\" == typeof Symbol ? Symbol : {},\n      iteratorSymbol = $Symbol.iterator || \"@@iterator\",\n      asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\",\n      toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function define(obj, key, value) {\n    return Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: !0,\n      configurable: !0,\n      writable: !0\n    }), obj[key];\n  }\n\n  try {\n    define({}, \"\");\n  } catch (err) {\n    define = function define(obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator,\n        generator = Object.create(protoGenerator.prototype),\n        context = new Context(tryLocsList || []);\n    return generator._invoke = function (innerFn, self, context) {\n      var state = \"suspendedStart\";\n      return function (method, arg) {\n        if (\"executing\" === state) throw new Error(\"Generator is already running\");\n\n        if (\"completed\" === state) {\n          if (\"throw\" === method) throw arg;\n          return doneResult();\n        }\n\n        for (context.method = method, context.arg = arg;;) {\n          var delegate = context.delegate;\n\n          if (delegate) {\n            var delegateResult = maybeInvokeDelegate(delegate, context);\n\n            if (delegateResult) {\n              if (delegateResult === ContinueSentinel) continue;\n              return delegateResult;\n            }\n          }\n\n          if (\"next\" === context.method) context.sent = context._sent = context.arg;else if (\"throw\" === context.method) {\n            if (\"suspendedStart\" === state) throw state = \"completed\", context.arg;\n            context.dispatchException(context.arg);\n          } else \"return\" === context.method && context.abrupt(\"return\", context.arg);\n          state = \"executing\";\n          var record = tryCatch(innerFn, self, context);\n\n          if (\"normal\" === record.type) {\n            if (state = context.done ? \"completed\" : \"suspendedYield\", record.arg === ContinueSentinel) continue;\n            return {\n              value: record.arg,\n              done: context.done\n            };\n          }\n\n          \"throw\" === record.type && (state = \"completed\", context.method = \"throw\", context.arg = record.arg);\n        }\n      };\n    }(innerFn, self, context), generator;\n  }\n\n  function tryCatch(fn, obj, arg) {\n    try {\n      return {\n        type: \"normal\",\n        arg: fn.call(obj, arg)\n      };\n    } catch (err) {\n      return {\n        type: \"throw\",\n        arg: err\n      };\n    }\n  }\n\n  exports.wrap = wrap;\n  var ContinueSentinel = {};\n\n  function Generator() {}\n\n  function GeneratorFunction() {}\n\n  function GeneratorFunctionPrototype() {}\n\n  var IteratorPrototype = {};\n  define(IteratorPrototype, iteratorSymbol, function () {\n    return this;\n  });\n  var getProto = Object.getPrototypeOf,\n      NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  NativeIteratorPrototype && NativeIteratorPrototype !== Op && hasOwn.call(NativeIteratorPrototype, iteratorSymbol) && (IteratorPrototype = NativeIteratorPrototype);\n  var Gp = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(IteratorPrototype);\n\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function (method) {\n      define(prototype, method, function (arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n\n      if (\"throw\" !== record.type) {\n        var result = record.arg,\n            value = result.value;\n        return value && \"object\" == _typeof(value) && hasOwn.call(value, \"__await\") ? PromiseImpl.resolve(value.__await).then(function (value) {\n          invoke(\"next\", value, resolve, reject);\n        }, function (err) {\n          invoke(\"throw\", err, resolve, reject);\n        }) : PromiseImpl.resolve(value).then(function (unwrapped) {\n          result.value = unwrapped, resolve(result);\n        }, function (error) {\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n\n      reject(record.arg);\n    }\n\n    var previousPromise;\n\n    this._invoke = function (method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function (resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise = previousPromise ? previousPromise.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg();\n    };\n  }\n\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n\n    if (undefined === method) {\n      if (context.delegate = null, \"throw\" === context.method) {\n        if (delegate.iterator[\"return\"] && (context.method = \"return\", context.arg = undefined, maybeInvokeDelegate(delegate, context), \"throw\" === context.method)) return ContinueSentinel;\n        context.method = \"throw\", context.arg = new TypeError(\"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n    if (\"throw\" === record.type) return context.method = \"throw\", context.arg = record.arg, context.delegate = null, ContinueSentinel;\n    var info = record.arg;\n    return info ? info.done ? (context[delegate.resultName] = info.value, context.next = delegate.nextLoc, \"return\" !== context.method && (context.method = \"next\", context.arg = undefined), context.delegate = null, ContinueSentinel) : info : (context.method = \"throw\", context.arg = new TypeError(\"iterator result is not an object\"), context.delegate = null, ContinueSentinel);\n  }\n\n  function pushTryEntry(locs) {\n    var entry = {\n      tryLoc: locs[0]\n    };\n    1 in locs && (entry.catchLoc = locs[1]), 2 in locs && (entry.finallyLoc = locs[2], entry.afterLoc = locs[3]), this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\", delete record.arg, entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    this.tryEntries = [{\n      tryLoc: \"root\"\n    }], tryLocsList.forEach(pushTryEntry, this), this.reset(!0);\n  }\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) return iteratorMethod.call(iterable);\n      if (\"function\" == typeof iterable.next) return iterable;\n\n      if (!isNaN(iterable.length)) {\n        var i = -1,\n            next = function next() {\n          for (; ++i < iterable.length;) {\n            if (hasOwn.call(iterable, i)) return next.value = iterable[i], next.done = !1, next;\n          }\n\n          return next.value = undefined, next.done = !0, next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    return {\n      next: doneResult\n    };\n  }\n\n  function doneResult() {\n    return {\n      value: undefined,\n      done: !0\n    };\n  }\n\n  return GeneratorFunction.prototype = GeneratorFunctionPrototype, define(Gp, \"constructor\", GeneratorFunctionPrototype), define(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, toStringTagSymbol, \"GeneratorFunction\"), exports.isGeneratorFunction = function (genFun) {\n    var ctor = \"function\" == typeof genFun && genFun.constructor;\n    return !!ctor && (ctor === GeneratorFunction || \"GeneratorFunction\" === (ctor.displayName || ctor.name));\n  }, exports.mark = function (genFun) {\n    return Object.setPrototypeOf ? Object.setPrototypeOf(genFun, GeneratorFunctionPrototype) : (genFun.__proto__ = GeneratorFunctionPrototype, define(genFun, toStringTagSymbol, \"GeneratorFunction\")), genFun.prototype = Object.create(Gp), genFun;\n  }, exports.awrap = function (arg) {\n    return {\n      __await: arg\n    };\n  }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, asyncIteratorSymbol, function () {\n    return this;\n  }), exports.AsyncIterator = AsyncIterator, exports.async = function (innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    void 0 === PromiseImpl && (PromiseImpl = Promise);\n    var iter = new AsyncIterator(wrap(innerFn, outerFn, self, tryLocsList), PromiseImpl);\n    return exports.isGeneratorFunction(outerFn) ? iter : iter.next().then(function (result) {\n      return result.done ? result.value : iter.next();\n    });\n  }, defineIteratorMethods(Gp), define(Gp, toStringTagSymbol, \"Generator\"), define(Gp, iteratorSymbol, function () {\n    return this;\n  }), define(Gp, \"toString\", function () {\n    return \"[object Generator]\";\n  }), exports.keys = function (object) {\n    var keys = [];\n\n    for (var key in object) {\n      keys.push(key);\n    }\n\n    return keys.reverse(), function next() {\n      for (; keys.length;) {\n        var key = keys.pop();\n        if (key in object) return next.value = key, next.done = !1, next;\n      }\n\n      return next.done = !0, next;\n    };\n  }, exports.values = values, Context.prototype = {\n    constructor: Context,\n    reset: function reset(skipTempReset) {\n      if (this.prev = 0, this.next = 0, this.sent = this._sent = undefined, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = undefined, this.tryEntries.forEach(resetTryEntry), !skipTempReset) for (var name in this) {\n        \"t\" === name.charAt(0) && hasOwn.call(this, name) && !isNaN(+name.slice(1)) && (this[name] = undefined);\n      }\n    },\n    stop: function stop() {\n      this.done = !0;\n      var rootRecord = this.tryEntries[0].completion;\n      if (\"throw\" === rootRecord.type) throw rootRecord.arg;\n      return this.rval;\n    },\n    dispatchException: function dispatchException(exception) {\n      if (this.done) throw exception;\n      var context = this;\n\n      function handle(loc, caught) {\n        return record.type = \"throw\", record.arg = exception, context.next = loc, caught && (context.method = \"next\", context.arg = undefined), !!caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i],\n            record = entry.completion;\n        if (\"root\" === entry.tryLoc) return handle(\"end\");\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\"),\n              hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0);\n            if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc);\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0);\n          } else {\n            if (!hasFinally) throw new Error(\"try statement without catch or finally\");\n            if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc);\n          }\n        }\n      }\n    },\n    abrupt: function abrupt(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n\n        if (entry.tryLoc <= this.prev && hasOwn.call(entry, \"finallyLoc\") && this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      finallyEntry && (\"break\" === type || \"continue\" === type) && finallyEntry.tryLoc <= arg && arg <= finallyEntry.finallyLoc && (finallyEntry = null);\n      var record = finallyEntry ? finallyEntry.completion : {};\n      return record.type = type, record.arg = arg, finallyEntry ? (this.method = \"next\", this.next = finallyEntry.finallyLoc, ContinueSentinel) : this.complete(record);\n    },\n    complete: function complete(record, afterLoc) {\n      if (\"throw\" === record.type) throw record.arg;\n      return \"break\" === record.type || \"continue\" === record.type ? this.next = record.arg : \"return\" === record.type ? (this.rval = this.arg = record.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === record.type && afterLoc && (this.next = afterLoc), ContinueSentinel;\n    },\n    finish: function finish(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) return this.complete(entry.completion, entry.afterLoc), resetTryEntry(entry), ContinueSentinel;\n      }\n    },\n    \"catch\": function _catch(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n\n          if (\"throw\" === record.type) {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n\n          return thrown;\n        }\n      }\n\n      throw new Error(\"illegal catch attempt\");\n    },\n    delegateYield: function delegateYield(iterable, resultName, nextLoc) {\n      return this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      }, \"next\" === this.method && (this.arg = undefined), ContinueSentinel;\n    }\n  }, exports;\n}","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}","export default function assertIsPositiveNumber(\n  value: number,\n  name: string\n): void {\n  if (isNaN(value) || value <= 0)\n    throw new Error(\n      `\"${name}\" must be a positive integer, but was ${value} (${typeof value})`\n    );\n}\n","export const DELTA = 1e-10; // floating-point margin of error\n","export default function nearest(x: number, a: number, b: number): number {\n  return Math.abs(a - x) < Math.abs(b - x) ? a : b;\n}\n","import { Collision, ICoords, IRect } from '.';\nimport { DELTA } from './constants';\nimport nearest from './helpers/generic/nearest';\n\nexport function rect_getNearestCorner(\n  x: number,\n  y: number,\n  w: number,\n  h: number,\n  px: number,\n  py: number\n): ICoords {\n  return { x: nearest(px, x, x + w), y: nearest(py, y, y + h) };\n}\n\n// This is a generalized implementation of the liang-barsky algorithm, which also returns\n// the normals of the sides where the segment intersects.\n// Returns null if the segment never touches the rect\n// Notice that normals are only guaranteed to be accurate when initially ti1, ti2 == -math.huge, math.huge\nexport function rect_getSegmentIntersectionIndices(\n  x: number,\n  y: number,\n  w: number,\n  h: number,\n  x1: number,\n  y1: number,\n  x2: number,\n  y2: number,\n  ti1: number,\n  ti2: number\n): [number?, number?, number?, number?, number?, number?] {\n  let _ti1 = isNaN(ti1) ? 0 : ti1;\n  let _ti2 = isNaN(ti2) ? 1 : ti2;\n\n  let dx: number = x2 - x1;\n  let dy: number = y2 - y1;\n  let nx: number;\n  let ny: number;\n  let nx1: number = 0;\n  let ny1: number = 0;\n  let nx2: number = 0;\n  let ny2: number = 0;\n  let p, q, r;\n\n  for (const side of [1, 2, 3, 4]) {\n    // left\n    if (side === 1) {\n      nx = -1;\n      ny = 0;\n      p = -dx;\n      q = x1 - x;\n    }\n    // right\n    else if (side === 2) {\n      nx = 1;\n      ny = 0;\n      p = dx;\n      q = x + w - x1;\n    }\n    // top\n    else if (side === 3) {\n      nx = 0;\n      ny = -1;\n      p = -dy;\n      q = y1 - y;\n    }\n    // bottom\n    else {\n      nx = 0;\n      ny = 1;\n      p = dy;\n      q = y + h - y1;\n    }\n\n    if (p === 0) {\n      if (q <= 0)\n        return [\n          undefined,\n          undefined,\n          undefined,\n          undefined,\n          undefined,\n          undefined,\n        ];\n    } else {\n      r = q / p;\n\n      if (p < 0) {\n        if (r > _ti2)\n          return [\n            undefined,\n            undefined,\n            undefined,\n            undefined,\n            undefined,\n            undefined,\n          ];\n        else if (r > _ti1) {\n          _ti1 = r;\n          nx1 = nx;\n          ny1 = ny;\n        }\n      } // p > 0\n      else {\n        if (r < _ti1)\n          return [\n            undefined,\n            undefined,\n            undefined,\n            undefined,\n            undefined,\n            undefined,\n          ];\n        else if (r < _ti2) {\n          _ti2 = r;\n          nx2 = nx;\n          ny2 = ny;\n        }\n      }\n    }\n  }\n\n  return [_ti1, _ti2, nx1, ny1, nx2, ny2];\n}\n\n// //Calculates the Minkowsky difference between 2 rects, which is another rect\nexport function rect_getDiff(\n  x1: number,\n  y1: number,\n  w1: number,\n  h1: number,\n  x2: number,\n  y2: number,\n  w2: number,\n  h2: number\n): IRect {\n  return {\n    x: x2 - x1 - w1,\n    y: y2 - y1 - h1,\n    w: w1 + w2,\n    h: h1 + h2,\n  };\n}\n\nexport function rect_containsPoint(\n  x: number,\n  y: number,\n  w: number,\n  h: number,\n  px: number,\n  py: number\n): boolean {\n  return (\n    px - x > DELTA && py - y > DELTA && x + w - px > DELTA && y + h - py > DELTA\n  );\n}\n\nexport function rect_isIntersecting(\n  x1: number,\n  y1: number,\n  w1: number,\n  h1: number,\n  x2: number,\n  y2: number,\n  w2: number,\n  h2: number\n): boolean {\n  return x1 < x2 + w2 && x2 < x1 + w1 && y1 < y2 + h2 && y2 < y1 + h1;\n}\n\nexport function rect_getSquareDistance(\n  x1: number,\n  y1: number,\n  w1: number,\n  h1: number,\n  x2: number,\n  y2: number,\n  w2: number,\n  h2: number\n): number {\n  const dx = x1 - x2 + (w1 - w2) / 2;\n  const dy = y1 - y2 + (h1 - h2) / 2;\n  return dx * dx + dy * dy;\n}\n\nexport function rect_detectCollision(\n  x1: number,\n  y1: number,\n  w1: number,\n  h1: number,\n  x2: number,\n  y2: number,\n  w2: number,\n  h2: number,\n  goalX?: number,\n  goalY?: number\n): undefined | Partial<Collision> {\n  const _goalX: number = isNaN(goalX!) ? x1 : goalX!;\n  const _goalY: number = isNaN(goalY!) ? y1 : goalY!;\n\n  let dx: number = _goalX - x1;\n  let dy: number = _goalY - y1;\n\n  const { x, y, w, h } = rect_getDiff(x1, y1, w1, h1, x2, y2, w2, h2);\n\n  let overlaps: boolean;\n\n  let nx, ny;\n  let ti: number;\n\n  // If the item was intersecting other\n  if (rect_containsPoint(x, y, w, h, 0, 0)) {\n    let { x: px, y: py } = rect_getNearestCorner(x, y, w, h, 0, 0);\n\n    let wi: number = Math.min(w1, Math.abs(px)); // area of intersection\n    let hi: number = Math.min(h1, Math.abs(py)); // area of intersection\n\n    ti = -wi * hi; // `ti` is the negative area of intersection\n\n    overlaps = true;\n  } else {\n    let [ti1, ti2, nx1, ny1] = rect_getSegmentIntersectionIndices(\n      x,\n      y,\n      w,\n      h,\n      0,\n      0,\n      dx,\n      dy,\n      -Number.MAX_SAFE_INTEGER,\n      Number.MAX_SAFE_INTEGER\n    );\n\n    // To make the compiler stop complaining\n    ti1 = ti1!;\n\n    // item tunnels into other\n    if (\n      !isNaN(ti1) &&\n      ti1 < 1 &&\n      Math.abs(ti1 - (ti2 || 0)) >= DELTA && // special case for rect going through another rect's corner\n      (0 < ti1 + DELTA || (0 === ti1 && (ti2 || 0) > 0))\n    ) {\n      ti = ti1;\n      nx = nx1;\n      ny = ny1;\n\n      overlaps = false;\n    }\n  }\n\n  if (isNaN(ti!)) return;\n\n  let tx, ty;\n\n  if (overlaps!)\n    if (dx === 0 && dy === 0) {\n      //intersecting and not moving - use minimum displacement vector\n      let { x: px, y: py } = rect_getNearestCorner(x, y, w, h, 0, 0);\n\n      if (Math.abs(px) < Math.abs(py)) py = 0;\n      else px = 0;\n\n      nx = Math.sign(px);\n      ny = Math.sign(py);\n\n      tx = x1 + px;\n      ty = y1 + py;\n    } else {\n      //intersecting and moving - move in the opposite direction\n      // @ts-ignore\n      let [ti1, _, _nx, _ny] = rect_getSegmentIntersectionIndices(\n        x,\n        y,\n        w,\n        h,\n        0,\n        0,\n        dx,\n        dy,\n        -Number.MAX_SAFE_INTEGER,\n        1\n      );\n      nx = _nx;\n      ny = _ny;\n\n      if (!ti1) return;\n\n      tx = x1 + dx * ti1;\n      ty = y1 + dy * ti1;\n    }\n  //tunnel\n  else {\n    // @ts-ignore\n    tx = x1 + dx * ti;\n    // @ts-ignore\n    ty = y1 + dy * ti;\n  }\n\n  return {\n    overlaps: overlaps!,\n    // @ts-ignore\n    ti,\n    move: { x: dx, y: dy },\n    normal: { x: nx as number, y: ny as number },\n    touch: { x: tx, y: ty },\n    itemRect: { x: x1, y: y1, w: w1, h: h1 },\n    otherRect: { x: x2, y: y2, w: w2, h: h2 },\n  };\n}\n","export function grid_toWorld(\n  cellSize: number,\n  cx: number,\n  cy: number\n): [number, number] {\n  return [(cx - 1) * cellSize, (cy - 1) * cellSize];\n}\n\nexport function grid_toCell(\n  cellSize: number,\n  x: number,\n  y: number\n): [number, number] {\n  return [Math.floor(x / cellSize) + 1, Math.floor(y / cellSize) + 1];\n}\n\n//grid_traverse * functions are based on \"A Fast Voxel Traversal Algorithm for Ray Tracing\",\n//by John Amanides and Andrew Woo - http://www.cse.yorku.ca/~amana/research/grid.pdf\n//It has been modified to include both cells when the ray \"touches a grid corner\",\n//and with a different exit condition\n\nexport function grid_traverse_initStep(\n  cellSize: number,\n  ct: number,\n  t1: number,\n  t2: number\n): [number, number, number] {\n  const v: number = t2 - t1;\n\n  if (v > 0) return [1, cellSize / v, ((ct + v) * cellSize - t1) / v];\n  else if (v < 0)\n    return [-1, -cellSize / v, ((ct + v - 1) * cellSize - t1) / v];\n  else return [0, Number.MAX_SAFE_INTEGER, Number.MAX_SAFE_INTEGER];\n}\n\nexport function grid_traverse(\n  cellSize: number,\n  x1: number,\n  y1: number,\n  x2: number,\n  y2: number,\n  traverseFunction: (cx: number, cy: number) => void\n): void {\n  const [cx1, cy1] = grid_toCell(cellSize, x1, y1);\n  const [cx2, cy2] = grid_toCell(cellSize, x2, y2);\n  let [stepX, dx, tx] = grid_traverse_initStep(cellSize, cx1, x1, x2);\n  let [stepY, dy, ty] = grid_traverse_initStep(cellSize, cy1, y1, y2);\n  let [cx, cy] = [cx1, cy1];\n\n  traverseFunction(cx, cy);\n\n  // The default implementation had an infinite loop problem when\n  // approaching the last cell in some occassions. We finish iterating\n  // when we are *next* to the last cell.\n  do {\n    if (tx < ty) {\n      [tx, cx] = [tx + dx, cx + stepX];\n\n      traverseFunction(cx, cy);\n    } else {\n      // Addition: include both cells when going through corners\n      if (tx == ty) traverseFunction(cx + stepX, cy);\n\n      ty = ty + dy;\n      cy = cy + stepY;\n\n      traverseFunction(cx, cy);\n    }\n  } while (Math.abs(cx - cx2) + Math.abs(cy - cy2) > 1);\n\n  //If we have not arrived to the last cell, use it\n  if (cx != cx2 || cy != cy2) traverseFunction(cx2, cy2);\n}\n\nexport function grid_toCellRect(\n  cellSize: number,\n  x: number,\n  y: number,\n  w: number,\n  h: number\n): [number, number, number, number] {\n  let [cx, cy] = grid_toCell(cellSize, x, y);\n\n  const cr: number = Math.ceil((x + w) / cellSize);\n  const cb: number = Math.ceil((y + h) / cellSize);\n\n  return [cx, cy, cr - cx + 1, cb - cy + 1];\n}\n","export default function assertType(desiredType: string, value: any, name: string): void {\n  if (typeof value !== desiredType)\n    throw new Error(\n      `\"${name}\" must be a ${desiredType}, but was a ${value} (${typeof value})`\n    );\n}\n","import assertIsPositiveNumber from './assertIsPositiveNumber';\nimport assertType from './assertType';\n\nexport default function assertIsRect(\n  x: number,\n  y: number,\n  w: number,\n  h: number\n): void {\n  assertType('number', x, 'x');\n  assertType('number', y, 'y');\n  assertIsPositiveNumber(w, 'w');\n  assertIsPositiveNumber(h, 'h');\n}\n","import { Collision, ICoords, World } from '../../index';\n\nexport type Response = (\n  world: World,\n  col: any,\n  x: number,\n  y: number,\n  w: number,\n  h: number,\n  goalX: number,\n  goalY: number,\n  filter: any\n) => { x: number; y: number; collisions: Collision[] };\n\nexport function touch(\n  _world: World,\n  column: {\n    touch: ICoords;\n    move: ICoords;\n    normal: ICoords;\n    slide: ICoords;\n    item: any;\n  },\n  _x: number,\n  _y: number,\n  _w: number,\n  _h: number,\n  _goalX: number,\n  _goalY: number,\n  _filter: any\n): { x: number; y: number; collisions: Collision[] } {\n  return { x: column.touch.x, y: column.touch.y, collisions: [] };\n}\n\nexport function cross(\n  world: any,\n  column: {\n    touch: ICoords;\n    move: ICoords;\n    normal: ICoords;\n    slide: ICoords;\n    item: any;\n  },\n  x: number,\n  y: number,\n  w: number,\n  h: number,\n  goalX: number,\n  goalY: number,\n  filter: any\n): { x: number; y: number; collisions: Collision[] } {\n  const collisions = world.project(\n    column.item,\n    x,\n    y,\n    w,\n    h,\n    goalX,\n    goalY,\n    filter\n  );\n\n  return { x: goalX, y: goalY, collisions };\n}\n\nexport function slide(\n  world: World,\n  column: {\n    touch: ICoords;\n    move: ICoords;\n    normal: ICoords;\n    slide: ICoords;\n    item: any;\n  },\n  x: number,\n  y: number,\n  w: number,\n  h: number,\n  goalX: number,\n  goalY: number,\n  filter?: any\n): { x: number; y: number; collisions: Collision[] } {\n  let _goalX: number = isNaN(goalX) ? x : goalX;\n  let _goalY: number = isNaN(goalY) ? y : goalY;\n\n  const tch: ICoords = column.touch;\n  const move: ICoords = column.move;\n\n  if (move.x !== 0 || move.y !== 0)\n    if (column.normal.x !== 0) _goalX = tch.x;\n    else _goalY = tch.y;\n\n  column.slide = { x: _goalX, y: _goalY };\n\n  const _x: number = tch.x;\n  const _y: number = tch.y;\n\n  const collisions = world.project(\n    column.item,\n    _x,\n    _y,\n    w,\n    h,\n    _goalX,\n    _goalY,\n    filter\n  );\n\n  return { x: _goalX, y: _goalY, collisions };\n}\n\nexport function bounce(\n  world: World,\n  collision: any,\n  x: number,\n  y: number,\n  w: number,\n  h: number,\n  goalX?: number,\n  goalY?: number,\n  filter?: any\n): { x: number; y: number; collisions: Collision[] } {\n  const _goalX: number = isNaN(goalX as number) ? x : goalX!;\n  const _goalY: number = isNaN(goalY as number) ? y : goalY!;\n\n  const { touch, move } = collision;\n\n  let bx = touch.x;\n  let by = touch.y;\n\n  if (move.x !== 0 || move.y !== 0) {\n    let bnx = _goalX - touch.x;\n    let bny = _goalY - touch.y;\n\n    if (collision.normal.x === 0) bny = -bny;\n    else bnx = -bnx;\n\n    bx = touch.x + bnx;\n    by = touch.y + bny;\n  }\n\n  collision.bounce = { x: bx, y: by };\n\n  const collisions = world.project(\n    collision.item,\n    touch.x,\n    touch.y,\n    w,\n    h,\n    bx,\n    by,\n    filter\n  );\n\n  return { x: bx, y: by, collisions };\n}\n","import { IRect } from '../..';\nimport { rect_getSquareDistance } from '../../rect';\n\ninterface Item {\n  // x: number;\n  // y: number;\n  // w: number;\n  // h: number;\n  ti: number;\n  itemRect: IRect;\n  otherRect: IRect;\n}\n\nexport default function sortByTiAndDistance(a: Item, b: Item): number {\n  if (a.ti === b.ti) {\n    const ir: IRect = a.itemRect;\n    const ar: IRect = a.otherRect;\n    const br: IRect = b.otherRect;\n\n    const ad = rect_getSquareDistance(\n      ir.x,\n      ir.y,\n      ir.w,\n      ir.h,\n      ar.x,\n      ar.y,\n      ar.w,\n      ar.h\n    );\n    const bd = rect_getSquareDistance(\n      ir.x,\n      ir.y,\n      ir.w,\n      ir.h,\n      br.x,\n      br.y,\n      br.w,\n      br.h\n    );\n\n    return ad - bd;\n  }\n\n  return a.ti - b.ti;\n}\n","import assertIsPositiveNumber from './helpers/generic/assertIsPositiveNumber';\nimport {\n  rect_containsPoint,\n  rect_detectCollision,\n  rect_getDiff,\n  rect_getNearestCorner,\n  rect_getSegmentIntersectionIndices,\n  rect_getSquareDistance,\n  rect_isIntersecting,\n} from './rect';\nimport {\n  grid_toCell,\n  grid_toCellRect,\n  grid_toWorld,\n  grid_traverse,\n} from './grid';\nimport assertIsRect from './helpers/generic/assertIsRect';\nimport {\n  bounce,\n  cross,\n  Response,\n  slide,\n  touch,\n} from './helpers/world/responses';\nimport sortByTiAndDistance from './helpers/world/sortByTiAndDistance';\n\nfunction defaultFilter(): string {\n  return 'slide';\n}\n\ninterface IItemInfo {\n  item: string;\n  ti1: number;\n  ti2: number;\n  weight: number;\n}\n\nexport interface IRect {\n  x: number;\n  y: number;\n  w: number;\n  h: number;\n}\n\nexport interface ICoords {\n  x: number;\n  y: number;\n}\n\nexport interface Collision {\n  other: any | null | undefined;\n  item: string | null | undefined;\n  type?: 'touch' | 'cross' | 'slide' | 'bounce' | string;\n  overlaps: boolean;\n  ti: number;\n  move: ICoords;\n  normal: ICoords;\n  touch: ICoords;\n  itemRect: IRect;\n  otherRect: IRect;\n  slide?: ICoords;\n  bounce?: ICoords;\n}\n\nexport type Cell = {\n  ID: string;\n  x: number;\n  y: number;\n  items: { [itemID: string]: boolean };\n};\n\nfunction sortByWeight(a: IItemInfo, b: IItemInfo): number {\n  return a.weight - b.weight;\n}\n\nfunction getCellsTouchedBySegment(\n  self: World,\n  x1: number,\n  y1: number,\n  x2: number,\n  y2: number\n): Cell[] {\n  const cells: Cell[] = [];\n  const visited: { [itemID: string]: boolean } = {};\n\n  grid_traverse(self.cellSize, x1, y1, x2, y2, function(\n    cx: number,\n    cy: number\n  ) {\n    let row: Cell[] = self.rows[cy];\n\n    if (!row) return;\n\n    let cell = row[cx];\n\n    if (!cell || visited[cell.ID]) return;\n\n    visited[cell.ID] = true;\n\n    cells.push(cell);\n  });\n\n  return cells;\n}\n\nfunction getInfoAboutItemsTouchedBySegment(\n  self: World,\n  x1: number,\n  y1: number,\n  x2: number,\n  y2: number,\n  filter?: (other?: string) => boolean\n): { item: string; ti1: number; ti2: number; weight: number | null }[] {\n  let cells = getCellsTouchedBySegment(self, x1, y1, x2, y2);\n  let rect, l, t, w, h, ti1, ti2;\n\n  let visited: { [itemID: string]: boolean } = {};\n  let itemInfo: IItemInfo[] = [];\n\n  for (const cell of cells) {\n    if (cell?.items)\n      for (const itemID of Object.keys(cell.items)) {\n        if (!visited[itemID]) {\n          visited[itemID] = true;\n\n          if (!filter || filter(itemID)) {\n            rect = self['rects'][itemID];\n            l = rect.x;\n            t = rect.y;\n            w = rect.w;\n            h = rect.h;\n\n            const arr1 = rect_getSegmentIntersectionIndices(\n              l,\n              t,\n              w,\n              h,\n              x1,\n              y1,\n              x2,\n              y2,\n              0,\n              1\n            );\n\n            ti1 = arr1![0];\n            ti2 = arr1![1];\n\n            if (\n              !isNaN(ti1 as number) &&\n              ((0 < ti1! && ti1! < 1) || (0 < ti2! && ti2! < 1))\n            ) {\n              // -- the sorting is according to the t of an infinite line, not the segment\n              const [tii0, tii1] = rect_getSegmentIntersectionIndices(\n                l,\n                t,\n                w,\n                h,\n                x1,\n                y1,\n                x2,\n                y2,\n                -Number.MAX_SAFE_INTEGER,\n                Number.MAX_SAFE_INTEGER\n              );\n\n              itemInfo.push({\n                item: itemID,\n                ti1: ti1!,\n                ti2: ti2!,\n                weight: Math.min(tii0 || 0, tii1 || 0),\n              });\n            }\n          }\n        }\n      }\n  }\n\n  return itemInfo.sort(sortByWeight);\n}\n\nexport class World {\n  responses: { [responseID: string]: Response } = {};\n  cellSize: number = 0;\n  rows: Cell[][];\n  rects: { [itemID: string]: IRect };\n  nonEmptyCells: { [cellID: string]: boolean };\n\n  constructor(input: {\n    cellSize: number;\n    rects: {};\n    rows: [];\n    nonEmptyCells: {};\n    responses: {};\n  }) {\n    this.cellSize = input.cellSize;\n    this.rects = input.rects;\n    this.rows = input.rows;\n    this.nonEmptyCells = input.nonEmptyCells;\n    this.responses = input.responses;\n  }\n\n  addResponse(\n    name: 'bounce' | 'slide' | 'cross' | 'touch',\n    response: Response\n  ): void {\n    this.responses[name] = response;\n  }\n\n  getResponseByName(name: string): any {\n    const response = this.responses[name];\n\n    if (!response)\n      throw new Error(`Unknown collision type: ${name} (${typeof name})`);\n\n    return response;\n  }\n\n  project(\n    itemID: string | null,\n    x: number,\n    y: number,\n    w: number,\n    h: number,\n    goalX?: number,\n    goalY?: number,\n    filter?: (...args: any[]) => string\n  ): Collision[] {\n    assertIsRect(x, y, w, h);\n\n    const _goalX = isNaN(goalX as number) ? x : goalX!;\n    const _goalY = isNaN(goalY as number) ? y : goalY!;\n\n    const _filter = filter || defaultFilter;\n\n    let collisions: Collision[] = [];\n\n    let visited: { [itemID: string]: boolean } = {};\n\n    if (itemID) visited[itemID] = true;\n\n    // This could probably be done with less cells using a polygon raster over the cells instead of a\n    // bounding rect of the whole movement.Conditional to building a queryPolygon method\n    let tl: number = Math.min(_goalX, x);\n    let tt: number = Math.min(_goalY, y);\n\n    let tr: number = Math.max(_goalX + w, x + w);\n    let tb: number = Math.max(_goalY + h, y + h);\n\n    let tw: number = tr - tl;\n    let th: number = tb - tt;\n\n    let [cl, ct, cw, ch] = grid_toCellRect(this.cellSize, tl, tt, tw, th);\n\n    let dictItemsInCellRect: {\n      [itemID: string]: boolean;\n    } = this.getDictItemsInCellRect(cl, ct, cw, ch);\n\n    for (const other of Object.keys(dictItemsInCellRect)) {\n      if (!visited[other]) {\n        visited[other] = true;\n\n        const responseName: string = _filter(itemID, other);\n\n        if (\n          responseName &&\n          /* why do I have to do this extra check? */ this.hasItem(other)\n        ) {\n          let otherRect = this.getRect(other);\n\n          let collision: Partial<Collision> | undefined = rect_detectCollision(\n            x,\n            y,\n            w,\n            h,\n            otherRect.x,\n            otherRect.y,\n            otherRect.w,\n            otherRect.h,\n            _goalX,\n            _goalY\n          );\n\n          if (collision) {\n            collision.other = other;\n            collision.item = itemID;\n            collision.type = responseName;\n\n            collisions.push(collision as Collision);\n          }\n        }\n      }\n    }\n\n    return collisions.sort(sortByTiAndDistance);\n  }\n\n  countCells(): number {\n    let count = 0;\n\n    for (const row of this.rows.filter(row => !!row))\n      for (const _col of row) if (!!_col) count++;\n\n    return count;\n  }\n\n  hasItem(item: string): boolean {\n    return !!this.rects[item];\n  }\n\n  getItems(): IRect[] {\n    return Object.keys(this.rects).map(rectID => this.rects[rectID]);\n  }\n\n  countItems(): number {\n    return Object.keys(this.rects).length;\n  }\n\n  private addItemToCell(itemID: string, cx: number, cy: number): void {\n    this.rows[cy] = this.rows[cy] || [];\n\n    const row = this.rows[cy];\n\n    // Initialize a cell if no cell is present at this point\n    if (!row[cx])\n      row[cx] = {\n        ID: `Cell_${Math.ceil(Math.random() * Date.now()).toString(36)}`,\n        x: cx,\n        y: cy,\n        items: {},\n      };\n\n    const cell = row[cx];\n\n    this.nonEmptyCells[cell.ID] = true;\n\n    if (!cell.items[itemID]) cell.items[itemID] = true;\n  }\n\n  getRect(itemID: string): IRect {\n    let rect = this.rects[itemID];\n\n    if (!rect)\n      throw new Error(\n        `Item \"${itemID}\" must be added to the world before getting its rect. Use world:add(item, x,y,w,h) to add it first.`\n      );\n\n    return {\n      x: rect.x,\n      y: rect.y,\n      w: rect.w,\n      h: rect.h,\n    };\n  }\n\n  getDictItemsInCellRect(\n    cl: number,\n    ct: number,\n    cw: number,\n    ch: number\n  ): { [itemID: string]: boolean } {\n    const items_dict: { [itemID: string]: boolean } = {};\n\n    for (let cy = ct; cy <= ct + ch - 1; cy++) {\n      let row = this.rows[cy];\n\n      if (row) {\n        for (let cx = cl; cx <= cl + cw - 1; cx++) {\n          let cell = row[cx];\n\n          if (cell?.items && Object.keys(cell.items)?.length > 0)\n            // no cell.itemCount > 1 because tunneling\n            for (const itemID of Object.keys(cell.items))\n              items_dict[itemID] = true;\n        }\n      }\n    }\n\n    return items_dict;\n  }\n\n  private removeItemFromCell(itemID: string, cx: number, cy: number): boolean {\n    let row = this.rows[cy];\n\n    if (!row?.[cx]?.['items']?.[itemID]) return false;\n\n    let cell = row[cx];\n\n    delete cell.items[itemID];\n\n    if (Object.keys(cell.items)?.length === 0)\n      delete this.nonEmptyCells[cell.ID];\n\n    return true;\n  }\n\n  toWorld(cx: number, cy: number): [number, number] {\n    return grid_toWorld(this.cellSize, cx, cy);\n  }\n\n  toCell(x: number, y: number): [number, number] {\n    return grid_toCell(this.cellSize, x, y);\n  }\n\n  queryRect(\n    x: number,\n    y: number,\n    w: number,\n    h: number,\n    filter?: (other?: string) => boolean\n  ): string[] {\n    assertIsRect(x, y, w, h);\n\n    const [cl, ct, cw, ch] = grid_toCellRect(this.cellSize, x, y, w, h);\n    const dictItemsInCellRect = this.getDictItemsInCellRect(cl, ct, cw, ch);\n\n    const items: string[] = [];\n\n    for (const itemID of Object.keys(dictItemsInCellRect))\n      if (\n        (!filter || filter(itemID)) &&\n        rect_isIntersecting(\n          x,\n          y,\n          w,\n          h,\n          this.rects[itemID].x,\n          this.rects[itemID].y,\n          this.rects[itemID].w,\n          this.rects[itemID].h\n        )\n      )\n        items.push(itemID);\n\n    return items;\n  }\n\n  queryPoint(\n    x: number,\n    y: number,\n    filter?: (other?: string) => boolean\n  ): string[] {\n    const [cx, cy] = this.toCell(x, y);\n    const dictItemsInCellRect = this.getDictItemsInCellRect(cx, cy, 1, 1);\n\n    const items: string[] = [];\n\n    for (const itemID of Object.keys(dictItemsInCellRect))\n      if (\n        (!filter || filter(itemID)) &&\n        rect_containsPoint(\n          this.rects[itemID].x,\n          this.rects[itemID].y,\n          this.rects[itemID].w,\n          this.rects[itemID].h,\n          x,\n          y\n        )\n      )\n        items.push(itemID);\n\n    return items;\n  }\n\n  querySegment(\n    x1: number,\n    y1: number,\n    x2: number,\n    y2: number,\n    filter?: (other?: string) => boolean\n  ): string[] {\n    const itemsInfo = getInfoAboutItemsTouchedBySegment(\n      this,\n      x1,\n      y1,\n      x2,\n      y2,\n      filter\n    );\n\n    const items: string[] = [];\n\n    if (itemsInfo) for (const itemInfo of itemsInfo) items.push(itemInfo.item);\n\n    return items;\n  }\n\n  querySegmentWithCoords(\n    x1: number,\n    y1: number,\n    x2: number,\n    y2: number,\n    filter?: (other?: string) => boolean\n  ): {\n    item: string;\n    ti1: number;\n    ti2: number;\n    weight: number | null;\n    x1: number;\n    x2: number;\n    y1: number;\n    y2: number;\n  }[] {\n    let itemInfo: any = getInfoAboutItemsTouchedBySegment(\n      this,\n      x1,\n      y1,\n      x2,\n      y2,\n      filter\n    );\n\n    let dx: number = x2 - x1;\n    let dy: number = y2 - y1;\n\n    let info: any;\n    let ti1: number;\n    let ti2: number;\n\n    for (const item of itemInfo) {\n      info = item;\n\n      ti1 = info.ti1;\n      ti2 = info.ti2;\n\n      info.weight = null;\n      info.x1 = x1 + dx * ti1;\n      info.y1 = y1 + dy * ti1;\n      info.x2 = x1 + dx * ti2;\n      info.y2 = y1 + dy * ti2;\n    }\n\n    return itemInfo;\n  }\n\n  add(itemID: string, x: number, y: number, w: number, h: number): string {\n    const rect: IRect = this.rects[itemID];\n\n    if (rect) throw new Error(`Item \"${itemID}\" added to the world twice.`);\n\n    assertIsRect(x, y, w, h);\n\n    this.rects[itemID] = { x, y, w, h };\n\n    const [cl, ct, cw, ch] = grid_toCellRect(this.cellSize, x, y, w, h);\n\n    for (let cy = ct; cy < ct + ch; cy++)\n      for (let cx = cl; cx < cl + cw; cx++) this.addItemToCell(itemID, cx, cy);\n\n    return itemID;\n  }\n\n  remove(itemID: string): void {\n    const itemRect: IRect = JSON.parse(JSON.stringify(this.getRect(itemID)));\n\n    delete this.rects[itemID];\n\n    let [cl, ct, cw, ch] = grid_toCellRect(\n      this.cellSize,\n      itemRect.x,\n      itemRect.y,\n      itemRect.w,\n      itemRect.h\n    );\n\n    for (let cy = ct; cy < ct + ch; cy++)\n      for (let cx = cl; cx < cl + cw; cx++)\n        this.removeItemFromCell(itemID, cx, cy);\n  }\n\n  update(\n    itemID: string,\n    x2: number,\n    y2: number,\n    w2?: number,\n    h2?: number\n  ): void {\n    let itemRect = this.getRect(itemID);\n\n    w2 = isNaN(w2 as number) ? itemRect.w : w2;\n    h2 = isNaN(h2 as number) ? itemRect.h : h2;\n\n    assertIsRect(x2, y2, w2!, h2!);\n\n    if (\n      itemRect.x != x2 ||\n      itemRect.y != y2 ||\n      itemRect.w != w2 ||\n      itemRect.h != h2\n    ) {\n      const [cl1, ct1, cw1, ch1] = grid_toCellRect(\n        this.cellSize,\n        itemRect.x,\n        itemRect.y,\n        itemRect.w,\n        itemRect.h\n      );\n\n      const [cl2, ct2, cw2, ch2] = grid_toCellRect(\n        this.cellSize,\n        x2,\n        y2,\n        w2!,\n        h2!\n      );\n\n      if (cl1 != cl2 || ct1 != ct2 || cw1 != cw2 || ch1 != ch2) {\n        const cr1: number = cl1 + cw1 - 1;\n        const cb1: number = ct1 + ch1 - 1;\n\n        const cr2: number = cl2 + cw2 - 1;\n        const cb2: number = ct2 + ch2 - 1;\n\n        let cyOut: boolean;\n\n        for (let cy = ct1; cy <= cb1; cy++) {\n          cyOut = Number(cy) < ct2 || cy > cb2;\n\n          for (let cx = cl1; cx <= cr1; cx++)\n            if (cyOut || cx < cl2 || cx > cr2)\n              this.removeItemFromCell(itemID, cx, cy);\n        }\n\n        for (let cy = ct2; cy <= cb2; cy++) {\n          cyOut = cy < ct1 || cy > cb1;\n\n          for (let cx = cl2; cx <= cr2; cx++)\n            if (cyOut || cx < cl1 || cx > cr1)\n              this.addItemToCell(itemID, cx, cy);\n        }\n      }\n\n      const rect: IRect = this.rects[itemID];\n\n      rect.x = x2;\n      rect.y = y2;\n      rect.w = w2!;\n      rect.h = h2!;\n    }\n  }\n\n  public move(\n    itemID: string,\n    goalX: number,\n    goalY: number,\n    filter?: (...args: any[]) => any\n  ): { x: number; y: number; collisions: Collision[] } {\n    const { x, y, collisions } = this.check(itemID, goalX, goalY, filter);\n\n    this.update(itemID, x, y);\n\n    return { x, y, collisions };\n  }\n\n  check(\n    itemID: string,\n    goalX: number,\n    goalY: number,\n    filter?: (...args: any[]) => any\n  ): { x: number; y: number; collisions: Collision[] } {\n    let _goalX: number = goalX;\n    let _goalY: number = goalY;\n\n    const checkFilter: any = filter || defaultFilter;\n\n    let visited: { [itemID: string]: boolean } = {};\n    visited[itemID] = true;\n\n    const visitedFilter = (itm: any, other: any) =>\n      !!visited[other] ? false : checkFilter(itm, other);\n\n    let detectedCollisions: Collision[] = [];\n\n    const itemRect: IRect = this.getRect(itemID);\n\n    // this is returning an empty array. WHY?\n    let projectedCollisions: Collision[] = this.project(\n      itemID,\n      itemRect.x,\n      itemRect.y,\n      itemRect.w,\n      itemRect.h,\n      _goalX,\n      _goalY,\n      visitedFilter\n    );\n\n    let collisionsCounter: number = projectedCollisions?.length || 0;\n\n    while (collisionsCounter > 0) {\n      const collision: Collision = projectedCollisions[0];\n\n      detectedCollisions.push(collision);\n\n      visited[collision.other] = true;\n\n      let response = this.getResponseByName(collision.type!);\n\n      const { x, y, collisions } = response(\n        this,\n        collision,\n        itemRect.x,\n        itemRect.y,\n        itemRect.w,\n        itemRect.h,\n        _goalX,\n        _goalY,\n        visitedFilter\n      );\n\n      _goalX = x;\n      _goalY = y;\n      projectedCollisions = collisions;\n\n      collisionsCounter = collisions?.length || 0;\n    }\n\n    return { x: _goalX, y: _goalY, collisions: detectedCollisions };\n  }\n}\n\n// Public library functions\n\nconst bump = {\n  newWorld: function(cellSize: number): World {\n    cellSize = cellSize || 64;\n\n    assertIsPositiveNumber(cellSize, 'cellSize');\n\n    const world: World = new World({\n      cellSize: cellSize,\n      rects: {},\n      rows: [],\n      nonEmptyCells: {},\n      responses: {},\n    });\n\n    world.addResponse('touch', touch);\n    world.addResponse('cross', cross);\n    world.addResponse('slide', slide);\n    world.addResponse('bounce', bounce);\n\n    return world;\n  },\n  rect: {\n    getNearestCorner: rect_getNearestCorner,\n    getSegmentIntersectionIndices: rect_getSegmentIntersectionIndices,\n    getDiff: rect_getDiff,\n    containsPoint: rect_containsPoint,\n    isIntersecting: rect_isIntersecting,\n    getSquareDistance: rect_getSquareDistance,\n    detectCollision: rect_detectCollision,\n  },\n  responses: {\n    touch,\n    cross,\n    slide,\n    bounce,\n  },\n};\n\nexport default Object.freeze(bump);\n","export default function _initializerDefineProperty(target, property, descriptor, context) {\n  if (!descriptor) return;\n  Object.defineProperty(target, property, {\n    enumerable: descriptor.enumerable,\n    configurable: descriptor.configurable,\n    writable: descriptor.writable,\n    value: descriptor.initializer ? descriptor.initializer.call(context) : void 0\n  });\n}","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  Object.defineProperty(subClass, \"prototype\", {\n    writable: false\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","import _typeof from \"./typeof.js\";\nimport assertThisInitialized from \"./assertThisInitialized.js\";\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  } else if (call !== void 0) {\n    throw new TypeError(\"Derived constructors may only return object or undefined\");\n  }\n\n  return assertThisInitialized(self);\n}","import getPrototypeOf from \"./getPrototypeOf.js\";\nimport isNativeReflectConstruct from \"./isNativeReflectConstruct.js\";\nimport possibleConstructorReturn from \"./possibleConstructorReturn.js\";\nexport default function _createSuper(Derived) {\n  var hasNativeReflectConstruct = isNativeReflectConstruct();\n  return function _createSuperInternal() {\n    var Super = getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return possibleConstructorReturn(this, result);\n  };\n}","export default function _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}","export default function _applyDecoratedDescriptor(target, property, decorators, descriptor, context) {\n  var desc = {};\n  Object.keys(descriptor).forEach(function (key) {\n    desc[key] = descriptor[key];\n  });\n  desc.enumerable = !!desc.enumerable;\n  desc.configurable = !!desc.configurable;\n\n  if ('value' in desc || desc.initializer) {\n    desc.writable = true;\n  }\n\n  desc = decorators.slice().reverse().reduce(function (desc, decorator) {\n    return decorator(target, property, desc) || desc;\n  }, desc);\n\n  if (context && desc.initializer !== void 0) {\n    desc.value = desc.initializer ? desc.initializer.call(context) : void 0;\n    desc.initializer = undefined;\n  }\n\n  if (desc.initializer === void 0) {\n    Object.defineProperty(target, property, desc);\n    desc = null;\n  }\n\n  return desc;\n}","export class Constants {\r\n  public static readonly SCREEN_WIDTH = 2000;\r\n  public static readonly SCREEN_HEIGHT = 2000;\r\n  public static readonly MAP_WIDTH = 320;\r\n  public static readonly MAP_HEIGHT = 320;\r\n  public static readonly MAP_GRID_COLS = 20;\r\n  public static readonly MAP_GRID_ROWS = 20;\r\n  public static readonly CELL_WIDTH =\r\n    Constants.MAP_WIDTH / Constants.MAP_GRID_COLS;\r\n  public static readonly CELL_HEIGHT =\r\n    Constants.MAP_HEIGHT / Constants.MAP_GRID_ROWS;\r\n  public static readonly MAX_COUNT_MAP = 3;\r\n}\r\n","import { World } from \"bump-ts\";\r\nimport { Inject, System } from \"flat-ecs\";\r\nimport { Constants } from \"./Constant\";\r\nimport { GameConfig } from \"./ulis/currentMap\";\r\nimport { LayerMapRender } from \"./ulis/layerMapRender\";\r\nimport { mapData } from \"./ulis/mapData\";\r\nimport { Port } from \"./ulis/port\";\r\n\r\nexport class ChangeMapSystem extends System {\r\n  @Inject(\"bumpWorld\") bumpWorld: World;\r\n  @Inject(\"gameConfig\") gameConfig: GameConfig;\r\n  @Inject(\"port\") port: Port;\r\n  @Inject(\"layersMapRender\") layersMapRender: LayerMapRender;\r\n  @Inject(\"obstacles\") obstacles: {\r\n    x: number;\r\n    y: number;\r\n    width: number;\r\n    height: number;\r\n  }[];\r\n  @Inject(\"mapData\") mapData: mapData;\r\n\r\n  reload = false;\r\n  realNextMapPosY = 0;\r\n  realPreMapPosY = 0;\r\n  offsetTileMap = 10;\r\n\r\n  initialized(): void {\r\n    // if (this.port.nextMap) {\r\n    //   this.realNextMapPosY =\r\n    //     Constants.MAP_HEIGHT - this.port.nextMap.y + this.offsetTileMap;\r\n    // }\r\n    // if (this.port.preMap) {\r\n    //   this.realPreMapPosY =\r\n    //     Constants.MAP_HEIGHT - this.port.preMap.y + this.offsetTileMap;\r\n    // }\r\n  }\r\n\r\n  process(): void {\r\n    const playerRect = this.bumpWorld.getRect(\"player\");\r\n    console.log(this.gameConfig.mapNumber);\r\n\r\n    if (\r\n      this.gameConfig.mapNumber < 3 &&\r\n      Math.abs(playerRect.x - (this.port.nextMap.x - 5)) <=\r\n        this.offsetTileMap / 1.5 &&\r\n      Math.abs(\r\n        playerRect.y -\r\n          (Constants.MAP_HEIGHT - this.port.nextMap.y + this.offsetTileMap + 10)\r\n      ) <=\r\n        this.offsetTileMap / 1.5\r\n    ) {\r\n      this.gameConfig.mapNumber++;\r\n\r\n      for (let i = 0; i < this.layersMapRender.obstacle.length; i++) {\r\n        if (this.layersMapRender.obstacle[i]) {\r\n          this.bumpWorld.remove(`obstacle${i}`);\r\n        }\r\n      }\r\n      if (this.gameConfig.mapNumber === 2) {\r\n        //updatePort\r\n        this.port.spawn = this.mapData.map2.layers\r\n          .find((d: any) => d.name === \"data\")\r\n          .objects.find((s: any) => s.name === \"spawn\");\r\n\r\n        this.port.preMap = this.mapData.map2.layers\r\n          .find((d: any) => d.name === \"data\")\r\n          .objects.find((s: any) => s.name === \"previousMap\");\r\n        console.log(this.mapData.map2.layers);\r\n        this.port.nextMap = this.mapData.map2.layers\r\n          .find((d: any) => d.name === \"data\")\r\n          .objects.find((s: any) => s.name === \"nextMap\");\r\n\r\n        this.layersMapRender.walls = this.mapData.map2.layers.find(\r\n          (w: any) => w.name === \"walls\"\r\n        ).data;\r\n        this.layersMapRender.layer1 = this.mapData.map2.layers.find(\r\n          (w: any) => w.name === \"layer1\"\r\n        ).data;\r\n        this.layersMapRender.layer2 = this.mapData.map2.layers.find(\r\n          (w: any) => w.name === \"layer2\"\r\n        ).data;\r\n        this.layersMapRender.obstacle = this.mapData.map2.layers.find(\r\n          (w: any) => w.name === \"obstacles\"\r\n        ).data;\r\n\r\n        this.bumpWorld.move(\r\n          \"player\",\r\n          this.port.preMap.x - this.offsetTileMap / 2,\r\n          Constants.MAP_HEIGHT - this.port.preMap.y + this.offsetTileMap - 10\r\n        );\r\n      }\r\n\r\n      if (this.gameConfig.mapNumber === 3) {\r\n        //updatePort\r\n\r\n        this.layersMapRender.walls = this.mapData.map3.layers.find(\r\n          (w: any) => w.name === \"walls\"\r\n        ).data;\r\n        this.layersMapRender.layer1 = this.mapData.map3.layers.find(\r\n          (w: any) => w.name === \"layer1\"\r\n        ).data;\r\n        this.layersMapRender.layer2 = this.mapData.map3.layers.find(\r\n          (w: any) => w.name === \"layer2\"\r\n        ).data;\r\n        this.layersMapRender.obstacle = this.mapData.map3.layers.find(\r\n          (w: any) => w.name === \"obstacles\"\r\n        ).data;\r\n\r\n        this.port.preMap = this.mapData.map3.layers\r\n          .find((d: any) => d.name === \"data\")\r\n          .objects.find((s: any) => s.name === \"previousMap\");\r\n\r\n        this.port.nextMap = this.mapData.map3.layers\r\n          .find((d: any) => d.name === \"data\")\r\n          .objects.find((s: any) => s.name === \"nextMap\");\r\n\r\n        this.bumpWorld.move(\r\n          \"player\",\r\n          this.port.preMap.x - this.offsetTileMap / 2,\r\n          Constants.MAP_HEIGHT - this.port.preMap.y + this.offsetTileMap + 20\r\n        );\r\n      }\r\n\r\n      for (let i = 0; i < this.layersMapRender.obstacle.length; i++) {\r\n        if (this.layersMapRender.obstacle[i]) {\r\n          this.bumpWorld.add(\r\n            `obstacle${i}`,\r\n            this.obstacles[i].x,\r\n            this.obstacles[i].y,\r\n            this.obstacles[i].width,\r\n            this.obstacles[i].height\r\n          );\r\n        }\r\n      }\r\n    }\r\n\r\n    if (\r\n      this.gameConfig.mapNumber > 1 &&\r\n      Math.abs(playerRect.x - (this.port.preMap.x - 5)) <=\r\n        this.offsetTileMap / 1.5 &&\r\n      Math.abs(\r\n        playerRect.y -\r\n          (Constants.MAP_HEIGHT - this.port.preMap.y + this.offsetTileMap + 10)\r\n      ) <=\r\n        this.offsetTileMap / 1.5\r\n    ) {\r\n      this.gameConfig.mapNumber--;\r\n\r\n      for (let i = 0; i < this.layersMapRender.obstacle.length; i++) {\r\n        if (this.layersMapRender.obstacle[i]) {\r\n          this.bumpWorld.remove(`obstacle${i}`);\r\n        }\r\n      }\r\n      if (this.gameConfig.mapNumber === 1) {\r\n        //updatePort\r\n        this.port.nextMap = this.mapData.map1.layers\r\n          .find((d: any) => d.name === \"data\")\r\n          .objects.find((s: any) => s.name === \"nextMap\");\r\n\r\n        //render\r\n        this.layersMapRender.walls = this.mapData.map1.layers.find(\r\n          (w: any) => w.name === \"walls\"\r\n        ).data;\r\n        this.layersMapRender.layer1 = this.mapData.map1.layers.find(\r\n          (w: any) => w.name === \"layer1\"\r\n        ).data;\r\n        this.layersMapRender.layer2 = this.mapData.map1.layers.find(\r\n          (w: any) => w.name === \"layer2\"\r\n        ).data;\r\n        this.layersMapRender.obstacle = this.mapData.map1.layers.find(\r\n          (w: any) => w.name === \"obstacles\"\r\n        ).data;\r\n      }\r\n\r\n      if (this.gameConfig.mapNumber === 2) {\r\n        //updatePort\r\n        this.port.preMap = this.mapData.map2.layers\r\n          .find((d: any) => d.name === \"data\")\r\n          .objects.find((s: any) => s.name === \"previousMap\");\r\n\r\n        this.port.nextMap = this.mapData.map2.layers\r\n          .find((d: any) => d.name === \"data\")\r\n          .objects.find((s: any) => s.name === \"nextMap\");\r\n\r\n        this.layersMapRender.walls = this.mapData.map2.layers.find(\r\n          (w: any) => w.name === \"walls\"\r\n        ).data;\r\n        this.layersMapRender.layer1 = this.mapData.map2.layers.find(\r\n          (w: any) => w.name === \"layer1\"\r\n        ).data;\r\n        this.layersMapRender.layer2 = this.mapData.map2.layers.find(\r\n          (w: any) => w.name === \"layer2\"\r\n        ).data;\r\n        this.layersMapRender.obstacle = this.mapData.map2.layers.find(\r\n          (w: any) => w.name === \"obstacles\"\r\n        ).data;\r\n      }\r\n\r\n      this.bumpWorld.move(\r\n        \"player\",\r\n        this.port.nextMap.x - this.offsetTileMap / 2,\r\n        Constants.MAP_HEIGHT - this.port.nextMap.y + this.offsetTileMap\r\n      );\r\n\r\n      for (let i = 0; i < this.layersMapRender.obstacle.length; i++) {\r\n        if (this.layersMapRender.obstacle[i]) {\r\n          this.bumpWorld.add(\r\n            `obstacle${i}`,\r\n            this.obstacles[i].x,\r\n            this.obstacles[i].y,\r\n            this.obstacles[i].width,\r\n            this.obstacles[i].height\r\n          );\r\n        }\r\n      }\r\n    }\r\n\r\n    // if (this.reload) {\r\n    //   if (this.gameConfig.mapNumber === 1) {\r\n    //     this.layersMapRender.walls = this.mapData.preMap.layers.find(\r\n    //       (w: any) => w.name === \"walls\"\r\n    //     ).data;\r\n    //     this.layersMapRender.layer1 = this.mapData.preMap.layers.find(\r\n    //       (w: any) => w.name === \"layer1\"\r\n    //     ).data;\r\n    //     this.layersMapRender.layer2 = this.mapData.preMap.layers.find(\r\n    //       (w: any) => w.name === \"layer2\"\r\n    //     ).data;\r\n    //     this.layersMapRender.obstacle = this.mapData.preMap.layers.find(\r\n    //       (w: any) => w.name === \"obstacles\"\r\n    //     ).data;\r\n\r\n    //     for (let i = 0; i < this.layersMapRender.obstacle.length; i++) {\r\n    //       if (this.layersMapRender.obstacle[i]) {\r\n    //         this.bumpWorld.add(\r\n    //           `obstacle${i}`,\r\n    //           this.obstacles[i].x,\r\n    //           this.obstacles[i].y,\r\n    //           this.obstacles[i].width,\r\n    //           this.obstacles[i].height\r\n    //         );\r\n    //       }\r\n    //     }\r\n\r\n    //     this.reload = false;\r\n    //   }\r\n    //   if (this.gameConfig.mapNumber === 2) {\r\n    //     for (let i = 0; i < this.layersMapRender.obstacle.length; i++) {\r\n    //       if (this.layersMapRender.obstacle[i]) {\r\n    //         this.bumpWorld.remove(`obstacle${i}`);\r\n    //       }\r\n    //     }\r\n\r\n    //     this.layersMapRender.walls = this.mapData.currentMap.layers.find(\r\n    //       (w: any) => w.name === \"walls\"\r\n    //     ).data;\r\n    //     this.layersMapRender.layer1 = this.mapData.currentMap.layers.find(\r\n    //       (w: any) => w.name === \"layer1\"\r\n    //     ).data;\r\n    //     this.layersMapRender.layer2 = this.mapData.currentMap.layers.find(\r\n    //       (w: any) => w.name === \"layer2\"\r\n    //     ).data;\r\n    //     this.layersMapRender.obstacle = this.mapData.currentMap.layers.find(\r\n    //       (w: any) => w.name === \"obstacles\"\r\n    //     ).data;\r\n\r\n    //     for (let i = 0; i < this.layersMapRender.obstacle.length; i++) {\r\n    //       if (this.layersMapRender.obstacle[i]) {\r\n    //         this.bumpWorld.add(\r\n    //           `obstacle${i}`,\r\n    //           this.obstacles[i].x,\r\n    //           this.obstacles[i].y,\r\n    //           this.obstacles[i].width,\r\n    //           this.obstacles[i].height\r\n    //         );\r\n    //       }\r\n    //     }\r\n\r\n    //     this.reload = false;\r\n    //   }\r\n    //   if (this.gameConfig.mapNumber === 3) {\r\n    //     for (let i = 0; i < this.layersMapRender.obstacle.length; i++) {\r\n    //       if (this.layersMapRender.obstacle[i]) {\r\n    //         this.bumpWorld.remove(`obstacle${i}`);\r\n    //       }\r\n    //     }\r\n\r\n    //     this.bumpWorld.move(\r\n    //       \"player\",\r\n    //       this.port.spawn.x - this.offsetTileMap / 2,\r\n    //       Constants.MAP_HEIGHT - this.port.spawn.y + this.offsetTileMap + 10\r\n    //     );\r\n\r\n    //     this.layersMapRender.walls = this.mapData.nextMap.layers.find(\r\n    //       (w: any) => w.name === \"walls\"\r\n    //     ).data;\r\n    //     this.layersMapRender.layer1 = this.mapData.nextMap.layers.find(\r\n    //       (w: any) => w.name === \"layer1\"\r\n    //     ).data;\r\n    //     this.layersMapRender.layer2 = this.mapData.nextMap.layers.find(\r\n    //       (w: any) => w.name === \"layer2\"\r\n    //     ).data;\r\n    //     this.layersMapRender.obstacle = this.mapData.nextMap.layers.find(\r\n    //       (w: any) => w.name === \"obstacles\"\r\n    //     ).data;\r\n\r\n    //     this.port.spawn = this.mapData.nextMap.layers\r\n    //       .find((d: any) => d.name === \"data\")\r\n    //       .objects.find((s: any) => s.name === \"spawn\");\r\n\r\n    //     for (let i = 0; i < this.layersMapRender.obstacle.length; i++) {\r\n    //       if (this.layersMapRender.obstacle[i]) {\r\n    //         this.bumpWorld.add(\r\n    //           `obstacle${i}`,\r\n    //           this.obstacles[i].x,\r\n    //           this.obstacles[i].y,\r\n    //           this.obstacles[i].width,\r\n    //           this.obstacles[i].height\r\n    //         );\r\n    //       }\r\n    //     }\r\n\r\n    //     this.reload = false;\r\n    //   }\r\n    // }\r\n  }\r\n}\r\n","import { Inject, System } from \"flat-ecs\";\r\nimport { PolygonBatch, ShapeRenderer, TextureRegion } from \"gdxts\";\r\nimport { Constants } from \"./Constant\";\r\nimport { LayerMapRender } from \"./ulis/layerMapRender\";\r\n\r\nexport class MapRenderingSystem extends System {\r\n  @Inject(\"shapeRenderer\") shapeRenderer: ShapeRenderer;\r\n  @Inject(\"batch\") batch: PolygonBatch;\r\n  @Inject(\"tileSetsRegions\") tileSetsRegions: TextureRegion[];\r\n  @Inject(\"layersMapRender\") layersMapRender: LayerMapRender;\r\n  @Inject(\"rects\") rects: {\r\n    x: number;\r\n    y: number;\r\n    width: number;\r\n    height: number;\r\n  }[];\r\n\r\n  initialized(): void {\r\n    for (let i = 0; i < Constants.MAP_GRID_COLS; i++) {\r\n      for (let j = 0; j < Constants.MAP_GRID_ROWS; j++) {\r\n        this.rects.push({\r\n          x: Constants.CELL_WIDTH * j,\r\n          y:\r\n            Constants.CELL_HEIGHT * Constants.MAP_GRID_ROWS -\r\n            Constants.CELL_HEIGHT * i,\r\n          width: Constants.CELL_WIDTH,\r\n          height: Constants.CELL_HEIGHT,\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  process(): void {\r\n    this.batch.begin();\r\n\r\n    this.layersMapRender.walls.forEach((regionId: number, index: number) => {\r\n      const region = this.tileSetsRegions[regionId - 1];\r\n      const rect = this.rects[index];\r\n      region.draw(this.batch, rect.x, rect.y, rect.width, rect.height);\r\n    });\r\n\r\n    this.layersMapRender.layer1.forEach((regionId: number, index: number) => {\r\n      if (regionId) {\r\n        const region = this.tileSetsRegions[regionId - 1];\r\n        const rect = this.rects[index];\r\n        region.draw(this.batch, rect.x, rect.y, rect.width, rect.height);\r\n      }\r\n    });\r\n\r\n    this.layersMapRender.layer2.forEach((regionId: number, index: number) => {\r\n      if (regionId) {\r\n        const region = this.tileSetsRegions[regionId - 1];\r\n        const rect = this.rects[index];\r\n        region.draw(this.batch, rect.x, rect.y, rect.width, rect.height);\r\n      }\r\n    });\r\n    // this.layersMapRender.obstacle.forEach((regionId: number, index: number) => {\r\n    //   if (regionId) {\r\n    //     const region = this.tileSetsRegions[regionId - 1];\r\n    //     const rect = this.rects[index];\r\n    //     region.draw(this.batch, rect.x, rect.y, rect.width, rect.height);\r\n    //   }\r\n    // });\r\n\r\n    this.batch.end();\r\n  }\r\n}\r\n","import { IRect, World } from \"bump-ts\";\r\nimport { Inject, System } from \"flat-ecs\";\r\nimport { LayerMapRender } from \"./ulis/layerMapRender\";\r\nimport { mapData } from \"./ulis/mapData\";\r\n\r\nexport class ObstaclesSystem extends System {\r\n  @Inject(\"bumpWorld\") bumpWorld: World;\r\n  @Inject(\"mapData\") mapData: mapData;\r\n  @Inject(\"obstacles\") obstacles: {\r\n    x: number;\r\n    y: number;\r\n    width: number;\r\n    height: number;\r\n  }[];\r\n  @Inject(\"layersMapRender\") layersMapRender: LayerMapRender;\r\n\r\n  initialized(): void {\r\n    console.log(this.layersMapRender);\r\n    for (let i = 0; i < this.layersMapRender.obstacle.length; i++) {\r\n      if (this.layersMapRender.obstacle[i]) {\r\n        this.bumpWorld.add(\r\n          `obstacle${i}`,\r\n          this.obstacles[i].x,\r\n          this.obstacles[i].y,\r\n          this.obstacles[i].width,\r\n          this.obstacles[i].height\r\n        );\r\n      }\r\n    }\r\n  }\r\n\r\n  process(): void {\r\n    let getRectObs: IRect[] = [];\r\n\r\n    // for (let i = 0; i < this.layersMapRender.obstacle.length; i++) {\r\n    //   if (this.layersMapRender.obstacle[i]) {\r\n    //     getRectObs.push(this.bumpWorld.getRect(`obstacle${i}`));\r\n    //   }\r\n    // }\r\n  }\r\n}\r\n","import { World } from \"bump-ts\";\r\nimport { Inject, System } from \"flat-ecs\";\r\nimport { ViewportInputHandler, Vector2 } from \"gdxts\";\r\nimport { Constants } from \"./Constant\";\r\nexport interface JoyStick {\r\n  origin: Vector2;\r\n  thumbPos: Vector2;\r\n  direction: Vector2;\r\n\r\n  touched: boolean;\r\n  move: boolean;\r\n  dragging: boolean;\r\n}\r\n\r\nfunction movePlayer(inputHandler: ViewportInputHandler, joyStick: JoyStick) {\r\n  if (inputHandler.isTouched()) {\r\n    joyStick.origin.set(Constants.MAP_WIDTH / 2, Constants.MAP_HEIGHT / 2);\r\n    joyStick.thumbPos.setVector(inputHandler.getTouchedWorldCoord());\r\n    joyStick.direction\r\n      .setVector(joyStick.thumbPos)\r\n      .subVector(joyStick.origin)\r\n      .nor();\r\n  } else {\r\n    joyStick.direction.set(0, 0);\r\n  }\r\n  return joyStick.direction;\r\n}\r\n\r\nexport class PlayerMovementSystem extends System {\r\n  @Inject(\"inputHandler\") inputHandler: ViewportInputHandler;\r\n  @Inject(\"joyStick\") joyStick: JoyStick;\r\n  @Inject(\"bumpWorld\") bumpWorld: World;\r\n\r\n  process(): void {\r\n    const tempVec2 = movePlayer(this.inputHandler, this.joyStick);\r\n    let playerRect = this.bumpWorld.getRect(\"player\");\r\n\r\n    this.bumpWorld.move(\r\n      \"player\",\r\n      playerRect.x + tempVec2.x,\r\n      playerRect.y + tempVec2.y\r\n    );\r\n  }\r\n}\r\n","import { World } from \"bump-ts\";\r\nimport { Inject, System } from \"flat-ecs\";\r\nimport { Color, ShapeRenderer } from \"gdxts\";\r\nimport { Constants } from \"./Constant\";\r\nimport { mapData } from \"./ulis/mapData\";\r\nimport { Port } from \"./ulis/port\";\r\n\r\nexport class PlayerRenderSystem extends System {\r\n  @Inject(\"shapeRenderer\") shapeRenderer: ShapeRenderer;\r\n  @Inject(\"bumpWorld\") bumpWorld: World;\r\n  @Inject(\"currentMapData\") currentMapData: any;\r\n  @Inject(\"port\") port: Port;\r\n\r\n  process(): void {\r\n    let playerRect = this.bumpWorld.getRect(\"player\");\r\n\r\n    this.shapeRenderer.begin();\r\n\r\n    this.shapeRenderer.rect(\r\n      true,\r\n      playerRect.x,\r\n      playerRect.y,\r\n      playerRect.w,\r\n      playerRect.h,\r\n      Color.GREEN\r\n    );\r\n\r\n    this.shapeRenderer.end();\r\n  }\r\n}\r\n","import Bump from \"bump-ts\";\r\nimport { World } from \"flat-ecs\";\r\nimport {\r\n  createGameLoop,\r\n  createStage,\r\n  createViewport,\r\n  PolygonBatch,\r\n  ShapeRenderer,\r\n  Texture,\r\n  TextureRegion,\r\n  ViewportInputHandler,\r\n} from \"gdxts\";\r\nimport { Vector2 } from \"gdxts/dist/lib/Vector2\";\r\nimport { ChangeMapSystem } from \"./ChangeMapSystem\";\r\nimport { Constants } from \"./Constant\";\r\nimport { MapRenderingSystem } from \"./MapRenderingSystem\";\r\nimport { ObstaclesSystem } from \"./ObstaclesSystem\";\r\nimport { JoyStick, PlayerMovementSystem } from \"./PlayerMovementSystem\";\r\nimport { PlayerRenderSystem } from \"./PlayerRenderSystem\";\r\nimport { GameConfig } from \"./ulis/currentMap\";\r\nimport { LayerMapRender } from \"./ulis/layerMapRender\";\r\nimport { mapData } from \"./ulis/mapData\";\r\nimport { Port } from \"./ulis/port\";\r\n\r\nexport const init = async () => {\r\n  const stage = createStage();\r\n  const canvas = stage.getCanvas();\r\n  const viewport = createViewport(\r\n    canvas,\r\n    Constants.MAP_WIDTH,\r\n    Constants.MAP_HEIGHT + 20\r\n  );\r\n  const gl = viewport.getContext();\r\n\r\n  const batch = new PolygonBatch(gl);\r\n  const shapeRenderer = new ShapeRenderer(gl);\r\n  const camera = viewport.getCamera();\r\n  const world = new World();\r\n\r\n  const tileSets = await Texture.load(gl, \"./tiles_dungeon_v1.1.png\");\r\n  const tileSetsRegions = TextureRegion.splitTexture(tileSets, 20, 24);\r\n\r\n  gl.clearColor(0, 0, 0, 1);\r\n\r\n  const inputHandler = new ViewportInputHandler(viewport);\r\n\r\n  const gameConfig: GameConfig = {\r\n    mapNumber: 1,\r\n    changePreMap: false,\r\n    changeCurrentMap: true,\r\n    changeNextMap: false,\r\n  };\r\n\r\n  const port: Port = {\r\n    preMap: null,\r\n    spawn: null,\r\n    nextMap: null,\r\n  };\r\n  const mapData: mapData = {\r\n    map1: null,\r\n    map2: null,\r\n    map3: null,\r\n  };\r\n\r\n  mapData.map1 = await fetch(`./01.tmj`).then((res) => res.json());\r\n  port.spawn = mapData.map1.layers\r\n    .find((d: any) => d.name === \"data\")\r\n    .objects.find((s: any) => s.name === \"spawn\");\r\n\r\n  port.preMap = mapData.map1.layers\r\n    .find((d: any) => d.name === \"data\")\r\n    .objects.find((s: any) => s.name === \"previousMap\");\r\n\r\n  port.nextMap = mapData.map1.layers\r\n    .find((d: any) => d.name === \"data\")\r\n    .objects.find((s: any) => s.name === \"nextMap\");\r\n\r\n  mapData.map2 = await fetch(`./0${gameConfig.mapNumber + 1}.tmj`).then((res) =>\r\n    res.json()\r\n  );\r\n\r\n  mapData.map3 = await fetch(`./0${gameConfig.mapNumber + 2}.tmj`).then((res) =>\r\n    res.json()\r\n  );\r\n\r\n  const joyStick: JoyStick = {\r\n    origin: new Vector2(),\r\n    direction: new Vector2(),\r\n    thumbPos: new Vector2(),\r\n\r\n    touched: false,\r\n    move: false,\r\n    dragging: false,\r\n  };\r\n\r\n  const layersMapRender: LayerMapRender = {\r\n    walls: mapData.map1.layers.find((w: any) => w.name === \"walls\").data,\r\n    layer1: mapData.map1.layers.find((w: any) => w.name === \"layer1\").data,\r\n    layer2: mapData.map1.layers.find((w: any) => w.name === \"layer2\").data,\r\n    obstacle: mapData.map1.layers.find((w: any) => w.name === \"obstacles\").data,\r\n  };\r\n  const rects: { x: number; y: number; width: number; height: number }[] = [];\r\n  const obstacles: { x: number; y: number; width: number; height: number }[] =\r\n    [];\r\n\r\n  for (let i = 0; i < Constants.MAP_GRID_COLS; i++) {\r\n    for (let j = 0; j < Constants.MAP_GRID_ROWS; j++) {\r\n      obstacles.push({\r\n        x: Constants.CELL_WIDTH * j,\r\n        y:\r\n          Constants.CELL_HEIGHT * Constants.MAP_GRID_ROWS -\r\n          Constants.CELL_HEIGHT * i,\r\n        width: Constants.CELL_WIDTH,\r\n        height: Constants.CELL_HEIGHT,\r\n      });\r\n    }\r\n  }\r\n\r\n  const bumpWorld = Bump.newWorld(Constants.CELL_WIDTH);\r\n  const offsetTileMap = 10;\r\n  bumpWorld.add(\r\n    \"player\",\r\n    port.spawn.x - offsetTileMap / 2,\r\n    Constants.MAP_HEIGHT - port.spawn.y + offsetTileMap,\r\n    10,\r\n    10\r\n  );\r\n\r\n  world.register(\"bumpWorld\", bumpWorld);\r\n  world.register(\"inputHandler\", inputHandler);\r\n  world.register(\"joyStick\", joyStick);\r\n  world.register(\"shapeRenderer\", shapeRenderer);\r\n  world.register(\"batch\", batch);\r\n  world.register(\"rects\", rects);\r\n  world.register(\"obstacles\", obstacles);\r\n  world.register(\"tileSetsRegions\", tileSetsRegions);\r\n  world.register(\"gameConfig\", gameConfig);\r\n  world.register(\"port\", port);\r\n  world.register(\"layersMapRender\", layersMapRender);\r\n  world.register(\"mapData\", mapData);\r\n\r\n  world.addSystem(new PlayerMovementSystem(), true);\r\n  world.addSystem(new ObstaclesSystem(), true);\r\n  world.addSystem(new ChangeMapSystem(), true);\r\n\r\n  world.addSystem(new MapRenderingSystem(), false);\r\n  world.addSystem(new PlayerRenderSystem(), false);\r\n\r\n  createGameLoop((delta: number) => {\r\n    gl.clear(gl.COLOR_BUFFER_BIT);\r\n    batch.setProjection(camera.combined);\r\n    shapeRenderer.setProjection(camera.combined);\r\n    world.setDelta(delta);\r\n\r\n    world.processActiveSystem();\r\n    world.processPassiveSystem();\r\n  });\r\n};\r\ninit();\r\n"],"names":["ReflectOwnKeys","R","Reflect","ReflectApply","apply","target","receiver","args","Function","prototype","call","ownKeys","Object","getOwnPropertySymbols","getOwnPropertyNames","concat","NumberIsNaN","Number","isNaN","value","EventEmitter","init","this","module","exports","once","emitter","name","Promise","resolve","reject","errorListener","err","removeListener","resolver","slice","arguments","eventTargetAgnosticAddListener","handler","flags","on","addErrorHandlerIfEventEmitter","_events","undefined","_eventsCount","_maxListeners","defaultMaxListeners","checkListener","listener","TypeError","_getMaxListeners","that","_addListener","type","prepend","m","events","existing","warning","create","newListener","emit","unshift","push","length","warned","w","Error","String","count","console","warn","onceWrapper","fired","wrapFn","_onceWrap","state","wrapped","bind","_listeners","unwrap","evlistener","arr","ret","Array","i","unwrapListeners","arrayClone","listenerCount","n","copy","addEventListener","wrapListener","arg","removeEventListener","defineProperty","enumerable","get","set","RangeError","getPrototypeOf","setMaxListeners","getMaxListeners","doError","error","er","message","context","len","listeners","addListener","prependListener","prependOnceListener","list","position","originalListener","shift","index","pop","spliceOne","off","removeAllListeners","key","keys","rawListeners","eventNames","FastBitSet","iterable","words","obj","Symbol","iterator","add","resize","flip","clear","remove","isEmpty","c","has","checkedAdd","word","newword","trim","nl","hammingWeight","v","hammingWeight4","v1","v2","v3","v4","size","answer","array","pos","k","t","forEach","fnc","clone","intersects","otherbitmap","newcount","Math","min","intersection","intersection_size","new_intersection","equals","mcount","difference","difference_size","toString","join","union","new_union","max","c2","new_difference","union_size","__importDefault","mod","__esModule","Archetype","fastbitset_1","require","componentTypes","componentBits","default","componentBitsInitialized","Component","ComponentMapper","data","entityId","component","EntityIteratingSystem","System_1","types","world","getComponentIndex","begin","getEntities","processEntity","end","System","EntitySystem","entities","processEntities","Inject","propName","targetType","constructor","hasOwnProperty","__inject__","InjectMapper","__injectMapper__","ComponentMapper_1","World","mappers","componentBitsMap","componentIndices","Map","currentComponentIndex","activeSystems","passiveSystems","injectionRegistry","delta","getNewId","typeIndex","getMapperByIndex","archetype","id","addComponent","updateComponentBits","mapper","getComponentBits","getMapper","entityComponentBits","system","active","setWorld","injectMapper","inject","initialized","injectPoints","injectKey","componentType","object","injectName","dispose","process","World_1","Archetype_1","Component_1","EntityIteratingSystem_1","EntitySystem_1","InjectMapper_1","Inject_1","PlayMode","Animation","keyFrames","frameDurations","totalDuration","isArray","lastDuration","fD","stateTimeRemainder","reverse","fN","stateTime","mode","runIndex","floor","frameNumber","NORMAL","getFrameNumber","LOOP","LOOP_PINGPONG","REVERSED","LOOP_REVERSED","__awaiter","thisArg","_arguments","P","generator","fulfilled","step","next","e","rejected","result","done","then","AssetManager","BitmapFont_1","Texture_1","TextureAtlas_1","gl","promises","atlases","textures","jsonData","binaryData","fonts","getTotal","path","promise","TextureAtlas","load","atlas","reportDone","fetch","res","json","arrayBuffer","buffer","BitmapFont","font","Texture","texture","all","_a","getRegions","destroy","delete","BitmapFontCache_1","BitmapFontData_1","Utils_1","regions","integer","glyphValues","values","glyphs","page","j","glyph","setGlyphRegion","missingGlyph","draw","batch","str","x","y","targetWidth","halign","Align","left","wrap","start","truncate","cache","addText","getColor","getScaleX","scaleX","getScaleY","scaleY","getRegion","getLineHeight","lineHeight","getSpaceXadvance","spaceXadvance","getXHeight","xHeight","getCapHeight","capHeight","getAscent","ascent","getDescent","descent","isFlipped","flipped","ownsTexture","setFixedWidthGlyphs","maxAdvance","g","getGlyph","charAt","xadvance","xoffset","kerning","fixedWidth","setUseIntegerPositions","usesIntegerPositions","getCache","getData","getOwnsTexture","setOwnsTexture","newFontCache","BitmapFontCache","log","fontFile","interger","fontData","BitmapFontData","loadFont","GlyphLayout_1","NumberUtils_1","tempColor","Color","drawingTexts","layouts","pooledLayouts","color","setPosition","translate","xAmount","yAmount","round","pageVertices","vertices","ii","nn","idx","setColors","r","b","a","intBits","NumberUtil","intToFloatColor","setColor","Pools","freeAll","pageGlyphIndices","requireGlyphs","layout","requirePageGlyphs","glyphCount","tempGlyphCount","runs","glyphItems","vertexCount","newVertices","Utils","arrayCopy","setPageCount","pageCount","newPageVertices","fill","newIdx","newPageGlyphIndices","pageGlyphIndicesLength","addToCache","runCount","colors","colorsIndex","nextColorGlyphIndex","glyphIndex","lastColorFloatBits","run","xAdvances","gx","gy","addGlyph","currentTint","yoffset","width","height","u","u2","x2","y2","setText","setTextToCache","addTextToCache","obtain","getX","getY","getFont","use","getVertices","getVertexCount","getLayouts","GlyphLayout","WHITE","offset","region","find","item","Glyph_1","TextureRegion_1","concatAndResolveUrl","url","url1","split","url2","url3","l","CHARACTER_MAX_VALUE","blankLineScale","xChars","capChars","imagePaths","text","fileContent","lines","map","s","line","substring","indexOf","padding","padTop","parseInt","padRight","padBottom","padLeft","padY","common","startsWith","baseLine","p","idMatches","match","RegExp","fileMatches","fileName","Glyph","tokens","StringTokenizer","nextToken","ch","srcX","srcY","hasMoreTokens","_c","setGlyph","first","second","amount","setKerning","hasMetricsOverride","overrideAscent","overrideDescent","overrideDown","overrideCapHeight","overrideLineHeight","overrideSpaceXAdvance","overrideXHeight","parseFloat","spaceGlyph","xadvanceGlyph","getFirstGlyph","xGlyph","capGlyph","down","regionsData","top","pageId","pages","invTexWidth","invTexHeight","regionData","TextureRegion","originalWidth","originalHeight","offsetX","offsetY","setLineHeight","PAGE_SIZE","hasGlyph","charCodeAt","getGlyphs","lastGlyph","markupEnabled","getKerning","lastGlyphWidth","getWrapIndex","glyphsItems","isWhitespace","isBreakChar","breakChars","character","fromCharCode","getImagePath","getImagePaths","setScale","scale","scaleXY","delimitter","strArray","currentIndex","strings","st","BoundingBox","Vector3_1","Vector3","cnt","dim","clr","out","setFrom","z","bounds","minimum","maximum","update","sub","points","inf","l_point","extPoint","Infinity","point","a_bounds","center","radius","transform","tmpVector","multiply","x0","y0","z0","x1","y1","z1","isValid","lx","abs","sumx","ly","sumy","lz","sumz","OrthoCamera","Matrix4_1","viewportWidth","viewportHeight","screenWidth","screenHeight","direction","up","near","far","zoom","projectionView","Matrix4","inverseProjectionView","projection","view","tmp3","yDown","cameraX","cameraY","ortho","lookAt","invert","combined","screenCoords","project","worldCoords","worldCoord","screenCoord","screenToWorld","Game","screen","currentScreen","shared","PAGES","LOG2_PAGE_SIZE","Uint32Array","ArrayBuffer","GlyphRun_1","hAlign","epsilon","glyphRunPool","GlyphRun","colorStack","reset","wrapOrTruncate","currentColor","toIntBits","nextColor","isLastRun","lineRun","runStart","runEnd","newline","runEnded","free","appendRun","setLastGlyphXAdvance","runWidth","getGlyphWidth","wrapIndex","calculateWidths","alignRuns","runsItems","glyphWidth","truncateRun","truncateWidth","splice","droppedGlyphCount","last","getLineOffset","glyphs2","xAdvances2","firstEnd","secondStart","glyphs1","xAdvances1","firstGlyphCount","secondGlyphCount","reductionThreshold","colorChangeIndex","lastColor","InputHandler","InputEvent","events_1","Vector2_1","canvas","Vector2","lastX","lastY","touched","mouseDownHandler","evt","handleMove","mouseUpHandler","mouseMoveHandler","touchStartHandler","preventDefault","touch","touches","dispatchEvent","MouseEvent","clientX","clientY","touchEndHandler","touchMoveHandler","event","rect","getBoundingClientRect","camera","unprojectVector2","M33","M32","M31","M30","M23","M22","M21","M20","M13","M12","M11","M10","M03","M02","M01","M00","temp","Float32Array","l_det","inv_det","fovy","aspectRatio","identity","l_fd","tan","PI","l_a1","l_a2","right","bottom","x_orth","y_orth","z_orth","tx","ty","tz","matrix","initTemps","xAxis","yAxis","zAxis","normalize","cross","val","tmpMatrix","Color2Attribute","ColorAttribute","TexCoordAttribute","Position3Attribute","Position2Attribute","VertexAttribute","VertexAttributeType","Mesh","Shader_1","attributes","maxVertices","maxIndices","verticesLength","dirtyVertices","indicesLength","dirtyIndices","elementsPerVertex","numElements","indices","Uint16Array","shader","primitiveType","drawWithOffset","drawElements","UNSIGNED_SHORT","drawArrays","unbind","bindBuffer","ARRAY_BUFFER","verticesBuffer","attrib","location","getAttributeLocation","enableVertexAttribArray","vertexAttribPointer","FLOAT","ELEMENT_ARRAY_BUFFER","indicesBuffer","disableVertexAttribArray","createBuffer","bufferData","subarray","DYNAMIC_DRAW","deleteBuffer","Shader","POSITION","Float","unit","TEXCOORDS","COLOR","COLOR2","int8","Int8Array","int32","Int32Array","float32","f","intBitsToFloat","bits","PolygonBatch","Mesh_1","quad","twoColorTint","isDrawing","lastTexture","projectionValues","mesh","newTwoColoredTextured","srcColorBlend","SRC_ALPHA","srcAlphaBlend","ONE","dstBlend","ONE_MINUS_SRC_ALPHA","drawCalls","setUniform4x4f","MVP_MATRIX","setUniformi","enable","BLEND","blendFuncSeparate","flush","drawVertices","QUAD_TRIANGLES","getIndices","indexStart","numVertices","setVerticesLength","indicesArray","setIndicesLength","TRIANGLES","totalDrawCalls","disable","originX","originY","rotation","ou1","ov1","ou2","ov2","rotate","tmpV1","x3","x4","y3","y4","cos","sin","rotatedX1","rotatedY1","rotatedX2","rotatedY2","rotatedX3","rotatedY3","rotatedX4","rotatedY4","u1","u3","u4","vertexShader","fragmentShader","vs","fs","program","tmp2x2","tmp3x3","tmp4x4","vsSource","fsSource","compile","compileShader","VERTEX_SHADER","FRAGMENT_SHADER","compileProgram","source","createShader","shaderSource","getShaderParameter","COMPILE_STATUS","getShaderInfoLog","deleteShader","isContextLost","createProgram","attachShader","linkProgram","getProgramParameter","LINK_STATUS","getProgramInfoLog","deleteProgram","useProgram","uniform","uniform1i","getUniformLocation","uniform1f","value2","uniform2f","value3","uniform3f","value4","uniform4f","uniformMatrix2fv","uniformMatrix3fv","uniformMatrix4fv","attribute","getAttribLocation","SAMPLER","ShapeRenderer","ShapeType","shapeType","Filled","vertexIndex","tmp","newColored","setFromColor","check","Point","vertex","Line","filled","color2","color3","color4","nor","polygonVertices","firstX","firstY","segments","MathUtils","cbrt","angle","cx","cy","cx1","cy1","cx2","cy2","subdiv_step","subdiv_step2","subdiv_step3","pre1","pre2","pre4","pre5","tmp1x","tmp1y","tmp2x","tmp2y","fx","fy","dfx","dfy","ddfx","ddfy","dddfx","dddfy","Sprite","dirty","origin","setSize","setOrigin","sprite","setVector","setX","setY","tint","rad","rotated","xRatio","yRatio","drawWidth","drawHeight","drawX","minx","miny","maxx","maxy","alphaModulation","oldAlpha","setAlpha","TextureFilter","TextureWrap","image","useMipMaps","boundUnit","_image","restore","minFilter","magFilter","texParameteri","TEXTURE_2D","TEXTURE_MIN_FILTER","TEXTURE_MAG_FILTER","validateMagFilter","uWrap","vWrap","TEXTURE_WRAP_S","TEXTURE_WRAP_T","createTexture","DISABLE_UNPACK_PREMULTIPLIED_ALPHA_WEBGL","pixelStorei","UNPACK_PREMULTIPLY_ALPHA_WEBGL","texImage2D","RGBA","UNSIGNED_BYTE","LINEAR","LINEAR_MIPMAP_LINEAR","CLAMP_TO_EDGE","generateMipmap","activeTexture","TEXTURE0","bindTexture","deleteTexture","useMipmaps","Image","onload","src","MipMap","MipMapLinearLinear","MipMapLinearNearest","MipMapNearestLinear","MipMapNearestNearest","Linear","filter","sort","packFileUrl","textureOptions","packFileContent","pageData","pageImage","file","tuple","format","repeatX","ClampToEdge","repeatY","Repeat","mipMaps","splits","pads","tex","extraData","regionX","regionY","regionWidth","regionHeight","drawY","cols","rows","copyArray","createStage","pointInRect","resizeCanvas","createGameLoop","WindowedMean","TimeKeeper","Pool","PowOut","Pow","Interpolation","StringSet","IntSet","align","topLeft","topRight","bottomLeft","bottomRight","contains","entries","oldSize","clamp","hex","setFromString","RED","GREEN","BLUE","MAGENTA","degrees","degRad","ceil","pow","randomTriangularWith","random","d","sqrt","PI2","radiansToDegrees","radDeg","degreesToRadians","applyInternal","power","sourceStart","dest","destStart","fromIndex","toIndex","setArraySize","defaultValue","SUPPORTS_TYPED_ARRAYS","Int16Array","fround","element","toUpperCase","instantiator","items","pools","objects","pool","maxDelta","framesPerSecond","totalTime","lastTime","Date","now","frameCount","frameTime","windowSize","addedValues","lastValue","mean","hasEnoughData","requestId","lastUpdate","fps","running","frameInLastSecond","elapsed","loop","requestAnimationFrame","isRunning","stop","cancelAnimationFrame","getFps","deviceRatio","devicePixelRatio","window","displayWidth","clientWidth","displayHeight","clientHeight","pX","pY","options","assign","hidden","info","wrapper","document","createElement","setAttribute","wrapperClassName","className","style","display","appendChild","body","getCanvas","getInfo","show","hide","cleanup","removeChild","targetOffset","srcOffset","scalar","deltaX","deltaY","distanceSqr","atan2","len2","newX","newY","rotateRad","l_mat","l_w","output","invMatrix","viewX","viewY","viewWidth","viewHeight","createViewport","Camera_1","contextOption","defaultOptions","autoUpdate","pixelRatio","crop","disablePremultipliedAlpha","premultipliedAlpha","resizeHandler","getContext","additionalCameras","viewportInfo","worldWidth","worldHeight","vWidth","vHeight","viewportObject","getViewportInfo","getCamera","addCamera","ratio","vRatio","displayX","displayY","viewport","cameraWidth","cameraHeight","cleanUp","ViewportInputHandler","InputHandler_1","inputHandler","isTouched","vX","vY","__createBinding","o","k2","desc","getOwnPropertyDescriptor","writable","configurable","__exportStar","arr2","arrayLikeToArray","self","ReferenceError","instance","Constructor","_defineProperties","props","descriptor","protoProps","staticProps","unsupportedIterableToArray","allowArrayLike","it","F","_e","normalCompletion","didErr","_e2","isNativeReflectConstruct","possibleConstructorReturn","Derived","hasNativeReflectConstruct","Super","NewTarget","construct","superPropBase","_get","property","base","_getPrototypeOf","setPrototypeOf","__proto__","subClass","superClass","sham","Proxy","Boolean","valueOf","iter","from","_i","_s","_arr","_n","_d","_typeof","assertThisInitialized","_regeneratorRuntime","Op","hasOwn","$Symbol","iteratorSymbol","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","define","innerFn","outerFn","tryLocsList","protoGenerator","Generator","Context","_invoke","method","doneResult","delegate","delegateResult","maybeInvokeDelegate","ContinueSentinel","sent","_sent","dispatchException","abrupt","record","tryCatch","fn","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","NativeIteratorPrototype","Gp","defineIteratorMethods","AsyncIterator","PromiseImpl","invoke","__await","unwrapped","previousPromise","callInvokeWithMethodAndArg","resultName","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","iteratorMethod","displayName","isGeneratorFunction","genFun","ctor","mark","awrap","async","skipTempReset","prev","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","thrown","delegateYield","_setPrototypeOf","arrayWithHoles","iterableToArrayLimit","nonIterableRest","arrayWithoutHoles","iterableToArray","nonIterableSpread","minLen","test","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","asyncGeneratorStep","gen","_next","_throw","assertIsPositiveNumber","DELTA","nearest","rect_getNearestCorner","h","px","py","rect_getSegmentIntersectionIndices","ti1","ti2","nx","ny","q","_ti1","_ti2","dx","dy","nx1","ny1","nx2","ny2","side","rect_getDiff","w1","h1","w2","h2","rect_containsPoint","rect_isIntersecting","rect_getSquareDistance","rect_detectCollision","goalX","goalY","overlaps","ti","MAX_SAFE_INTEGER","sign","move","normal","itemRect","otherRect","grid_toCell","cellSize","grid_traverse_initStep","ct","t1","t2","grid_toCellRect","assertType","desiredType","assertIsRect","_world","column","_x","_y","_w","_h","_goalX","_goalY","_filter","collisions","slide","tch","bounce","collision","bx","by","bnx","bny","sortByTiAndDistance","ir","ar","br","defaultFilter","sortByWeight","weight","getCellsTouchedBySegment","cells","visited","traverseFunction","stepX","stepY","grid_traverse","row","cell","ID","getInfoAboutItemsTouchedBySegment","itemInfo","itemID","arr1","tii0","tii1","input","responses","rects","nonEmptyCells","_proto","addResponse","response","getResponseByName","tl","tt","tw","th","cl","cw","dictItemsInCellRect","getDictItemsInCellRect","other","responseName","hasItem","getRect","countCells","getItems","rectID","_this","countItems","addItemToCell","items_dict","removeItemFromCell","_row$cx","toWorld","grid_toWorld","toCell","queryRect","queryPoint","querySegment","itemsInfo","querySegmentWithCoords","JSON","parse","stringify","cl1","ct1","cw1","ch1","cl2","ct2","cw2","ch2","cyOut","cr1","cb1","cr2","cb2","checkFilter","visitedFilter","itm","detectedCollisions","projectedCollisions","collisionsCounter","bump","newWorld","getNearestCorner","getSegmentIntersectionIndices","getDiff","containsPoint","isIntersecting","getSquareDistance","detectCollision","freeze","_initializerDefineProperty","initializer","_classCallCheck","_createClass","_assertThisInitialized","_inherits","_possibleConstructorReturn","_createSuper","_applyDecoratedDescriptor","decorators","reduce","decorator","Constants","SCREEN_WIDTH","SCREEN_HEIGHT","MAP_WIDTH","MAP_HEIGHT","MAP_GRID_COLS","MAP_GRID_ROWS","CELL_WIDTH","CELL_HEIGHT","MAX_COUNT_MAP","ChangeMapSystem","reload","realNextMapPosY","realPreMapPosY","offsetTileMap","playerRect","bumpWorld","gameConfig","mapNumber","port","nextMap","layersMapRender","obstacle","spawn","mapData","map2","layers","preMap","walls","layer1","layer2","map3","obstacles","map1","MapRenderingSystem","regionId","tileSetsRegions","ObstaclesSystem","PlayerMovementSystem","joyStick","tempVec2","thumbPos","getTouchedWorldCoord","subVector","PlayerRenderSystem","shapeRenderer","stage","tileSets","clearColor","changePreMap","changeCurrentMap","changeNextMap","dragging","Bump","register","addSystem","COLOR_BUFFER_BIT","setProjection","setDelta","processActiveSystem","processPassiveSystem"],"sourceRoot":""}